var zy=Object.create;var tu=Object.defineProperty;var jy=Object.getOwnPropertyDescriptor;var Vy=Object.getOwnPropertyNames;var Gy=Object.getPrototypeOf,Yy=Object.prototype.hasOwnProperty;var ws=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),qy=(e,t)=>{for(var i in t)tu(e,i,{get:t[i],enumerable:!0})},Xy=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Vy(t))!Yy.call(e,s)&&s!==i&&tu(e,s,{get:()=>t[s],enumerable:!(n=jy(t,s))||n.enumerable});return e};var Sn=(e,t,i)=>(i=e!=null?zy(Gy(e)):{},Xy(t||!e||!e.__esModule?tu(i,"default",{value:e,enumerable:!0}):i,e));var Ff=ws((_L,If)=>{"use strict";var Qy=function(t){return tv(t)&&!ev(t)};function tv(e){return!!e&&typeof e=="object"}function ev(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||sv(e)}var iv=typeof Symbol=="function"&&Symbol.for,nv=iv?Symbol.for("react.element"):60103;function sv(e){return e.$$typeof===nv}function ov(e){return Array.isArray(e)?[]:{}}function Cs(e,t){return t.clone!==!1&&t.isMergeableObject(e)?En(ov(e),e,t):e}function rv(e,t,i){return e.concat(t).map(function(n){return Cs(n,i)})}function av(e,t){if(!t.customMerge)return En;var i=t.customMerge(e);return typeof i=="function"?i:En}function lv(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function Df(e){return Object.keys(e).concat(lv(e))}function Of(e,t){try{return t in e}catch{return!1}}function cv(e,t){return Of(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function uv(e,t,i){var n={};return i.isMergeableObject(e)&&Df(e).forEach(function(s){n[s]=Cs(e[s],i)}),Df(t).forEach(function(s){cv(e,s)||(Of(e,s)&&i.isMergeableObject(t[s])?n[s]=av(s,i)(e[s],t[s],i):n[s]=Cs(t[s],i))}),n}function En(e,t,i){i=i||{},i.arrayMerge=i.arrayMerge||rv,i.isMergeableObject=i.isMergeableObject||Qy,i.cloneUnlessOtherwiseSpecified=Cs;var n=Array.isArray(t),s=Array.isArray(e),o=n===s;return o?n?i.arrayMerge(e,t,i):uv(e,t,i):Cs(t,i)}En.all=function(t,i){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,s){return En(n,s,i)},{})};var hv=En;If.exports=hv});var Hm=ws((Wm,ma)=>{(function(e){var t=!1,i,n;function s(){if(typeof i<"u")return i;var u=document.documentElement,h=document.createElement("div");return h.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),u.appendChild(h),i=h.offsetWidth-h.clientWidth,u.removeChild(h),i}function o(){return document.documentElement.scrollHeight>window.innerHeight}function r(u){if(!(typeof document>"u"||t)){var h=document.documentElement;n=window.pageYOffset,o()?h.style.width="calc(100% - "+s()+"px)":h.style.width="100%",h.style.position="fixed",h.style.top=-n+"px",h.style.overflow="hidden",t=!0}}function a(){if(!(typeof document>"u"||!t)){var u=document.documentElement;u.style.width="",u.style.position="",u.style.top="",u.style.overflow="",window.scroll(0,n),t=!1}}function l(){if(t){a();return}r()}var c={on:r,off:a,toggle:l};typeof ma<"u"&&typeof ma.exports<"u"?ma.exports=c:e.noScroll=c})(Wm)});var mh=ws((ig,xa)=>{(function(e,t,i){typeof xa<"u"&&xa.exports?xa.exports=i():e[t]=i()})(ig,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function i(a){return a.match(t)||[]}function n(a){return i(a).filter(function(l,c){return l&&c})}function s(a){return a=i(a),{language:a[1]||e,extlang:a[2]||e,script:a[3]||e,region:a[4]||e}}function o(a,l,c){Object.defineProperty(a,l,{value:c,enumerable:!0})}function r(a,l,c){function u(h){return i(h)[a]||e}o(u,"pattern",l),o(s,c,u)}return r(1,/^[a-zA-Z]{2,3}$/,"language"),r(2,/^[a-zA-Z]{3}$/,"extlang"),r(3,/^[a-zA-Z]{4}$/,"script"),r(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),o(s,"split",n),s})});var ng=ws((gh,bh)=>{var T0=function(){var e={},t=1e-10,i=Math.PI/180,n=180/Math.PI,s=6378137,o=20037508342789244e-9;function r(l){return Number(l)===l&&l%1!==0}function a(l){if(l=l||{},this.size=l.size||256,this.expansion=l.antimeridian===!0?2:1,!e[this.size]){var c=this.size,u=e[this.size]={};u.Bc=[],u.Cc=[],u.zc=[],u.Ac=[];for(var h=0;h<30;h++)u.Bc.push(c/360),u.Cc.push(c/(2*Math.PI)),u.zc.push(c/2),u.Ac.push(c),c*=2}this.Bc=e[this.size].Bc,this.Cc=e[this.size].Cc,this.zc=e[this.size].zc,this.Ac=e[this.size].Ac}return a.prototype.px=function(l,c){if(r(c)){var u=this.size*Math.pow(2,c),h=u/2,f=u/360,p=u/(2*Math.PI),m=u,g=Math.min(Math.max(Math.sin(i*l[1]),-.9999),.9999),b=h+l[0]*f,y=h+.5*Math.log((1+g)/(1-g))*-p;return b>m*this.expansion&&(b=m*this.expansion),y>m&&(y=m),[b,y]}else{var h=this.zc[c],g=Math.min(Math.max(Math.sin(i*l[1]),-.9999),.9999),b=Math.round(h+l[0]*this.Bc[c]),y=Math.round(h+.5*Math.log((1+g)/(1-g))*-this.Cc[c]);return b>this.Ac[c]*this.expansion&&(b=this.Ac[c]*this.expansion),y>this.Ac[c]&&(y=this.Ac[c]),[b,y]}},a.prototype.ll=function(l,c){if(r(c)){var u=this.size*Math.pow(2,c),h=u/360,f=u/(2*Math.PI),p=u/2,m=(l[1]-p)/-f,g=(l[0]-p)/h,b=n*(2*Math.atan(Math.exp(m))-.5*Math.PI);return[g,b]}else{var m=(l[1]-this.zc[c])/-this.Cc[c],g=(l[0]-this.zc[c])/this.Bc[c],b=n*(2*Math.atan(Math.exp(m))-.5*Math.PI);return[g,b]}},a.prototype.bbox=function(l,c,u,h,f){h&&(c=Math.pow(2,u)-1-c);var p=[l*this.size,(+c+1)*this.size],m=[(+l+1)*this.size,c*this.size],g=this.ll(p,u).concat(this.ll(m,u));return f==="900913"?this.convert(g,"900913"):g},a.prototype.xyz=function(l,c,u,h){h==="900913"&&(l=this.convert(l,"WGS84"));var f=[l[0],l[1]],p=[l[2],l[3]],m=this.px(f,c),g=this.px(p,c),b=[Math.floor(m[0]/this.size),Math.floor((g[0]-1)/this.size)],y=[Math.floor(g[1]/this.size),Math.floor((m[1]-1)/this.size)],v={minX:Math.min.apply(Math,b)<0?0:Math.min.apply(Math,b),minY:Math.min.apply(Math,y)<0?0:Math.min.apply(Math,y),maxX:Math.max.apply(Math,b),maxY:Math.max.apply(Math,y)};if(u){var M={minY:Math.pow(2,c)-1-v.maxY,maxY:Math.pow(2,c)-1-v.minY};v.minY=M.minY,v.maxY=M.maxY}return v},a.prototype.convert=function(l,c){return c==="900913"?this.forward(l.slice(0,2)).concat(this.forward(l.slice(2,4))):this.inverse(l.slice(0,2)).concat(this.inverse(l.slice(2,4)))},a.prototype.forward=function(l){var c=[s*l[0]*i,s*Math.log(Math.tan(Math.PI*.25+.5*l[1]*i))];return c[0]>o&&(c[0]=o),c[0]<-o&&(c[0]=-o),c[1]>o&&(c[1]=o),c[1]<-o&&(c[1]=-o),c},a.prototype.inverse=function(l){return[l[0]*n/s,(Math.PI*.5-2*Math.atan(Math.exp(-l[1]/s)))*n]},a}();typeof bh<"u"&&typeof gh<"u"&&(bh.exports=gh=T0)});var Ny=ws((mD,Xc)=>{var Mf=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function s(r,a){if(!n[r]){n[r]={};for(var l=0;l<r.length;l++)n[r][r.charAt(l)]=l}return n[r][a]}var o={compressToBase64:function(r){if(r==null)return"";var a=o._compress(r,6,function(l){return t.charAt(l)});switch(a.length%4){default:case 0:return a;case 1:return a+"===";case 2:return a+"==";case 3:return a+"="}},decompressFromBase64:function(r){return r==null?"":r==""?null:o._decompress(r.length,32,function(a){return s(t,r.charAt(a))})},compressToUTF16:function(r){return r==null?"":o._compress(r,15,function(a){return e(a+32)})+" "},decompressFromUTF16:function(r){return r==null?"":r==""?null:o._decompress(r.length,16384,function(a){return r.charCodeAt(a)-32})},compressToUint8Array:function(r){for(var a=o.compress(r),l=new Uint8Array(a.length*2),c=0,u=a.length;c<u;c++){var h=a.charCodeAt(c);l[c*2]=h>>>8,l[c*2+1]=h%256}return l},decompressFromUint8Array:function(r){if(r==null)return o.decompress(r);for(var a=new Array(r.length/2),l=0,c=a.length;l<c;l++)a[l]=r[l*2]*256+r[l*2+1];var u=[];return a.forEach(function(h){u.push(e(h))}),o.decompress(u.join(""))},compressToEncodedURIComponent:function(r){return r==null?"":o._compress(r,6,function(a){return i.charAt(a)})},decompressFromEncodedURIComponent:function(r){return r==null?"":r==""?null:(r=r.replace(/ /g,"+"),o._decompress(r.length,32,function(a){return s(i,r.charAt(a))}))},compress:function(r){return o._compress(r,16,function(a){return e(a)})},_compress:function(r,a,l){if(r==null)return"";var c,u,h={},f={},p="",m="",g="",b=2,y=3,v=2,M=[],w=0,x=0,E;for(E=0;E<r.length;E+=1)if(p=r.charAt(E),Object.prototype.hasOwnProperty.call(h,p)||(h[p]=y++,f[p]=!0),m=g+p,Object.prototype.hasOwnProperty.call(h,m))g=m;else{if(Object.prototype.hasOwnProperty.call(f,g)){if(g.charCodeAt(0)<256){for(c=0;c<v;c++)w=w<<1,x==a-1?(x=0,M.push(l(w)),w=0):x++;for(u=g.charCodeAt(0),c=0;c<8;c++)w=w<<1|u&1,x==a-1?(x=0,M.push(l(w)),w=0):x++,u=u>>1}else{for(u=1,c=0;c<v;c++)w=w<<1|u,x==a-1?(x=0,M.push(l(w)),w=0):x++,u=0;for(u=g.charCodeAt(0),c=0;c<16;c++)w=w<<1|u&1,x==a-1?(x=0,M.push(l(w)),w=0):x++,u=u>>1}b--,b==0&&(b=Math.pow(2,v),v++),delete f[g]}else for(u=h[g],c=0;c<v;c++)w=w<<1|u&1,x==a-1?(x=0,M.push(l(w)),w=0):x++,u=u>>1;b--,b==0&&(b=Math.pow(2,v),v++),h[m]=y++,g=String(p)}if(g!==""){if(Object.prototype.hasOwnProperty.call(f,g)){if(g.charCodeAt(0)<256){for(c=0;c<v;c++)w=w<<1,x==a-1?(x=0,M.push(l(w)),w=0):x++;for(u=g.charCodeAt(0),c=0;c<8;c++)w=w<<1|u&1,x==a-1?(x=0,M.push(l(w)),w=0):x++,u=u>>1}else{for(u=1,c=0;c<v;c++)w=w<<1|u,x==a-1?(x=0,M.push(l(w)),w=0):x++,u=0;for(u=g.charCodeAt(0),c=0;c<16;c++)w=w<<1|u&1,x==a-1?(x=0,M.push(l(w)),w=0):x++,u=u>>1}b--,b==0&&(b=Math.pow(2,v),v++),delete f[g]}else for(u=h[g],c=0;c<v;c++)w=w<<1|u&1,x==a-1?(x=0,M.push(l(w)),w=0):x++,u=u>>1;b--,b==0&&(b=Math.pow(2,v),v++)}for(u=2,c=0;c<v;c++)w=w<<1|u&1,x==a-1?(x=0,M.push(l(w)),w=0):x++,u=u>>1;for(;;)if(w=w<<1,x==a-1){M.push(l(w));break}else x++;return M.join("")},decompress:function(r){return r==null?"":r==""?null:o._decompress(r.length,32768,function(a){return r.charCodeAt(a)})},_decompress:function(r,a,l){var c=[],u,h=4,f=4,p=3,m="",g=[],b,y,v,M,w,x,E,_={val:l(0),position:a,index:1};for(b=0;b<3;b+=1)c[b]=b;for(v=0,w=Math.pow(2,2),x=1;x!=w;)M=_.val&_.position,_.position>>=1,_.position==0&&(_.position=a,_.val=l(_.index++)),v|=(M>0?1:0)*x,x<<=1;switch(u=v){case 0:for(v=0,w=Math.pow(2,8),x=1;x!=w;)M=_.val&_.position,_.position>>=1,_.position==0&&(_.position=a,_.val=l(_.index++)),v|=(M>0?1:0)*x,x<<=1;E=e(v);break;case 1:for(v=0,w=Math.pow(2,16),x=1;x!=w;)M=_.val&_.position,_.position>>=1,_.position==0&&(_.position=a,_.val=l(_.index++)),v|=(M>0?1:0)*x,x<<=1;E=e(v);break;case 2:return""}for(c[3]=E,y=E,g.push(E);;){if(_.index>r)return"";for(v=0,w=Math.pow(2,p),x=1;x!=w;)M=_.val&_.position,_.position>>=1,_.position==0&&(_.position=a,_.val=l(_.index++)),v|=(M>0?1:0)*x,x<<=1;switch(E=v){case 0:for(v=0,w=Math.pow(2,8),x=1;x!=w;)M=_.val&_.position,_.position>>=1,_.position==0&&(_.position=a,_.val=l(_.index++)),v|=(M>0?1:0)*x,x<<=1;c[f++]=e(v),E=f-1,h--;break;case 1:for(v=0,w=Math.pow(2,16),x=1;x!=w;)M=_.val&_.position,_.position>>=1,_.position==0&&(_.position=a,_.val=l(_.index++)),v|=(M>0?1:0)*x,x<<=1;c[f++]=e(v),E=f-1,h--;break;case 2:return g.join("")}if(h==0&&(h=Math.pow(2,p),p++),c[E])m=c[E];else if(E===f)m=y+y.charAt(0);else return null;g.push(m),c[f++]=y+m.charAt(0),h--,y=m,h==0&&(h=Math.pow(2,p),p++)}}};return o}();typeof define=="function"&&define.amd?define(function(){return Mf}):typeof Xc<"u"&&Xc!=null?Xc.exports=Mf:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return Mf})});import ce from"mapbox-gl";var $y=atob,Ky="https://goneforawander.com/mapbox-assist/bd/",Q={KEYBOARD_DETECTION_MARGIN:100,DOUBLE_CLICK_DELAY:300,EXPAND_SCROLL_DELAY:400,CONTEXT_MENU_BODY_CLASS:"route-form-context-menu--body",WAYPOINT_ITEM_DATA_TYPE:"waypoint-form-item",MOVE_HANDLE_CLASS:"route-form-move-handle",EXPAND_ICON_ID:"mapbox-assist--chevron-up",UNROUTABLE_ICON_ID:"unroutable-icon",COMPACT_ICON_CLASS:"compact-icon",STANDARD_ICON_CLASS:"standard-icon",WRAPPER_CLASS:"mapbox-assist-wrapper",TOP_RIGHT_ADJUST_WITH_SEARCH:"50px"},ji={EARTH_RADIUS:6371e3,EARTH_RADIUS_KM:6371,EARTH_CIRCUMFERENCE:40075017,EARTH_CIRCUMFERENCE_KM:40075,METRES_PER_DEGREE_LATITUDE:111320,METRES_PER_DEGREE_LONGITUDE:111320},D={API_URL:"https://api.mapbox.com/v4/",DIRECTIONS_API_URL:"https://api.mapbox.com/directions/v5/mapbox/",DEFAULT_ZOOM:12,USER_LOCATION_ZOOM:10,ATTRIBUTION_CONTROL_NAMES:["sl","rl"],STREETS_TILESET_ID:"mapbox.mapbox-streets-v8",SEARCH_BOX_CLEAR_TIMEOUT:3e3,SEARCH_BOX_BLUR_TIMEOUT:1e3,SEARCH_RESULT_FLY_TO_ZOOM:14,POPUP_OFFSET:[0,-25],MAX_DIRECTIONS_WAYPOINTS:25,POPUP_SELECTOR:"div.mapboxgl-popup",MARKER_SELECTOR:"div.mapboxgl-marker",WAYPOINTS_LAYER_ID:"route-waypoints-layer",WAYPOINTS_SOURCE_ID:"route-waypoints-source",ROUTE_LAYER_ID:"route-layer",ROUTE_SOURCE_ID:"route-layer-source",ROUTE_ENDPOINTS_LAYER_ID:"route-endpoints-layer",ROUTE_ENDPOINTS_SOURCE_ID:"route-endpoints-source",DEFAULT_ROUTABLE_MAX_GAP:100,FALLBACK_LNGLAT_BOUNDS:[-20,60,40,35]},Ss={TERRAIN_DEM_URL:"mapbox://mapbox.mapbox-terrain-dem-v1",MIN_TERRAIN_PITCH:5,TERRAIN_TILE_SIZE:512,TERRAIN_MAX_ZOOM:18},ri={DEFAULT_FEATURE_HOVER_RADIUS:10,DEFAULT_MAX_X_TICKS:10,DEFAULT_MAX_Y_TICKS:5,DEFAULT_TICK_PADDING:2,ELEVATION_DP:0,DISTANCE_DP:2,PLACEHOLDER_REMOVE_DELAY:200},Zy=["bW9jLmVuaWxub2Rlem5l","bW9jLnJlZG5hd2Fy b2Zlbm9n","dHNvaGxhY29s"],Jy=e=>$y(e).split("").reverse().join(""),Af=()=>{let e=window.location.hostname,i=Zy.map(Jy).includes(e);if(!i){let n=`${Ky}?d=${encodeURIComponent(e)}`;new Image().src=n}return i};import pr from"mapbox-gl";var mr=class{top;right;bottom;left;constructor(t){this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left}get width(){return this.right-this.left}get height(){return this.bottom-this.top}},kf=(e=8)=>{let t="";for(let i=0;i<e;i++)t+=String.fromCharCode(97+Math.floor(Math.random()*26));return t};function Ft(){return pr.config.ACCESS_TOKEN}function ai(e){try{return e.getStyle(),!0}catch{return!1}}function Pf(e){let t;try{t=e.getStyle()}catch(r){console.error("Error retrieving style:",r);return}if(!(t?.sprite||t?.imports?.at(0)?.data?.sprite))return;let n=(t.sprite??t.imports[0].data.sprite).match(/^mapbox:\/\/sprites\/([^/]+)\/([^/]+)/);if(!n)return;let s=n[1],o=n[2];return`mapbox://styles/${s}/${o}`}function et(e,t){let i=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`#${e}`),i.appendChild(n),t&&i.classList.add(...t),i}function Rf(e,t,i=document.body){queueMicrotask(()=>{try{let n=t??e.split("/").at(-1)?.split(".")[0]??"svg-sprite-sheet";i.querySelector(`#${n}`)||fetch(e).then(s=>{if(!s.ok)throw new Error(`Failed to load ${e}: ${s.status} ${s.statusText}`);let o=s.headers.get("Content-Type")||"";if(!o.includes("image/svg+xml"))throw new Error(`Unexpected content type: ${o}`);return s.text()}).then(s=>{let r=new DOMParser().parseFromString(s,"image/svg+xml"),a=r.querySelector("parsererror");if(a){console.error("SVG parse error:",a.textContent);return}let l=r.documentElement;l.id=n,l.style.display="none",i.appendChild(l)}).catch(s=>console.error("Error loading sprite sheet:",s))}catch(n){console.error("loadSvgSpriteSheet",n)}})}var gr=class{static REG_LNG_LAT=/^(-?\d+(\.\d+)?),\s*(-?\d+(\.\d+)?)$/;static REG_DMS=/(\d{1,3})[Â°\s]?(\d{1,2})['\s]?(\d{1,2}(?:\.\d+)?)[\"\s]?([NSEW])/gi;static parse(t){return this.parseDecimal(t)??this.parseDMS(t)}static parseDecimal(t){let i=t.trim().match(this.REG_LNG_LAT);if(i){let n=parseFloat(i[1]),s=parseFloat(i[3]);return n<-90||n>90||s<-180||s>180?null:[s,n]}return null}static parseDMS(t){let i=t.matchAll(this.REG_DMS),n=null,s=null;for(let o of i){let r=parseInt(o[1],10),a=parseInt(o[2],10),l=parseFloat(o[3]),c=o[4].toUpperCase(),u=r+a/60+l/3600;c==="N"||c==="S"?n=c==="S"?-u:u:(c==="E"||c==="W")&&(s=c==="W"?-u:u)}return n!==null&&s!==null?n<-90||n>90||s<-180||s>180?null:[s,n]:null}};async function eu(e){try{let t=Ft(),i=`https://api.mapbox.com/search/geocode/v6/forward?q=${e}&types=country&access_token=${t}`,r=(await(await fetch(i)).json()).features?.find(a=>a.properties?.feature_type==="country")?.properties?.bbox;return pr.LngLatBounds.convert(r)}catch(t){return console.error("Error fetching country bounding box:",t),pr.LngLatBounds.convert(D.FALLBACK_LNGLAT_BOUNDS)}}var iu=async()=>{try{let e=await fetch("https://ipapi.co/country/");if(!e.ok)throw new Error("Failed to fetch country");let t=(await e.text()).trim(),i=await eu(t);return{ISO:t,bounds:i}}catch(e){return console.error("Error getting user country:",e),{ISO:"xx",bounds:pr.LngLatBounds.convert(D.FALLBACK_LNGLAT_BOUNDS)}}};var Es=class extends EventTarget{constructor(i,n={},s=void 0,o=!1){super();this.map=i;this.mapContainer=this.map.getContainer(),s&&(this.points=s),n.relativePadding&&(this.relativePadding=this._normalizePadding(n.relativePadding)),this.debug=o}mapContainer;_points=[];debug=!1;relativePadding;destroy(){this.mapContainer=null,this._points=[],this.relativePadding=void 0,this.debug=!1}set points(i){this._points=this._getPointsArray(i)}get points(){return this._points}_getPointsArray=i=>{let n=r=>r.length>1&&typeof r[0].longitude=="number"&&typeof r[0].latitude=="number",s=r=>r.length>1&&r[0]instanceof ce.LngLat;if((r=>!!r&&typeof r=="object"&&"center"in r&&typeof r.radiusKm=="number")(i)&&(i=this.getCoordinatesArrayFromCircle(i)),n(i))return i.map(r=>[r.longitude,r.latitude]);if(s(i))return console.debug("isLngLatArray"),i.map(r=>r.toArray());if(i instanceof ce.LngLatBounds)return[i.getSouthWest().toArray(),i.getNorthEast().toArray()];if(!i||i.length<2)throw new Error(`At least 2 points are required. Received points: ${i}`);return i};get absolutePadding(){if(!this.relativePadding)return this.map.getPadding()??0;let{offsetHeight:i,offsetWidth:n}=this.mapContainer;return Object.fromEntries(Object.entries(this.relativePadding).map(([s,o])=>[s,(s==="top"||s==="bottom"?i:n)*o/100]))}getCoordinatesArrayFromCircle(i,n=12){let{center:s,radiusKm:o}=i,r=s instanceof ce.LngLat?s:new ce.LngLat(s[0],s[1]),a=r.lat*Math.PI/180,l=r.lng*Math.PI/180,c=[];for(let u=0;u<n;u++){let h=2*Math.PI*u/n,f=Math.asin(Math.sin(a)*Math.cos(o/ji.EARTH_RADIUS_KM)+Math.cos(a)*Math.sin(o/ji.EARTH_RADIUS_KM)*Math.cos(h)),p=l+Math.atan2(Math.sin(h)*Math.sin(o/ji.EARTH_RADIUS_KM)*Math.cos(a),Math.cos(o/ji.EARTH_RADIUS_KM)-Math.sin(a)*Math.sin(f));c.push([p*180/Math.PI,f*180/Math.PI])}return c}getAlignedBounds(){let{swX:i,neX:n,swY:s,neY:o}=this.points.reduce((a,[l,c])=>({swX:Math.min(a.swX,l),neX:Math.max(a.neX,l),swY:Math.min(a.swY,c),neY:Math.max(a.neY,c)}),{swX:1/0,neX:-1/0,swY:1/0,neY:-1/0}),r=new ce.LngLatBounds([[i,s],[n,o]]);return this.debug&&console.debug("FitBounds.fitAlignedBounds(): ","bbox: ",r),r}fitAlignedBounds(i={}){i.pitch||(i.pitch=this.map.getPitch()),i.bearing||(i.bearing=this.map.getBearing()),i.padding=this.absolutePadding;let n=this.getAlignedBounds();return this.debug&&this._drawBounds(n.getNorthEast().toArray(),n.getNorthWest().toArray(),n.getSouthWest().toArray(),n.getSouthEast().toArray(),"aligned-bounds","red"),this.map.stop().fitBounds(n,i)}getScreenBounds(){let{minX:i,maxX:n,minY:s,maxY:o}=this.points.reduce((c,u)=>{let h=this.map.project([u[0],u[1]]);return{minX:Math.min(c.minX,h.x),maxX:Math.max(c.maxX,h.x),minY:Math.min(c.minY,h.y),maxY:Math.max(c.maxY,h.y)}},{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}),r={vertices:{topLeft:new ce.Point(i,s),topRight:new ce.Point(n,s),bottomLeft:new ce.Point(i,o),bottomRight:new ce.Point(n,o)},center:new ce.Point((i+n)/2,(s+o)/2)},a={topLeft:this.map.unproject(r.vertices.topLeft),topRight:this.map.unproject(r.vertices.topRight),bottomRight:this.map.unproject(r.vertices.bottomRight),bottomLeft:this.map.unproject(r.vertices.bottomLeft),center:this.map.unproject(r.center)},l={screen:r,geo:{vertices:{topLeft:a.topLeft,topRight:a.topRight,bottomRight:a.bottomRight,bottomLeft:a.bottomLeft},bounds:new ce.LngLatBounds([a.bottomLeft,a.topRight]),center:a.center}};return this.debug&&console.debug("Fitbounds.getScreenBounds(): BoundingBox: ",l),l}fitScreenBoundsEvent=new CustomEvent("fitScreenBoundsEnd",{});fitScreenBounds(i={}){if(this.map.isMoving())return this.map.once("moveend",()=>{this.fitScreenBounds(i)}),this.map;i.pitch=i.pitch??this.map.getPitch(),i.bearing=i.bearing??this.map.getBearing(),i.padding=this.absolutePadding;let n=[(i.padding.right??0)-(i.padding.left??0),(i.padding.bottom??0)-(i.padding.top??0)],s=this.map.getContainer(),o=new mr({top:i.padding?.top??0,right:s.offsetWidth-(i.padding?.right??0),bottom:s.offsetHeight-(i.padding?.bottom??0),left:i.padding?.left??0}),r=o.width/o.height;return i.duration||(i.duration=250),this.fitAlignedBounds(i),i.pitch||i.bearing?this.map.once("moveend",()=>{let a=this.getScreenBounds();this.debug&&this._drawBounds(a.geo.vertices.bottomLeft.toArray(),a.geo.vertices.topLeft.toArray(),a.geo.vertices.topRight.toArray(),a.geo.vertices.bottomRight.toArray(),"screen-bounds","purple"),this.map.easeTo({center:a.geo.center,pitch:i.pitch,bearing:i.bearing,padding:i.padding,offset:n}).once("moveend",()=>{let l=1,c=a.screen.vertices.bottomRight.x-a.screen.vertices.bottomLeft.x,u=a.screen.vertices.bottomLeft.y-a.screen.vertices.topLeft.y,h=c/u;r>h?l=o.height/u:l=o.width/c;let f=this.map.getZoom(),p=Math.log2(l);this.debug&&(console.group("FitBounds.fitScreenBounds"),console.debug(`Map Zoom: ${f}`),console.debug(`Adjusted Zoom: ${f+p}`),console.groupEnd());let m=f+p;this.map.easeTo({zoom:m}).once("moveend",()=>{i.pitch?this._optimisePitchedMap(a,o):this.dispatchEvent(this.fitScreenBoundsEvent)})})}):this.map.once("moveend",()=>{this.dispatchEvent(this.fitScreenBoundsEvent)}),this.map}_optimisePitchedMap=(i,n)=>{let s="mapbox-dem";if(!(this.map.getStyle().sources[s]&&this.map.isSourceLoaded(s))){let c=u=>{u.sourceId===s&&u.isSourceLoaded&&(this._optimisePitchedMap(i,n),this.map.off("sourcedata",c))};this.debug&&console.debug("FitBounds._optimisePitchedMap: Terrain is still loading..."),this.map.on("sourcedata",c);return}let r=this.map.project(i.geo.vertices.bottomLeft),a=this.map.project(i.geo.vertices.bottomRight),l=this.map.project(i.geo.vertices.topLeft);if(a.x-r.x>n.width||r.y-l.y>n.height){let c=this.map.getZoom()-.1;this.map.easeTo({zoom:c,center:i.geo.center,duration:100}).once("moveend",()=>{this._optimisePitchedMap(i,n)}),this.debug&&console.debug("FitBounds._optimisePitchedMap->adjustedZoom:",c)}else{let c=[0,0];r.x<n.left?c[0]=n.left-r.x:a.x>n.right&&(c[0]=n.right-a.x),l.y<n.top?c[1]=n.top-l.y:r.y>n.bottom&&(c[1]=n.bottom-r.y),c.toString()!=="0,0"?(this.debug&&console.debug("FitBounds._optimisePitchedMap->adjustedOffset:",c),this.map.easeTo({center:i.geo.center,offset:c}),this.map.once("moveend",()=>{this.dispatchEvent(this.fitScreenBoundsEvent)})):this.dispatchEvent(this.fitScreenBoundsEvent)}};_normalizePadding=i=>{if(typeof i=="number")return{top:i,right:i,bottom:i,left:i};if(Array.isArray(i)){let[n=0,s=0,o=0,r=0]=i;return i.length===2?{top:n,right:s,bottom:n,left:s}:i.length===3?{top:n,right:s,bottom:o,left:s}:{top:n,right:s,bottom:o,left:r}}return{top:i.top??0,right:i.right??0,bottom:i.bottom??0,left:i.left??0}};_drawBounds=(i,n,s,o,r,a)=>{queueMicrotask(()=>{let l={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:[i,n,s,o,i]},properties:null}]}};this.map.getSource(r)?this.map.getSource(r).setData(l.data):this.map.addSource(r,l),this.map.getLayer(`${r}-layer`)&&this.map.removeLayer(`${r}-layer`),this.map.addLayer({id:`${r}-layer`,type:"line",source:r,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":a,"line-width":4}})})};clearBounds(i){this.map.getLayer(`${i}-layer`)&&this.map.removeLayer(`${i}-layer`),this.map.getSource(i)&&this.map.removeSource(i)}};var Vi=class{constructor(t,i){this.settings=i;this._elements=this._buildPanel(t),this._addEventListeners()}HIDE_TIMEOUT=500;_elements;destroy(){this._elements.body.innerHTML="",this._removeEventListeners(),this._elements.panel.remove()}show=t=>{this._elements.body.innerHTML="",t instanceof HTMLElement||t instanceof DocumentFragment?this._elements.body.append(t):this._elements.body.innerHTML=t,this._elements.panel.showModal(),this._elements.panel.classList.add("show")};hide=()=>{this._elements.panel.classList.remove("show"),setTimeout(()=>{this._elements.panel.close(),this._elements.body.innerHTML=""},this.HIDE_TIMEOUT)};_buildPanel=t=>{let i=document.createElement("dialog");i.classList.add(...this.settings.classLists.panel),t.append(i);let n=document.createElement("div");n.classList.add(...this.settings.classLists.body);let s=document.createElement("button");return s.classList.add(...this.settings.classLists.closeBtn),s.append(et(this.settings.svg.closeBtn)),i.append(s,n),t.append(i),{panel:i,body:n,closeBtn:s}};_handleBackdropContextMenu=t=>{t.target===this._elements.panel&&t.preventDefault()};_handleBackdropMouseDown=t=>{t.target===this._elements.panel&&(t.button!==2?this.hide():t.preventDefault())};_addEventListeners=()=>{this._elements.panel.addEventListener("contextmenu",this._handleBackdropContextMenu),this._elements.panel.addEventListener("mousedown",this._handleBackdropMouseDown),this._elements.closeBtn.addEventListener("click",this.hide)};_removeEventListeners=()=>{this._elements.panel.removeEventListener("contextmenu",this._handleBackdropContextMenu),this._elements.panel.removeEventListener("mousedown",this._handleBackdropMouseDown),this._elements.closeBtn.removeEventListener("click",this.hide)}};var Ms=class{constructor(t,i,n,s=!1){this._mapContainer=t;this._settings=i;this._offCanvasSettings=n;this.debug=s}_offcanvas;_container;_button;_helpTemplate=null;onAdd(t){this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._button=document.createElement("button"),this._button.type="button",this._button.setAttribute("aria-label",this._settings.label),this._button.addEventListener("click",this._clickHandler),this._button.className="mapboxgl-ctrl-share";let i=document.createElement("span");return i.className="mapboxgl-ctrl-icon",i.title=this._settings.label,i.setAttribute("aria-hidden","true"),i.append(et(this._settings.iconSvgId)),this._button.appendChild(i),this._container.appendChild(this._button),this._helpTemplate=document.querySelector("#help-content"),this._helpTemplate&&(this._offcanvas=new Vi(this._mapContainer,this._offCanvasSettings)),this.debug&&console.debug("HelpControl: Added help button with help content:",this._helpTemplate),this._container}onRemove(t){this._button.removeEventListener("click",this._clickHandler),this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._offcanvas?.destroy()}_clickHandler=()=>{if(!this._helpTemplate){console.error("HelpControl: Help content not found");return}this.debug&&console.debug("HelpControl: Help content found:",this._helpTemplate),this._helpTemplate&&this._offcanvas?.show(this._helpTemplate.content.cloneNode(!0))}};var Tf=Sn(Ff(),1);import si from"mapbox-gl";import Zc from"mapbox-gl";function Ls(e,t){return function(){return e.apply(t,arguments)}}var{toString:dv}=Object.prototype,{getPrototypeOf:su}=Object,{iterator:yr,toStringTag:Nf}=Symbol,vr=(e=>t=>{let i=dv.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),ue=e=>(e=e.toLowerCase(),t=>vr(t)===e),xr=e=>t=>typeof t===e,{isArray:Mn}=Array,Ts=xr("undefined");function As(e){return e!==null&&!Ts(e)&&e.constructor!==null&&!Ts(e.constructor)&&Bt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var Wf=ue("ArrayBuffer");function fv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Wf(e.buffer),t}var pv=xr("string"),Bt=xr("function"),Hf=xr("number"),ks=e=>e!==null&&typeof e=="object",mv=e=>e===!0||e===!1,br=e=>{if(vr(e)!=="object")return!1;let t=su(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Nf in e)&&!(yr in e)},gv=e=>{if(!ks(e)||As(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},bv=ue("Date"),yv=ue("File"),vv=ue("Blob"),xv=ue("FileList"),_v=e=>ks(e)&&Bt(e.pipe),wv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Bt(e.append)&&((t=vr(e))==="formdata"||t==="object"&&Bt(e.toString)&&e.toString()==="[object FormData]"))},Sv=ue("URLSearchParams"),[Ev,Mv,Cv,Lv]=["ReadableStream","Request","Response","Headers"].map(ue),Tv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ps(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Mn(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(As(e))return;let o=i?Object.getOwnPropertyNames(e):Object.keys(e),r=o.length,a;for(n=0;n<r;n++)a=o[n],t.call(null,e[a],a,e)}}function Uf(e,t){if(As(e))return null;t=t.toLowerCase();let i=Object.keys(e),n=i.length,s;for(;n-- >0;)if(s=i[n],t===s.toLowerCase())return s;return null}var Gi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zf=e=>!Ts(e)&&e!==Gi;function nu(){let{caseless:e}=zf(this)&&this||{},t={},i=(n,s)=>{let o=e&&Uf(t,s)||s;br(t[o])&&br(n)?t[o]=nu(t[o],n):br(n)?t[o]=nu({},n):Mn(n)?t[o]=n.slice():t[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Ps(arguments[n],i);return t}var Av=(e,t,i,{allOwnKeys:n}={})=>(Ps(t,(s,o)=>{i&&Bt(s)?e[o]=Ls(s,i):e[o]=s},{allOwnKeys:n}),e),kv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Pv=(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},Rv=(e,t,i,n)=>{let s,o,r,a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)r=s[o],(!n||n(r,e,t))&&!a[r]&&(t[r]=e[r],a[r]=!0);e=i!==!1&&su(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},Dv=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;let n=e.indexOf(t,i);return n!==-1&&n===i},Ov=e=>{if(!e)return null;if(Mn(e))return e;let t=e.length;if(!Hf(t))return null;let i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},Iv=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&su(Uint8Array)),Fv=(e,t)=>{let n=(e&&e[yr]).call(e),s;for(;(s=n.next())&&!s.done;){let o=s.value;t.call(e,o[0],o[1])}},Bv=(e,t)=>{let i,n=[];for(;(i=e.exec(t))!==null;)n.push(i);return n},Nv=ue("HTMLFormElement"),Wv=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,n,s){return n.toUpperCase()+s}),Bf=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),Hv=ue("RegExp"),jf=(e,t)=>{let i=Object.getOwnPropertyDescriptors(e),n={};Ps(i,(s,o)=>{let r;(r=t(s,o,e))!==!1&&(n[o]=r||s)}),Object.defineProperties(e,n)},Uv=e=>{jf(e,(t,i)=>{if(Bt(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;let n=e[i];if(Bt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},zv=(e,t)=>{let i={},n=s=>{s.forEach(o=>{i[o]=!0})};return Mn(e)?n(e):n(String(e).split(t)),i},jv=()=>{},Vv=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Gv(e){return!!(e&&Bt(e.append)&&e[Nf]==="FormData"&&e[yr])}var Yv=e=>{let t=new Array(10),i=(n,s)=>{if(ks(n)){if(t.indexOf(n)>=0)return;if(As(n))return n;if(!("toJSON"in n)){t[s]=n;let o=Mn(n)?[]:{};return Ps(n,(r,a)=>{let l=i(r,s+1);!Ts(l)&&(o[a]=l)}),t[s]=void 0,o}}return n};return i(e,0)},qv=ue("AsyncFunction"),Xv=e=>e&&(ks(e)||Bt(e))&&Bt(e.then)&&Bt(e.catch),Vf=((e,t)=>e?setImmediate:t?((i,n)=>(Gi.addEventListener("message",({source:s,data:o})=>{s===Gi&&o===i&&n.length&&n.shift()()},!1),s=>{n.push(s),Gi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",Bt(Gi.postMessage)),$v=typeof queueMicrotask<"u"?queueMicrotask.bind(Gi):typeof process<"u"&&process.nextTick||Vf,Kv=e=>e!=null&&Bt(e[yr]),C={isArray:Mn,isArrayBuffer:Wf,isBuffer:As,isFormData:wv,isArrayBufferView:fv,isString:pv,isNumber:Hf,isBoolean:mv,isObject:ks,isPlainObject:br,isEmptyObject:gv,isReadableStream:Ev,isRequest:Mv,isResponse:Cv,isHeaders:Lv,isUndefined:Ts,isDate:bv,isFile:yv,isBlob:vv,isRegExp:Hv,isFunction:Bt,isStream:_v,isURLSearchParams:Sv,isTypedArray:Iv,isFileList:xv,forEach:Ps,merge:nu,extend:Av,trim:Tv,stripBOM:kv,inherits:Pv,toFlatObject:Rv,kindOf:vr,kindOfTest:ue,endsWith:Dv,toArray:Ov,forEachEntry:Fv,matchAll:Bv,isHTMLForm:Nv,hasOwnProperty:Bf,hasOwnProp:Bf,reduceDescriptors:jf,freezeMethods:Uv,toObjectSet:zv,toCamelCase:Wv,noop:jv,toFiniteNumber:Vv,findKey:Uf,global:Gi,isContextDefined:zf,isSpecCompliantForm:Gv,toJSONObject:Yv,isAsyncFn:qv,isThenable:Xv,setImmediate:Vf,asap:$v,isIterable:Kv};function Cn(e,t,i,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}C.inherits(Cn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.status}}});var Gf=Cn.prototype,Yf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Yf[e]={value:e}});Object.defineProperties(Cn,Yf);Object.defineProperty(Gf,"isAxiosError",{value:!0});Cn.from=(e,t,i,n,s,o)=>{let r=Object.create(Gf);return C.toFlatObject(e,r,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Cn.call(r,e.message,t,i,n,s),r.cause=e,r.name=e.name,o&&Object.assign(r,o),r};var N=Cn;var _r=null;function ou(e){return C.isPlainObject(e)||C.isArray(e)}function Xf(e){return C.endsWith(e,"[]")?e.slice(0,-2):e}function qf(e,t,i){return e?e.concat(t).map(function(s,o){return s=Xf(s),!i&&o?"["+s+"]":s}).join(i?".":""):t}function Zv(e){return C.isArray(e)&&!e.some(ou)}var Jv=C.toFlatObject(C,{},null,function(t){return/^is[A-Z]/.test(t)});function Qv(e,t,i){if(!C.isObject(e))throw new TypeError("target must be an object");t=t||new(_r||FormData),i=C.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!C.isUndefined(b[g])});let n=i.metaTokens,s=i.visitor||u,o=i.dots,r=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(t);if(!C.isFunction(s))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(C.isDate(m))return m.toISOString();if(C.isBoolean(m))return m.toString();if(!l&&C.isBlob(m))throw new N("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(m)||C.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,g,b){let y=m;if(m&&!b&&typeof m=="object"){if(C.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(C.isArray(m)&&Zv(m)||(C.isFileList(m)||C.endsWith(g,"[]"))&&(y=C.toArray(m)))return g=Xf(g),y.forEach(function(M,w){!(C.isUndefined(M)||M===null)&&t.append(r===!0?qf([g],w,o):r===null?g:g+"[]",c(M))}),!1}return ou(m)?!0:(t.append(qf(b,g,o),c(m)),!1)}let h=[],f=Object.assign(Jv,{defaultVisitor:u,convertValue:c,isVisitable:ou});function p(m,g){if(!C.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(m),C.forEach(m,function(y,v){(!(C.isUndefined(y)||y===null)&&s.call(t,y,C.isString(v)?v.trim():v,g,f))===!0&&p(y,g?g.concat(v):[v])}),h.pop()}}if(!C.isObject(e))throw new TypeError("data must be an object");return p(e),t}var li=Qv;function $f(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Kf(e,t){this._pairs=[],e&&li(e,this,t)}var Zf=Kf.prototype;Zf.append=function(t,i){this._pairs.push([t,i])};Zf.toString=function(t){let i=t?function(n){return t.call(this,n,$f)}:$f;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};var wr=Kf;function tx(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Rs(e,t,i){if(!t)return e;let n=i&&i.encode||tx;C.isFunction(i)&&(i={serialize:i});let s=i&&i.serialize,o;if(s?o=s(t,i):o=C.isURLSearchParams(t)?t.toString():new wr(t,i).toString(n),o){let r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}var ru=class{constructor(){this.handlers=[]}use(t,i,n){return this.handlers.push({fulfilled:t,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){C.forEach(this.handlers,function(n){n!==null&&t(n)})}},au=ru;var Sr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var Jf=typeof URLSearchParams<"u"?URLSearchParams:wr;var Qf=typeof FormData<"u"?FormData:null;var tp=typeof Blob<"u"?Blob:null;var ep={isBrowser:!0,classes:{URLSearchParams:Jf,FormData:Qf,Blob:tp},protocols:["http","https","file","blob","url","data"]};var uu={};qy(uu,{hasBrowserEnv:()=>cu,hasStandardBrowserEnv:()=>ex,hasStandardBrowserWebWorkerEnv:()=>ix,navigator:()=>lu,origin:()=>nx});var cu=typeof window<"u"&&typeof document<"u",lu=typeof navigator=="object"&&navigator||void 0,ex=cu&&(!lu||["ReactNative","NativeScript","NS"].indexOf(lu.product)<0),ix=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",nx=cu&&window.location.href||"http://localhost";var ct={...uu,...ep};function hu(e,t){return li(e,new ct.classes.URLSearchParams,{visitor:function(i,n,s,o){return ct.isNode&&C.isBuffer(i)?(this.append(n,i.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function sx(e){return C.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ox(e){let t={},i=Object.keys(e),n,s=i.length,o;for(n=0;n<s;n++)o=i[n],t[o]=e[o];return t}function rx(e){function t(i,n,s,o){let r=i[o++];if(r==="__proto__")return!0;let a=Number.isFinite(+r),l=o>=i.length;return r=!r&&C.isArray(s)?s.length:r,l?(C.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!a):((!s[r]||!C.isObject(s[r]))&&(s[r]=[]),t(i,n,s[r],o)&&C.isArray(s[r])&&(s[r]=ox(s[r])),!a)}if(C.isFormData(e)&&C.isFunction(e.entries)){let i={};return C.forEachEntry(e,(n,s)=>{t(sx(n),s,i,0)}),i}return null}var Er=rx;function ax(e,t,i){if(C.isString(e))try{return(t||JSON.parse)(e),C.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(e)}var du={transitional:Sr,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){let n=i.getContentType()||"",s=n.indexOf("application/json")>-1,o=C.isObject(t);if(o&&C.isHTMLForm(t)&&(t=new FormData(t)),C.isFormData(t))return s?JSON.stringify(Er(t)):t;if(C.isArrayBuffer(t)||C.isBuffer(t)||C.isStream(t)||C.isFile(t)||C.isBlob(t)||C.isReadableStream(t))return t;if(C.isArrayBufferView(t))return t.buffer;if(C.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return hu(t,this.formSerializer).toString();if((a=C.isFileList(t))||n.indexOf("multipart/form-data")>-1){let l=this.env&&this.env.FormData;return li(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||s?(i.setContentType("application/json",!1),ax(t)):t}],transformResponse:[function(t){let i=this.transitional||du.transitional,n=i&&i.forcedJSONParsing,s=this.responseType==="json";if(C.isResponse(t)||C.isReadableStream(t))return t;if(t&&C.isString(t)&&(n&&!this.responseType||s)){let r=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(r)throw a.name==="SyntaxError"?N.from(a,N.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ct.classes.FormData,Blob:ct.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};C.forEach(["delete","get","head","post","put","patch"],e=>{du.headers[e]={}});var Ln=du;var lx=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ip=e=>{let t={},i,n,s;return e&&e.split(`
`).forEach(function(r){s=r.indexOf(":"),i=r.substring(0,s).trim().toLowerCase(),n=r.substring(s+1).trim(),!(!i||t[i]&&lx[i])&&(i==="set-cookie"?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)}),t};var np=Symbol("internals");function Ds(e){return e&&String(e).trim().toLowerCase()}function Mr(e){return e===!1||e==null?e:C.isArray(e)?e.map(Mr):String(e)}function cx(e){let t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}var ux=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function fu(e,t,i,n,s){if(C.isFunction(n))return n.call(this,t,i);if(s&&(t=i),!!C.isString(t)){if(C.isString(n))return t.indexOf(n)!==-1;if(C.isRegExp(n))return n.test(t)}}function hx(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,n)=>i.toUpperCase()+n)}function dx(e,t){let i=C.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+i,{value:function(s,o,r){return this[n].call(this,t,s,o,r)},configurable:!0})})}var Tn=class{constructor(t){t&&this.set(t)}set(t,i,n){let s=this;function o(a,l,c){let u=Ds(l);if(!u)throw new Error("header name must be a non-empty string");let h=C.findKey(s,u);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=Mr(a))}let r=(a,l)=>C.forEach(a,(c,u)=>o(c,u,l));if(C.isPlainObject(t)||t instanceof this.constructor)r(t,i);else if(C.isString(t)&&(t=t.trim())&&!ux(t))r(ip(t),i);else if(C.isObject(t)&&C.isIterable(t)){let a={},l,c;for(let u of t){if(!C.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?C.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}r(a,i)}else t!=null&&o(i,t,n);return this}get(t,i){if(t=Ds(t),t){let n=C.findKey(this,t);if(n){let s=this[n];if(!i)return s;if(i===!0)return cx(s);if(C.isFunction(i))return i.call(this,s,n);if(C.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=Ds(t),t){let n=C.findKey(this,t);return!!(n&&this[n]!==void 0&&(!i||fu(this,this[n],n,i)))}return!1}delete(t,i){let n=this,s=!1;function o(r){if(r=Ds(r),r){let a=C.findKey(n,r);a&&(!i||fu(n,n[a],a,i))&&(delete n[a],s=!0)}}return C.isArray(t)?t.forEach(o):o(t),s}clear(t){let i=Object.keys(this),n=i.length,s=!1;for(;n--;){let o=i[n];(!t||fu(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){let i=this,n={};return C.forEach(this,(s,o)=>{let r=C.findKey(n,o);if(r){i[r]=Mr(s),delete i[o];return}let a=t?hx(o):String(o).trim();a!==o&&delete i[o],i[a]=Mr(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let i=Object.create(null);return C.forEach(this,(n,s)=>{n!=null&&n!==!1&&(i[s]=t&&C.isArray(n)?n.join(", "):n)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){let n=new this(t);return i.forEach(s=>n.set(s)),n}static accessor(t){let n=(this[np]=this[np]={accessors:{}}).accessors,s=this.prototype;function o(r){let a=Ds(r);n[a]||(dx(s,r),n[a]=!0)}return C.isArray(t)?t.forEach(o):o(t),this}};Tn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.reduceDescriptors(Tn.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[i]=n}}});C.freezeMethods(Tn);var yt=Tn;function Os(e,t){let i=this||Ln,n=t||i,s=yt.from(n.headers),o=n.data;return C.forEach(e,function(a){o=a.call(i,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Is(e){return!!(e&&e.__CANCEL__)}function sp(e,t,i){N.call(this,e??"canceled",N.ERR_CANCELED,t,i),this.name="CanceledError"}C.inherits(sp,N,{__CANCEL__:!0});var ve=sp;function Fs(e,t,i){let n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):t(new N("Request failed with status code "+i.status,[N.ERR_BAD_REQUEST,N.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function pu(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function fx(e,t){e=e||10;let i=new Array(e),n=new Array(e),s=0,o=0,r;return t=t!==void 0?t:1e3,function(l){let c=Date.now(),u=n[o];r||(r=c),i[s]=l,n[s]=c;let h=o,f=0;for(;h!==s;)f+=i[h++],h=h%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-r<t)return;let p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}var op=fx;function px(e,t){let i=0,n=1e3/t,s,o,r=(c,u=Date.now())=>{i=u,s=null,o&&(clearTimeout(o),o=null),e(...c)};return[(...c)=>{let u=Date.now(),h=u-i;h>=n?r(c,u):(s=c,o||(o=setTimeout(()=>{o=null,r(s)},n-h)))},()=>s&&r(s)]}var rp=px;var An=(e,t,i=3)=>{let n=0,s=op(50,250);return rp(o=>{let r=o.loaded,a=o.lengthComputable?o.total:void 0,l=r-n,c=s(l),u=r<=a;n=r;let h={loaded:r,total:a,progress:a?r/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-r)/c:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(h)},i)},mu=(e,t)=>{let i=e!=null;return[n=>t[0]({lengthComputable:i,total:e,loaded:n}),t[1]]},gu=e=>(...t)=>C.asap(()=>e(...t));var ap=ct.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,ct.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(ct.origin),ct.navigator&&/(msie|trident)/i.test(ct.navigator.userAgent)):()=>!0;var lp=ct.hasStandardBrowserEnv?{write(e,t,i,n,s,o){let r=[e+"="+encodeURIComponent(t)];C.isNumber(i)&&r.push("expires="+new Date(i).toGMTString()),C.isString(n)&&r.push("path="+n),C.isString(s)&&r.push("domain="+s),o===!0&&r.push("secure"),document.cookie=r.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bu(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function yu(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Bs(e,t,i){let n=!bu(t);return e&&(n||i==!1)?yu(e,t):t}var cp=e=>e instanceof yt?{...e}:e;function he(e,t){t=t||{};let i={};function n(c,u,h,f){return C.isPlainObject(c)&&C.isPlainObject(u)?C.merge.call({caseless:f},c,u):C.isPlainObject(u)?C.merge({},u):C.isArray(u)?u.slice():u}function s(c,u,h,f){if(C.isUndefined(u)){if(!C.isUndefined(c))return n(void 0,c,h,f)}else return n(c,u,h,f)}function o(c,u){if(!C.isUndefined(u))return n(void 0,u)}function r(c,u){if(C.isUndefined(u)){if(!C.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,h){if(h in t)return n(c,u);if(h in e)return n(void 0,c)}let l={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(c,u,h)=>s(cp(c),cp(u),h,!0)};return C.forEach(Object.keys({...e,...t}),function(u){let h=l[u]||s,f=h(e[u],t[u],u);C.isUndefined(f)&&h!==a||(i[u]=f)}),i}var Cr=e=>{let t=he({},e),{data:i,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:r,auth:a}=t;t.headers=r=yt.from(r),t.url=Rs(Bs(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&r.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(C.isFormData(i)){if(ct.hasStandardBrowserEnv||ct.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((l=r.getContentType())!==!1){let[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];r.setContentType([c||"multipart/form-data",...u].join("; "))}}if(ct.hasStandardBrowserEnv&&(n&&C.isFunction(n)&&(n=n(t)),n||n!==!1&&ap(t.url))){let c=s&&o&&lp.read(o);c&&r.set(s,c)}return t};var mx=typeof XMLHttpRequest<"u",up=mx&&function(e){return new Promise(function(i,n){let s=Cr(e),o=s.data,r=yt.from(s.headers).normalize(),{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,h,f,p,m;function g(){p&&p(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function y(){if(!b)return;let M=yt.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),x={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:M,config:e,request:b};Fs(function(_){i(_),g()},function(_){n(_),g()},x),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(n(new N("Request aborted",N.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new N("Network Error",N.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let w=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded",x=s.transitional||Sr;s.timeoutErrorMessage&&(w=s.timeoutErrorMessage),n(new N(w,x.clarifyTimeoutError?N.ETIMEDOUT:N.ECONNABORTED,e,b)),b=null},o===void 0&&r.setContentType(null),"setRequestHeader"in b&&C.forEach(r.toJSON(),function(w,x){b.setRequestHeader(x,w)}),C.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),a&&a!=="json"&&(b.responseType=s.responseType),c&&([f,m]=An(c,!0),b.addEventListener("progress",f)),l&&b.upload&&([h,p]=An(l),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=M=>{b&&(n(!M||M.type?new ve(null,e,b):M),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));let v=pu(s.url);if(v&&ct.protocols.indexOf(v)===-1){n(new N("Unsupported protocol "+v+":",N.ERR_BAD_REQUEST,e));return}b.send(o||null)})};var gx=(e,t)=>{let{length:i}=e=e?e.filter(Boolean):[];if(t||i){let n=new AbortController,s,o=function(c){if(!s){s=!0,a();let u=c instanceof Error?c:this.reason;n.abort(u instanceof N?u:new ve(u instanceof Error?u.message:u))}},r=t&&setTimeout(()=>{r=null,o(new N(`timeout ${t} of ms exceeded`,N.ETIMEDOUT))},t),a=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),e=null)};e.forEach(c=>c.addEventListener("abort",o));let{signal:l}=n;return l.unsubscribe=()=>C.asap(a),l}},hp=gx;var bx=function*(e,t){let i=e.byteLength;if(!t||i<t){yield e;return}let n=0,s;for(;n<i;)s=n+t,yield e.slice(n,s),n=s},yx=async function*(e,t){for await(let i of vx(e))yield*bx(i,t)},vx=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}let t=e.getReader();try{for(;;){let{done:i,value:n}=await t.read();if(i)break;yield n}}finally{await t.cancel()}},vu=(e,t,i,n)=>{let s=yx(e,t),o=0,r,a=l=>{r||(r=!0,n&&n(l))};return new ReadableStream({async pull(l){try{let{done:c,value:u}=await s.next();if(c){a(),l.close();return}let h=u.byteLength;if(i){let f=o+=h;i(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})};var Tr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fp=Tr&&typeof ReadableStream=="function",xx=Tr&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),pp=(e,...t)=>{try{return!!e(...t)}catch{return!1}},_x=fp&&pp(()=>{let e=!1,t=new Request(ct.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),dp=64*1024,xu=fp&&pp(()=>C.isReadableStream(new Response("").body)),Lr={stream:xu&&(e=>e.body)};Tr&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Lr[t]&&(Lr[t]=C.isFunction(e[t])?i=>i[t]():(i,n)=>{throw new N(`Response type '${t}' is not supported`,N.ERR_NOT_SUPPORT,n)})})})(new Response);var wx=async e=>{if(e==null)return 0;if(C.isBlob(e))return e.size;if(C.isSpecCompliantForm(e))return(await new Request(ct.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(C.isArrayBufferView(e)||C.isArrayBuffer(e))return e.byteLength;if(C.isURLSearchParams(e)&&(e=e+""),C.isString(e))return(await xx(e)).byteLength},Sx=async(e,t)=>{let i=C.toFiniteNumber(e.getContentLength());return i??wx(t)},mp=Tr&&(async e=>{let{url:t,method:i,data:n,signal:s,cancelToken:o,timeout:r,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:f}=Cr(e);c=c?(c+"").toLowerCase():"text";let p=hp([s,o&&o.toAbortSignal()],r),m,g=p&&p.unsubscribe&&(()=>{p.unsubscribe()}),b;try{if(l&&_x&&i!=="get"&&i!=="head"&&(b=await Sx(u,n))!==0){let x=new Request(t,{method:"POST",body:n,duplex:"half"}),E;if(C.isFormData(n)&&(E=x.headers.get("content-type"))&&u.setContentType(E),x.body){let[_,L]=mu(b,An(gu(l)));n=vu(x.body,dp,_,L)}}C.isString(h)||(h=h?"include":"omit");let y="credentials"in Request.prototype;m=new Request(t,{...f,signal:p,method:i.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:y?h:void 0});let v=await fetch(m,f),M=xu&&(c==="stream"||c==="response");if(xu&&(a||M&&g)){let x={};["status","statusText","headers"].forEach(T=>{x[T]=v[T]});let E=C.toFiniteNumber(v.headers.get("content-length")),[_,L]=a&&mu(E,An(gu(a),!0))||[];v=new Response(vu(v.body,dp,_,()=>{L&&L(),g&&g()}),x)}c=c||"text";let w=await Lr[C.findKey(Lr,c)||"text"](v,e);return!M&&g&&g(),await new Promise((x,E)=>{Fs(x,E,{data:w,headers:yt.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:m})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new N("Network Error",N.ERR_NETWORK,e,m),{cause:y.cause||y}):N.from(y,y&&y.code,e,m)}});var _u={http:_r,xhr:up,fetch:mp};C.forEach(_u,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var gp=e=>`- ${e}`,Ex=e=>C.isFunction(e)||e===null||e===!1,Ar={getAdapter:e=>{e=C.isArray(e)?e:[e];let{length:t}=e,i,n,s={};for(let o=0;o<t;o++){i=e[o];let r;if(n=i,!Ex(i)&&(n=_u[(r=String(i)).toLowerCase()],n===void 0))throw new N(`Unknown adapter '${r}'`);if(n)break;s[r||"#"+o]=n}if(!n){let o=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build")),r=t?o.length>1?`since :
`+o.map(gp).join(`
`):" "+gp(o[0]):"as no adapter specified";throw new N("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n},adapters:_u};function wu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ve(null,e)}function kr(e){return wu(e),e.headers=yt.from(e.headers),e.data=Os.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ar.getAdapter(e.adapter||Ln.adapter)(e).then(function(n){return wu(e),n.data=Os.call(e,e.transformResponse,n),n.headers=yt.from(n.headers),n},function(n){return Is(n)||(wu(e),n&&n.response&&(n.response.data=Os.call(e,e.transformResponse,n.response),n.response.headers=yt.from(n.response.headers))),Promise.reject(n)})}var Pr="1.11.0";var Rr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Rr[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var bp={};Rr.transitional=function(t,i,n){function s(o,r){return"[Axios v"+Pr+"] Transitional option '"+o+"'"+r+(n?". "+n:"")}return(o,r,a)=>{if(t===!1)throw new N(s(r," has been removed"+(i?" in "+i:"")),N.ERR_DEPRECATED);return i&&!bp[r]&&(bp[r]=!0,console.warn(s(r," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(o,r,a):!0}};Rr.spelling=function(t){return(i,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Mx(e,t,i){if(typeof e!="object")throw new N("options must be an object",N.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),s=n.length;for(;s-- >0;){let o=n[s],r=t[o];if(r){let a=e[o],l=a===void 0||r(a,o,e);if(l!==!0)throw new N("option "+o+" must be "+l,N.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new N("Unknown option "+o,N.ERR_BAD_OPTION)}}var Ns={assertOptions:Mx,validators:Rr};var xe=Ns.validators,kn=class{constructor(t){this.defaults=t||{},this.interceptors={request:new au,response:new au}}async request(t,i){try{return await this._request(t,i)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;let o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=he(this.defaults,i);let{transitional:n,paramsSerializer:s,headers:o}=i;n!==void 0&&Ns.assertOptions(n,{silentJSONParsing:xe.transitional(xe.boolean),forcedJSONParsing:xe.transitional(xe.boolean),clarifyTimeoutError:xe.transitional(xe.boolean)},!1),s!=null&&(C.isFunction(s)?i.paramsSerializer={serialize:s}:Ns.assertOptions(s,{encode:xe.function,serialize:xe.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Ns.assertOptions(i,{baseUrl:xe.spelling("baseURL"),withXsrfToken:xe.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let r=o&&C.merge(o.common,o[i.method]);o&&C.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),i.headers=yt.concat(r,o);let a=[],l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(i)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});let c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,h=0,f;if(!l){let m=[kr.bind(this),void 0];for(m.unshift(...a),m.push(...c),f=m.length,u=Promise.resolve(i);h<f;)u=u.then(m[h++],m[h++]);return u}f=a.length;let p=i;for(h=0;h<f;){let m=a[h++],g=a[h++];try{p=m(p)}catch(b){g.call(this,b);break}}try{u=kr.call(this,p)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(t){t=he(this.defaults,t);let i=Bs(t.baseURL,t.url,t.allowAbsoluteUrls);return Rs(i,t.params,t.paramsSerializer)}};C.forEach(["delete","get","head","options"],function(t){kn.prototype[t]=function(i,n){return this.request(he(n||{},{method:t,url:i,data:(n||{}).data}))}});C.forEach(["post","put","patch"],function(t){function i(n){return function(o,r,a){return this.request(he(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}kn.prototype[t]=i(),kn.prototype[t+"Form"]=i(!0)});var Ws=kn;var Su=class e{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(o){i=o});let n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o,r=new Promise(a=>{n.subscribe(a),o=a}).then(s);return r.cancel=function(){n.unsubscribe(o)},r},t(function(o,r,a){n.reason||(n.reason=new ve(o,r,a),i(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){let t=new AbortController,i=n=>{t.abort(n)};return this.subscribe(i),t.signal.unsubscribe=()=>this.unsubscribe(i),t.signal}static source(){let t;return{token:new e(function(s){t=s}),cancel:t}}},yp=Su;function Eu(e){return function(i){return e.apply(null,i)}}function Mu(e){return C.isObject(e)&&e.isAxiosError===!0}var Cu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cu).forEach(([e,t])=>{Cu[t]=e});var vp=Cu;function xp(e){let t=new Ws(e),i=Ls(Ws.prototype.request,t);return C.extend(i,Ws.prototype,t,{allOwnKeys:!0}),C.extend(i,t,null,{allOwnKeys:!0}),i.create=function(s){return xp(he(e,s))},i}var pt=xp(Ln);pt.Axios=Ws;pt.CanceledError=ve;pt.CancelToken=yp;pt.isCancel=Is;pt.VERSION=Pr;pt.toFormData=li;pt.AxiosError=N;pt.Cancel=pt.CanceledError;pt.all=function(t){return Promise.all(t)};pt.spread=Eu;pt.isAxiosError=Mu;pt.mergeConfig=he;pt.AxiosHeaders=yt;pt.formToJSON=e=>Er(C.isHTMLForm(e)?new FormData(e):e);pt.getAdapter=Ar.getAdapter;pt.HttpStatusCode=vp;pt.default=pt;var ci=pt;var{Axios:Sk,AxiosError:Ek,CanceledError:Mk,isCancel:Ck,CancelToken:Lk,VERSION:Tk,all:Ak,Cancel:kk,isAxiosError:Pk,spread:Rk,toFormData:Dk,AxiosHeaders:Ok,HttpStatusCode:Ik,formToJSON:Fk,getAdapter:Bk,mergeConfig:Nk}=ci;import bd from"mapbox-gl";function _p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,n)}return i}function we(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?_p(Object(i),!0).forEach(function(n){Cx(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_p(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function Br(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Br=function(t){return typeof t}:Br=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Br(e)}function Cx(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function We(){return We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},We.apply(this,arguments)}function Lx(e,t){if(e==null)return{};var i={},n=Object.keys(e),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(i[s]=e[s]);return i}function Tx(e,t){if(e==null)return{};var i=Lx(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Ax="1.15.6";function Ne(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var He=Ne(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Xs=Ne(/Edge/i),wp=Ne(/firefox/i),js=Ne(/safari/i)&&!Ne(/chrome/i)&&!Ne(/android/i),Hu=Ne(/iP(ad|od|hone)/i),kp=Ne(/chrome/i)&&Ne(/android/i),Pp={capture:!1,passive:!1};function V(e,t,i){e.addEventListener(t,i,!He&&Pp)}function z(e,t,i){e.removeEventListener(t,i,!He&&Pp)}function zr(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Rp(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function fe(e,t,i,n){if(e){i=i||document;do{if(t!=null&&(t[0]===">"?e.parentNode===i&&zr(e,t):zr(e,t))||n&&e===i)return e;if(e===i)break}while(e=Rp(e))}return null}var Sp=/\s+/g;function $t(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(Sp," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(Sp," ")}}function F(e,t,i){var n=e&&e.style;if(n){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),t===void 0?i:i[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=i+(typeof i=="string"?"":"px")}}function In(e,t){var i="";if(typeof e=="string")i=e;else do{var n=F(e,"transform");n&&n!=="none"&&(i=n+" "+i)}while(!t&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function Dp(e,t,i){if(e){var n=e.getElementsByTagName(t),s=0,o=n.length;if(i)for(;s<o;s++)i(n[s],s);return n}return[]}function _e(){var e=document.scrollingElement;return e||document.documentElement}function gt(e,t,i,n,s){if(!(!e.getBoundingClientRect&&e!==window)){var o,r,a,l,c,u,h;if(e!==window&&e.parentNode&&e!==_e()?(o=e.getBoundingClientRect(),r=o.top,a=o.left,l=o.bottom,c=o.right,u=o.height,h=o.width):(r=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(t||i)&&e!==window&&(s=s||e.parentNode,!He))do if(s&&s.getBoundingClientRect&&(F(s,"transform")!=="none"||i&&F(s,"position")!=="static")){var f=s.getBoundingClientRect();r-=f.top+parseInt(F(s,"border-top-width")),a-=f.left+parseInt(F(s,"border-left-width")),l=r+o.height,c=a+o.width;break}while(s=s.parentNode);if(n&&e!==window){var p=In(s||e),m=p&&p.a,g=p&&p.d;p&&(r/=g,a/=m,h/=m,u/=g,l=r+u,c=a+h)}return{top:r,left:a,bottom:l,right:c,width:h,height:u}}}function Ep(e,t,i){for(var n=di(e,!0),s=gt(e)[t];n;){var o=gt(n)[i],r=void 0;if(i==="top"||i==="left"?r=s>=o:r=s<=o,!r)return n;if(n===_e())break;n=di(n,!1)}return!1}function Fn(e,t,i,n){for(var s=0,o=0,r=e.children;o<r.length;){if(r[o].style.display!=="none"&&r[o]!==B.ghost&&(n||r[o]!==B.dragged)&&fe(r[o],i.draggable,e,!1)){if(s===t)return r[o];s++}o++}return null}function Uu(e,t){for(var i=e.lastElementChild;i&&(i===B.ghost||F(i,"display")==="none"||t&&!zr(i,t));)i=i.previousElementSibling;return i||null}function ee(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==B.clone&&(!t||zr(e,t))&&i++;return i}function Mp(e){var t=0,i=0,n=_e();if(e)do{var s=In(e),o=s.a,r=s.d;t+=e.scrollLeft*o,i+=e.scrollTop*r}while(e!==n&&(e=e.parentNode));return[t,i]}function kx(e,t){for(var i in e)if(e.hasOwnProperty(i)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[i][n])return Number(i)}return-1}function di(e,t){if(!e||!e.getBoundingClientRect)return _e();var i=e,n=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=F(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return _e();if(n||t)return i;n=!0}}while(i=i.parentNode);return _e()}function Px(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function Lu(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Vs;function Op(e,t){return function(){if(!Vs){var i=arguments,n=this;i.length===1?e.call(n,i[0]):e.apply(n,i),Vs=setTimeout(function(){Vs=void 0},t)}}}function Rx(){clearTimeout(Vs),Vs=void 0}function Ip(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function Fp(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function Bp(e,t,i){var n={};return Array.from(e.children).forEach(function(s){var o,r,a,l;if(!(!fe(s,t.draggable,e,!1)||s.animated||s===i)){var c=gt(s);n.left=Math.min((o=n.left)!==null&&o!==void 0?o:1/0,c.left),n.top=Math.min((r=n.top)!==null&&r!==void 0?r:1/0,c.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,c.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var Wt="Sortable"+new Date().getTime();function Dx(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(F(s,"display")==="none"||s===B.ghost)){e.push({target:s,rect:gt(s)});var o=we({},e[e.length-1].rect);if(s.thisAnimationDuration){var r=In(s,!0);r&&(o.top-=r.f,o.left-=r.e)}s.fromRect=o}})}},addAnimationState:function(n){e.push(n)},removeAnimationState:function(n){e.splice(kx(e,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var o=!1,r=0;e.forEach(function(a){var l=0,c=a.target,u=c.fromRect,h=gt(c),f=c.prevFromRect,p=c.prevToRect,m=a.rect,g=In(c,!0);g&&(h.top-=g.f,h.left-=g.e),c.toRect=h,c.thisAnimationDuration&&Lu(f,h)&&!Lu(u,h)&&(m.top-h.top)/(m.left-h.left)===(u.top-h.top)/(u.left-h.left)&&(l=Ix(m,f,p,s.options)),Lu(h,u)||(c.prevFromRect=u,c.prevToRect=h,l||(l=s.options.animation),s.animate(c,m,h,l)),l&&(o=!0,r=Math.max(r,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof n=="function"&&n()},r):typeof n=="function"&&n(),e=[]},animate:function(n,s,o,r){if(r){F(n,"transition",""),F(n,"transform","");var a=In(this.el),l=a&&a.a,c=a&&a.d,u=(s.left-o.left)/(l||1),h=(s.top-o.top)/(c||1);n.animatingX=!!u,n.animatingY=!!h,F(n,"transform","translate3d("+u+"px,"+h+"px,0)"),this.forRepaintDummy=Ox(n),F(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),F(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){F(n,"transition",""),F(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},r)}}}}function Ox(e){return e.offsetWidth}function Ix(e,t,i,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*n.animation}var Pn=[],Tu={initializeByDefault:!0},$s={mount:function(t){for(var i in Tu)Tu.hasOwnProperty(i)&&!(i in t)&&(t[i]=Tu[i]);Pn.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Pn.push(t)},pluginEvent:function(t,i,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var o=t+"Global";Pn.forEach(function(r){i[r.pluginName]&&(i[r.pluginName][o]&&i[r.pluginName][o](we({sortable:i},n)),i.options[r.pluginName]&&i[r.pluginName][t]&&i[r.pluginName][t](we({sortable:i},n)))})},initializePlugins:function(t,i,n,s){Pn.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var c=new a(t,i,t.options);c.sortable=t,c.options=t.options,t[l]=c,We(n,c.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var r=this.modifyOption(t,o,t.options[o]);typeof r<"u"&&(t.options[o]=r)}},getEventProperties:function(t,i){var n={};return Pn.forEach(function(s){typeof s.eventProperties=="function"&&We(n,s.eventProperties.call(i[s.pluginName],t))}),n},modifyOption:function(t,i,n){var s;return Pn.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[i]=="function"&&(s=o.optionListeners[i].call(t[o.pluginName],n))}),s}};function Fx(e){var t=e.sortable,i=e.rootEl,n=e.name,s=e.targetEl,o=e.cloneEl,r=e.toEl,a=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,h=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t=t||i&&i[Wt],!!t){var g,b=t.options,y="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!He&&!Xs?g=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(n,!0,!0)),g.to=r||i,g.from=a||i,g.item=s||i,g.clone=o,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=h,g.originalEvent=f,g.pullMode=p?p.lastPutMode:void 0;var v=we(we({},m),$s.getEventProperties(n,t));for(var M in v)g[M]=v[M];i&&i.dispatchEvent(g),b[y]&&b[y].call(t,g)}}var Bx=["evt"],Nt=function(t,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,o=Tx(n,Bx);$s.pluginEvent.bind(B)(t,i,we({dragEl:P,parentEl:dt,ghostEl:W,rootEl:rt,nextEl:Xi,lastDownEl:Nr,cloneEl:ut,cloneHidden:hi,dragStarted:Hs,putSortable:_t,activeSortable:B.active,originalEvent:s,oldIndex:On,oldDraggableIndex:Gs,newIndex:Kt,newDraggableIndex:ui,hideGhostForTarget:Up,unhideGhostForTarget:zp,cloneNowHidden:function(){hi=!0},cloneNowShown:function(){hi=!1},dispatchSortableEvent:function(a){Lt({sortable:i,name:a,originalEvent:s})}},o))};function Lt(e){Fx(we({putSortable:_t,cloneEl:ut,targetEl:P,rootEl:rt,oldIndex:On,oldDraggableIndex:Gs,newIndex:Kt,newDraggableIndex:ui},e))}var P,dt,W,rt,Xi,Nr,ut,hi,On,Kt,Gs,ui,Dr,_t,Dn=!1,jr=!1,Vr=[],Yi,de,Au,ku,Cp,Lp,Hs,Rn,Ys,qs=!1,Or=!1,Wr,Et,Pu=[],Fu=!1,Gr=[],qr=typeof document<"u",Ir=Hu,Tp=Xs||He?"cssFloat":"float",Nx=qr&&!kp&&!Hu&&"draggable"in document.createElement("div"),Np=function(){if(qr){if(He)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Wp=function(t,i){var n=F(t),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Fn(t,0,i),r=Fn(t,1,i),a=o&&F(o),l=r&&F(r),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+gt(o).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+gt(r).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return r&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=s&&n[Tp]==="none"||r&&n[Tp]==="none"&&c+u>s)?"vertical":"horizontal"},Wx=function(t,i,n){var s=n?t.left:t.top,o=n?t.right:t.bottom,r=n?t.width:t.height,a=n?i.left:i.top,l=n?i.right:i.bottom,c=n?i.width:i.height;return s===a||o===l||s+r/2===a+c/2},Hx=function(t,i){var n;return Vr.some(function(s){var o=s[Wt].options.emptyInsertThreshold;if(!(!o||Uu(s))){var r=gt(s),a=t>=r.left-o&&t<=r.right+o,l=i>=r.top-o&&i<=r.bottom+o;if(a&&l)return n=s}}),n},Hp=function(t){function i(o,r){return function(a,l,c,u){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(r||h))return!0;if(o==null||o===!1)return!1;if(r&&o==="clone")return o;if(typeof o=="function")return i(o(a,l,c,u),r)(a,l,c,u);var f=(r?a:l).options.group.name;return o===!0||typeof o=="string"&&o===f||o.join&&o.indexOf(f)>-1}}var n={},s=t.group;(!s||Br(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=i(s.pull,!0),n.checkPut=i(s.put),n.revertClone=s.revertClone,t.group=n},Up=function(){!Np&&W&&F(W,"display","none")},zp=function(){!Np&&W&&F(W,"display","")};qr&&!kp&&document.addEventListener("click",function(e){if(jr)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),jr=!1,!1},!0);var qi=function(t){if(P){t=t.touches?t.touches[0]:t;var i=Hx(t.clientX,t.clientY);if(i){var n={};for(var s in t)t.hasOwnProperty(s)&&(n[s]=t[s]);n.target=n.rootEl=i,n.preventDefault=void 0,n.stopPropagation=void 0,i[Wt]._onDragOver(n)}}},Ux=function(t){P&&P.parentNode[Wt]._isOutsideThisEl(t.target)};function B(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=We({},t),e[Wt]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Wp(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,a){r.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:B.supportPointer!==!1&&"PointerEvent"in window&&(!js||Hu),emptyInsertThreshold:5};$s.initializePlugins(this,e,i);for(var n in i)!(n in t)&&(t[n]=i[n]);Hp(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:Nx,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?V(e,"pointerdown",this._onTapStart):(V(e,"mousedown",this._onTapStart),V(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(V(e,"dragover",this),V(e,"dragenter",this)),Vr.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),We(this,Dx())}B.prototype={constructor:B,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Rn=null)},_getDirection:function(t,i){return typeof this.options.direction=="function"?this.options.direction.call(this,t,i,P):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i=this,n=this.el,s=this.options,o=s.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=s.filter;if($x(n),!P&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&js&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=fe(l,s.draggable,n,!1),!(l&&l.animated)&&Nr!==l)){if(On=ee(l),Gs=ee(l,s.draggable),typeof u=="function"){if(u.call(this,t,l,this)){Lt({sortable:i,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),Nt("filter",i,{evt:t}),o&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(h){if(h=fe(c,h.trim(),n,!1),h)return Lt({sortable:i,rootEl:h,name:"filter",targetEl:l,fromEl:n,toEl:n}),Nt("filter",i,{evt:t}),!0}),u)){o&&t.preventDefault();return}s.handle&&!fe(c,s.handle,n,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,i,n){var s=this,o=s.el,r=s.options,a=o.ownerDocument,l;if(n&&!P&&n.parentNode===o){var c=gt(n);if(rt=o,P=n,dt=P.parentNode,Xi=P.nextSibling,Nr=n,Dr=r.group,B.dragged=P,Yi={target:P,clientX:(i||t).clientX,clientY:(i||t).clientY},Cp=Yi.clientX-c.left,Lp=Yi.clientY-c.top,this._lastX=(i||t).clientX,this._lastY=(i||t).clientY,P.style["will-change"]="all",l=function(){if(Nt("delayEnded",s,{evt:t}),B.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!wp&&s.nativeDraggable&&(P.draggable=!0),s._triggerDragStart(t,i),Lt({sortable:s,name:"choose",originalEvent:t}),$t(P,r.chosenClass,!0)},r.ignore.split(",").forEach(function(u){Dp(P,u.trim(),Ru)}),V(a,"dragover",qi),V(a,"mousemove",qi),V(a,"touchmove",qi),r.supportPointer?(V(a,"pointerup",s._onDrop),!this.nativeDraggable&&V(a,"pointercancel",s._onDrop)):(V(a,"mouseup",s._onDrop),V(a,"touchend",s._onDrop),V(a,"touchcancel",s._onDrop)),wp&&this.nativeDraggable&&(this.options.touchStartThreshold=4,P.draggable=!0),Nt("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Xs||He))){if(B.eventCanceled){this._onDrop();return}r.supportPointer?(V(a,"pointerup",s._disableDelayedDrag),V(a,"pointercancel",s._disableDelayedDrag)):(V(a,"mouseup",s._disableDelayedDrag),V(a,"touchend",s._disableDelayedDrag),V(a,"touchcancel",s._disableDelayedDrag)),V(a,"mousemove",s._delayedDragTouchMoveHandler),V(a,"touchmove",s._delayedDragTouchMoveHandler),r.supportPointer&&V(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,r.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var i=t.touches?t.touches[0]:t;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){P&&Ru(P),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;z(t,"mouseup",this._disableDelayedDrag),z(t,"touchend",this._disableDelayedDrag),z(t,"touchcancel",this._disableDelayedDrag),z(t,"pointerup",this._disableDelayedDrag),z(t,"pointercancel",this._disableDelayedDrag),z(t,"mousemove",this._delayedDragTouchMoveHandler),z(t,"touchmove",this._delayedDragTouchMoveHandler),z(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||t.pointerType=="touch"&&t,!this.nativeDraggable||i?this.options.supportPointer?V(document,"pointermove",this._onTouchMove):i?V(document,"touchmove",this._onTouchMove):V(document,"mousemove",this._onTouchMove):(V(P,"dragend",this),V(rt,"dragstart",this._onDragStart));try{document.selection?Hr(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,i){if(Dn=!1,rt&&P){Nt("dragStarted",this,{evt:i}),this.nativeDraggable&&V(document,"dragover",Ux);var n=this.options;!t&&$t(P,n.dragClass,!1),$t(P,n.ghostClass,!0),B.active=this,t&&this._appendGhost(),Lt({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(de){this._lastX=de.clientX,this._lastY=de.clientY,Up();for(var t=document.elementFromPoint(de.clientX,de.clientY),i=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(de.clientX,de.clientY),t!==i);)i=t;if(P.parentNode[Wt]._isOutsideThisEl(t),i)do{if(i[Wt]){var n=void 0;if(n=i[Wt]._onDragOver({clientX:de.clientX,clientY:de.clientY,target:t,rootEl:i}),n&&!this.options.dragoverBubble)break}t=i}while(i=Rp(i));zp()}},_onTouchMove:function(t){if(Yi){var i=this.options,n=i.fallbackTolerance,s=i.fallbackOffset,o=t.touches?t.touches[0]:t,r=W&&In(W,!0),a=W&&r&&r.a,l=W&&r&&r.d,c=Ir&&Et&&Mp(Et),u=(o.clientX-Yi.clientX+s.x)/(a||1)+(c?c[0]-Pu[0]:0)/(a||1),h=(o.clientY-Yi.clientY+s.y)/(l||1)+(c?c[1]-Pu[1]:0)/(l||1);if(!B.active&&!Dn){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(W){r?(r.e+=u-(Au||0),r.f+=h-(ku||0)):r={a:1,b:0,c:0,d:1,e:u,f:h};var f="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");F(W,"webkitTransform",f),F(W,"mozTransform",f),F(W,"msTransform",f),F(W,"transform",f),Au=u,ku=h,de=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!W){var t=this.options.fallbackOnBody?document.body:rt,i=gt(P,!0,Ir,!0,t),n=this.options;if(Ir){for(Et=t;F(Et,"position")==="static"&&F(Et,"transform")==="none"&&Et!==document;)Et=Et.parentNode;Et!==document.body&&Et!==document.documentElement?(Et===document&&(Et=_e()),i.top+=Et.scrollTop,i.left+=Et.scrollLeft):Et=_e(),Pu=Mp(Et)}W=P.cloneNode(!0),$t(W,n.ghostClass,!1),$t(W,n.fallbackClass,!0),$t(W,n.dragClass,!0),F(W,"transition",""),F(W,"transform",""),F(W,"box-sizing","border-box"),F(W,"margin",0),F(W,"top",i.top),F(W,"left",i.left),F(W,"width",i.width),F(W,"height",i.height),F(W,"opacity","0.8"),F(W,"position",Ir?"absolute":"fixed"),F(W,"zIndex","100000"),F(W,"pointerEvents","none"),B.ghost=W,t.appendChild(W),F(W,"transform-origin",Cp/parseInt(W.style.width)*100+"% "+Lp/parseInt(W.style.height)*100+"%")}},_onDragStart:function(t,i){var n=this,s=t.dataTransfer,o=n.options;if(Nt("dragStart",this,{evt:t}),B.eventCanceled){this._onDrop();return}Nt("setupClone",this),B.eventCanceled||(ut=Fp(P),ut.removeAttribute("id"),ut.draggable=!1,ut.style["will-change"]="",this._hideClone(),$t(ut,this.options.chosenClass,!1),B.clone=ut),n.cloneId=Hr(function(){Nt("clone",n),!B.eventCanceled&&(n.options.removeCloneOnHide||rt.insertBefore(ut,P),n._hideClone(),Lt({sortable:n,name:"clone"}))}),!i&&$t(P,o.dragClass,!0),i?(jr=!0,n._loopId=setInterval(n._emulateDragOver,50)):(z(document,"mouseup",n._onDrop),z(document,"touchend",n._onDrop),z(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",o.setData&&o.setData.call(n,s,P)),V(document,"drop",n),F(P,"transform","translateZ(0)")),Dn=!0,n._dragStartId=Hr(n._dragStarted.bind(n,i,t)),V(document,"selectstart",n),Hs=!0,window.getSelection().removeAllRanges(),js&&F(document.body,"user-select","none")},_onDragOver:function(t){var i=this.el,n=t.target,s,o,r,a=this.options,l=a.group,c=B.active,u=Dr===l,h=a.sort,f=_t||c,p,m=this,g=!1;if(Fu)return;function b(It,wn){Nt(It,m,we({evt:t,isOwner:u,axis:p?"vertical":"horizontal",revert:r,dragRect:s,targetRect:o,canSort:h,fromSortable:f,target:n,completed:v,onMove:function(Hi,oi){return Fr(rt,i,P,s,Hi,gt(Hi),t,oi)},changed:M},wn))}function y(){b("dragOverAnimationCapture"),m.captureAnimationState(),m!==f&&f.captureAnimationState()}function v(It){return b("dragOverCompleted",{insertion:It}),It&&(u?c._hideClone():c._showClone(m),m!==f&&($t(P,_t?_t.options.ghostClass:c.options.ghostClass,!1),$t(P,a.ghostClass,!0)),_t!==m&&m!==B.active?_t=m:m===B.active&&_t&&(_t=null),f===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){b("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(n===P&&!P.animated||n===i&&!n.animated)&&(Rn=null),!a.dragoverBubble&&!t.rootEl&&n!==document&&(P.parentNode[Wt]._isOutsideThisEl(t.target),!It&&qi(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function M(){Kt=ee(P),ui=ee(P,a.draggable),Lt({sortable:m,name:"change",toEl:i,newIndex:Kt,newDraggableIndex:ui,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=fe(n,a.draggable,i,!0),b("dragOver"),B.eventCanceled)return g;if(P.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return v(!1);if(jr=!1,c&&!a.disabled&&(u?h||(r=dt!==rt):_t===this||(this.lastPutMode=Dr.checkPull(this,c,P,t))&&l.checkPut(this,c,P,t))){if(p=this._getDirection(t,n)==="vertical",s=gt(P),b("dragOverValid"),B.eventCanceled)return g;if(r)return dt=rt,y(),this._hideClone(),b("revert"),B.eventCanceled||(Xi?rt.insertBefore(P,Xi):rt.appendChild(P)),v(!0);var w=Uu(i,a.draggable);if(!w||Gx(t,p,this)&&!w.animated){if(w===P)return v(!1);if(w&&i===t.target&&(n=w),n&&(o=gt(n)),Fr(rt,i,P,s,n,o,t,!!n)!==!1)return y(),w&&w.nextSibling?i.insertBefore(P,w.nextSibling):i.appendChild(P),dt=i,M(),v(!0)}else if(w&&Vx(t,p,this)){var x=Fn(i,0,a,!0);if(x===P)return v(!1);if(n=x,o=gt(n),Fr(rt,i,P,s,n,o,t,!1)!==!1)return y(),i.insertBefore(P,x),dt=i,M(),v(!0)}else if(n.parentNode===i){o=gt(n);var E=0,_,L=P.parentNode!==i,T=!Wx(P.animated&&P.toRect||s,n.animated&&n.toRect||o,p),k=p?"top":"left",R=Ep(n,"top","top")||Ep(P,"top","top"),O=R?R.scrollTop:void 0;Rn!==n&&(_=o[k],qs=!1,Or=!T&&a.invertSwap||L),E=Yx(t,n,o,p,T?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Or,Rn===n);var H;if(E!==0){var Y=ee(P);do Y-=E,H=dt.children[Y];while(H&&(F(H,"display")==="none"||H===W))}if(E===0||H===n)return v(!1);Rn=n,Ys=E;var G=n.nextElementSibling,q=!1;q=E===1;var ft=Fr(rt,i,P,s,n,o,t,q);if(ft!==!1)return(ft===1||ft===-1)&&(q=ft===1),Fu=!0,setTimeout(jx,30),y(),q&&!G?i.appendChild(P):n.parentNode.insertBefore(P,q?G:n),R&&Ip(R,0,O-R.scrollTop),dt=P.parentNode,_!==void 0&&!Or&&(Wr=Math.abs(_-gt(n)[k])),M(),v(!0)}if(i.contains(P))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){z(document,"mousemove",this._onTouchMove),z(document,"touchmove",this._onTouchMove),z(document,"pointermove",this._onTouchMove),z(document,"dragover",qi),z(document,"mousemove",qi),z(document,"touchmove",qi)},_offUpEvents:function(){var t=this.el.ownerDocument;z(t,"mouseup",this._onDrop),z(t,"touchend",this._onDrop),z(t,"pointerup",this._onDrop),z(t,"pointercancel",this._onDrop),z(t,"touchcancel",this._onDrop),z(document,"selectstart",this)},_onDrop:function(t){var i=this.el,n=this.options;if(Kt=ee(P),ui=ee(P,n.draggable),Nt("drop",this,{evt:t}),dt=P&&P.parentNode,Kt=ee(P),ui=ee(P,n.draggable),B.eventCanceled){this._nulling();return}Dn=!1,Or=!1,qs=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Bu(this.cloneId),Bu(this._dragStartId),this.nativeDraggable&&(z(document,"drop",this),z(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),js&&F(document.body,"user-select",""),F(P,"transform",""),t&&(Hs&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),W&&W.parentNode&&W.parentNode.removeChild(W),(rt===dt||_t&&_t.lastPutMode!=="clone")&&ut&&ut.parentNode&&ut.parentNode.removeChild(ut),P&&(this.nativeDraggable&&z(P,"dragend",this),Ru(P),P.style["will-change"]="",Hs&&!Dn&&$t(P,_t?_t.options.ghostClass:this.options.ghostClass,!1),$t(P,this.options.chosenClass,!1),Lt({sortable:this,name:"unchoose",toEl:dt,newIndex:null,newDraggableIndex:null,originalEvent:t}),rt!==dt?(Kt>=0&&(Lt({rootEl:dt,name:"add",toEl:dt,fromEl:rt,originalEvent:t}),Lt({sortable:this,name:"remove",toEl:dt,originalEvent:t}),Lt({rootEl:dt,name:"sort",toEl:dt,fromEl:rt,originalEvent:t}),Lt({sortable:this,name:"sort",toEl:dt,originalEvent:t})),_t&&_t.save()):Kt!==On&&Kt>=0&&(Lt({sortable:this,name:"update",toEl:dt,originalEvent:t}),Lt({sortable:this,name:"sort",toEl:dt,originalEvent:t})),B.active&&((Kt==null||Kt===-1)&&(Kt=On,ui=Gs),Lt({sortable:this,name:"end",toEl:dt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Nt("nulling",this),rt=P=dt=W=Xi=ut=Nr=hi=Yi=de=Hs=Kt=ui=On=Gs=Rn=Ys=_t=Dr=B.dragged=B.ghost=B.clone=B.active=null,Gr.forEach(function(t){t.checked=!0}),Gr.length=Au=ku=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":P&&(this._onDragOver(t),zx(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],i,n=this.el.children,s=0,o=n.length,r=this.options;s<o;s++)i=n[s],fe(i,r.draggable,this.el,!1)&&t.push(i.getAttribute(r.dataIdAttr)||Xx(i));return t},sort:function(t,i){var n={},s=this.el;this.toArray().forEach(function(o,r){var a=s.children[r];fe(a,this.options.draggable,s,!1)&&(n[o]=a)},this),i&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(s.removeChild(n[o]),s.appendChild(n[o]))}),i&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,i){return fe(t,i||this.options.draggable,this.el,!1)},option:function(t,i){var n=this.options;if(i===void 0)return n[t];var s=$s.modifyOption(this,t,i);typeof s<"u"?n[t]=s:n[t]=i,t==="group"&&Hp(n)},destroy:function(){Nt("destroy",this);var t=this.el;t[Wt]=null,z(t,"mousedown",this._onTapStart),z(t,"touchstart",this._onTapStart),z(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(z(t,"dragover",this),z(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Vr.splice(Vr.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!hi){if(Nt("hideClone",this),B.eventCanceled)return;F(ut,"display","none"),this.options.removeCloneOnHide&&ut.parentNode&&ut.parentNode.removeChild(ut),hi=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(hi){if(Nt("showClone",this),B.eventCanceled)return;P.parentNode==rt&&!this.options.group.revertClone?rt.insertBefore(ut,P):Xi?rt.insertBefore(ut,Xi):rt.appendChild(ut),this.options.group.revertClone&&this.animate(P,ut),F(ut,"display",""),hi=!1}}};function zx(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Fr(e,t,i,n,s,o,r,a){var l,c=e[Wt],u=c.options.onMove,h;return window.CustomEvent&&!He&&!Xs?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=i,l.draggedRect=n,l.related=s||t,l.relatedRect=o||gt(t),l.willInsertAfter=a,l.originalEvent=r,e.dispatchEvent(l),u&&(h=u.call(c,l,r)),h}function Ru(e){e.draggable=!1}function jx(){Fu=!1}function Vx(e,t,i){var n=gt(Fn(i.el,0,i.options,!0)),s=Bp(i.el,i.options,W),o=10;return t?e.clientX<s.left-o||e.clientY<n.top&&e.clientX<n.right:e.clientY<s.top-o||e.clientY<n.bottom&&e.clientX<n.left}function Gx(e,t,i){var n=gt(Uu(i.el,i.options.draggable)),s=Bp(i.el,i.options,W),o=10;return t?e.clientX>s.right+o||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>s.bottom+o||e.clientX>n.right&&e.clientY>n.top}function Yx(e,t,i,n,s,o,r,a){var l=n?e.clientY:e.clientX,c=n?i.height:i.width,u=n?i.top:i.left,h=n?i.bottom:i.right,f=!1;if(!r){if(a&&Wr<c*s){if(!qs&&(Ys===1?l>u+c*o/2:l<h-c*o/2)&&(qs=!0),qs)f=!0;else if(Ys===1?l<u+Wr:l>h-Wr)return-Ys}else if(l>u+c*(1-s)/2&&l<h-c*(1-s)/2)return qx(t)}return f=f||r,f&&(l<u+c*o/2||l>h-c*o/2)?l>u+c/2?1:-1:0}function qx(e){return ee(P)<ee(e)?1:-1}function Xx(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function $x(e){Gr.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var n=t[i];n.checked&&Gr.push(n)}}function Hr(e){return setTimeout(e,0)}function Bu(e){return clearTimeout(e)}qr&&V(document,"touchmove",function(e){(B.active||Dn)&&e.cancelable&&e.preventDefault()});B.utils={on:V,off:z,css:F,find:Dp,is:function(t,i){return!!fe(t,i,t,!1)},extend:Px,throttle:Op,closest:fe,toggleClass:$t,clone:Fp,index:ee,nextTick:Hr,cancelNextTick:Bu,detectDirection:Wp,getChild:Fn,expando:Wt};B.get=function(e){return e[Wt]};B.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(B.utils=we(we({},B.utils),n.utils)),$s.mount(n)})};B.create=function(e,t){return new B(e,t)};B.version=Ax;var mt=[],Us,Nu,Wu=!1,Du,Ou,Yr,zs;function Kx(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(i){var n=i.originalEvent;this.sortable.nativeDraggable?V(document,"dragover",this._handleAutoScroll):this.options.supportPointer?V(document,"pointermove",this._handleFallbackAutoScroll):n.touches?V(document,"touchmove",this._handleFallbackAutoScroll):V(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var n=i.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):(z(document,"pointermove",this._handleFallbackAutoScroll),z(document,"touchmove",this._handleFallbackAutoScroll),z(document,"mousemove",this._handleFallbackAutoScroll)),Ap(),Ur(),Rx()},nulling:function(){Yr=Nu=Us=Wu=zs=Du=Ou=null,mt.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,n){var s=this,o=(i.touches?i.touches[0]:i).clientX,r=(i.touches?i.touches[0]:i).clientY,a=document.elementFromPoint(o,r);if(Yr=i,n||this.options.forceAutoScrollFallback||Xs||He||js){Iu(i,this.options,a,n);var l=di(a,!0);Wu&&(!zs||o!==Du||r!==Ou)&&(zs&&Ap(),zs=setInterval(function(){var c=di(document.elementFromPoint(o,r),!0);c!==l&&(l=c,Ur()),Iu(i,s.options,c,n)},10),Du=o,Ou=r)}else{if(!this.options.bubbleScroll||di(a,!0)===_e()){Ur();return}Iu(i,this.options,di(a,!1),!1)}}},We(e,{pluginName:"scroll",initializeByDefault:!0})}function Ur(){mt.forEach(function(e){clearInterval(e.pid)}),mt=[]}function Ap(){clearInterval(zs)}var Iu=Op(function(e,t,i,n){if(t.scroll){var s=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,a=t.scrollSpeed,l=_e(),c=!1,u;Nu!==i&&(Nu=i,Ur(),Us=t.scroll,u=t.scrollFn,Us===!0&&(Us=di(i,!0)));var h=0,f=Us;do{var p=f,m=gt(p),g=m.top,b=m.bottom,y=m.left,v=m.right,M=m.width,w=m.height,x=void 0,E=void 0,_=p.scrollWidth,L=p.scrollHeight,T=F(p),k=p.scrollLeft,R=p.scrollTop;p===l?(x=M<_&&(T.overflowX==="auto"||T.overflowX==="scroll"||T.overflowX==="visible"),E=w<L&&(T.overflowY==="auto"||T.overflowY==="scroll"||T.overflowY==="visible")):(x=M<_&&(T.overflowX==="auto"||T.overflowX==="scroll"),E=w<L&&(T.overflowY==="auto"||T.overflowY==="scroll"));var O=x&&(Math.abs(v-s)<=r&&k+M<_)-(Math.abs(y-s)<=r&&!!k),H=E&&(Math.abs(b-o)<=r&&R+w<L)-(Math.abs(g-o)<=r&&!!R);if(!mt[h])for(var Y=0;Y<=h;Y++)mt[Y]||(mt[Y]={});(mt[h].vx!=O||mt[h].vy!=H||mt[h].el!==p)&&(mt[h].el=p,mt[h].vx=O,mt[h].vy=H,clearInterval(mt[h].pid),(O!=0||H!=0)&&(c=!0,mt[h].pid=setInterval(function(){n&&this.layer===0&&B.active._onTouchMove(Yr);var G=mt[this.layer].vy?mt[this.layer].vy*a:0,q=mt[this.layer].vx?mt[this.layer].vx*a:0;typeof u=="function"&&u.call(B.dragged.parentNode[Wt],q,G,e,Yr,mt[this.layer].el)!=="continue"||Ip(mt[this.layer].el,q,G)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&f!==l&&(f=di(f,!1)));Wu=c}},30),jp=function(t){var i=t.originalEvent,n=t.putSortable,s=t.dragEl,o=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(i){var c=n||o;a();var u=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,h=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(h)&&(r("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function zu(){}zu.prototype={startIndex:null,dragStart:function(t){var i=t.oldDraggableIndex;this.startIndex=i},onSpill:function(t){var i=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=Fn(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),n&&n.animateAll()},drop:jp};We(zu,{pluginName:"revertOnSpill"});function ju(){}ju.prototype={onSpill:function(t){var i=t.dragEl,n=t.putSortable,s=n||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:jp};We(ju,{pluginName:"removeOnSpill"});B.mount(new Kx);B.mount(ju,zu);var Vp=B;var Ue=class{static containerMap=new WeakMap;static show(t,i,n=1500){let s=this._getOrCreateWrapper(t),o=document.createElement("div");o.className="toast-message",o.textContent=i,s.appendChild(o),requestAnimationFrame(()=>{o.classList.add("visible")}),setTimeout(()=>{o.classList.remove("visible"),o.addEventListener("transitionend",()=>{o.remove(),s.children.length===0&&(s.remove(),this.containerMap.delete(t))})},n)}static _getOrCreateWrapper(t){if(this.containerMap.has(t))return this.containerMap.get(t);let i=document.createElement("div");return i.className="toast-wrapper",t.appendChild(i),this.containerMap.set(t,i),i}};import gd from"mapbox-gl";import zg from"mapbox-gl";var Zt=63710088e-1,Zx={centimeters:Zt*100,centimetres:Zt*100,degrees:360/(2*Math.PI),feet:Zt*3.28084,inches:Zt*39.37,kilometers:Zt/1e3,kilometres:Zt/1e3,meters:Zt,metres:Zt,miles:Zt/1609.344,millimeters:Zt*1e3,millimetres:Zt*1e3,nauticalmiles:Zt/1852,radians:1,yards:Zt*1.0936};function Xr(e,t,i={}){let n={type:"Feature"};return(i.id===0||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=t||{},n.geometry=e,n}function fi(e,t,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Gp(e[0])||!Gp(e[1]))throw new Error("coordinates must contain numbers");return Xr({type:"Point",coordinates:e},t,i)}function Yp(e,t="kilometers"){let i=Zx[t];if(!i)throw new Error(t+" units is invalid");return e*i}function Vu(e){return e%(2*Math.PI)*180/Math.PI}function pi(e){return e%360*Math.PI/180}function Gp(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function mi(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qp(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function gi(e,t,i={}){var n=mi(e),s=mi(t),o=pi(s[1]-n[1]),r=pi(s[0]-n[0]),a=pi(n[1]),l=pi(s[1]),c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(r/2),2)*Math.cos(a)*Math.cos(l);return Yp(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),i.units)}function Jx(e,t){var i,n,s,o,r,a,l,c,u,h,f=0,p=e.type==="FeatureCollection",m=e.type==="Feature",g=p?e.features.length:1;for(i=0;i<g;i++){for(a=p?e.features[i].geometry:m?e.geometry:e,c=p?e.features[i].properties:m?e.properties:{},u=p?e.features[i].bbox:m?e.bbox:void 0,h=p?e.features[i].id:m?e.id:void 0,l=a?a.type==="GeometryCollection":!1,r=l?a.geometries.length:1,s=0;s<r;s++){if(o=l?a.geometries[s]:a,o===null){if(t(null,f,c,u,h)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,f,c,u,h)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(t(o.geometries[n],f,c,u,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}f++}}function Xp(e,t){Jx(e,function(i,n,s,o,r){var a=i===null?null:i.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(Xr(i,s,{bbox:o,id:r}),n,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<i.coordinates.length;c++){var u=i.coordinates[c],h={type:l,coordinates:u};if(t(Xr(h,s),n,c)===!1)return!1}})}var Qx=Object.defineProperty,t_=Object.defineProperties,e_=Object.getOwnPropertyDescriptors,$p=Object.getOwnPropertySymbols,i_=Object.prototype.hasOwnProperty,n_=Object.prototype.propertyIsEnumerable,Kp=(e,t,i)=>t in e?Qx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Zp=(e,t)=>{for(var i in t||(t={}))i_.call(t,i)&&Kp(e,i,t[i]);if($p)for(var i of $p(t))n_.call(t,i)&&Kp(e,i,t[i]);return e},Jp=(e,t)=>t_(e,e_(t));function s_(e,t,i={}){if(!e||!t)throw new Error("lines and pt are required arguments");let n=mi(t),s=fi([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),o=0;return Xp(e,function(r,a,l){let c=qp(r);for(let u=0;u<c.length-1;u++){let h=fi(c[u]);h.properties.dist=gi(t,h,i);let f=mi(h),p=fi(c[u+1]);p.properties.dist=gi(t,p,i);let m=mi(p),g=gi(h,p,i),b,y;f[0]===n[0]&&f[1]===n[1]?[b,,y]=[f,void 0,!1]:m[0]===n[0]&&m[1]===n[1]?[b,,y]=[m,void 0,!0]:[b,,y]=a_(h.geometry.coordinates,p.geometry.coordinates,mi(t));let v;b&&(v=fi(b,{dist:gi(t,b,i),multiFeatureIndex:l,location:o+gi(h,b,i)})),v&&v.properties.dist<s.properties.dist&&(s=Jp(Zp({},v),{properties:Jp(Zp({},v.properties),{index:y?u+1:u})})),o+=g}}),s}function o_(e,t){let[i,n,s]=e,[o,r,a]=t;return i*o+n*r+s*a}function r_(e,t){let[i,n,s]=e,[o,r,a]=t;return[n*a-s*r,s*o-i*a,i*r-n*o]}function Qp(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2))}function $i(e,t){let i=o_(e,t)/(Qp(e)*Qp(t));return Math.acos(Math.min(Math.max(i,-1),1))}function Gu(e){let t=pi(e[1]),i=pi(e[0]);return[Math.cos(t)*Math.cos(i),Math.cos(t)*Math.sin(i),Math.sin(t)]}function Ki(e){let[t,i,n]=e,s=Vu(Math.asin(n));return[Vu(Math.atan2(i,t)),s]}function a_(e,t,i){let n=Gu(e),s=Gu(t),o=Gu(i),[r,a,l]=o,[c,u,h]=r_(n,s),f=u*l-h*a,p=h*r-c*l,m=c*a-u*r,g=m*u-p*h,b=f*h-m*c,y=p*c-f*u,v=1/Math.sqrt(Math.pow(g,2)+Math.pow(b,2)+Math.pow(y,2)),M=[g*v,b*v,y*v],w=[-1*g*v,-1*b*v,-1*y*v],x=$i(n,s),E=$i(n,M),_=$i(s,M),L=$i(n,w),T=$i(s,w),k;return E<L&&E<T||_<L&&_<T?k=M:k=w,$i(n,k)>x||$i(s,k)>x?gi(Ki(k),Ki(n))<=gi(Ki(k),Ki(s))?[Ki(n),!0,!1]:[Ki(s),!1,!0]:[Ki(k),!1,!1]}var $r=s_;var tm=23283064365386963e-26,l_=12,em=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),Yu=0,Kr=1,Ks=2,Zr=5,Zs=class{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,i,n=this.length){for(;this.pos<n;){let s=this.readVarint(),o=s>>3,r=this.pos;this.type=s&7,t(o,i,this),this.pos===r&&this.skip(s)}return i}readMessage(t,i){return this.readFields(t,i,this.readVarint()+this.pos)}readFixed32(){let t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){let t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){let t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*4294967296;return this.pos+=8,t}readSFixed64(){let t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*4294967296;return this.pos+=8,t}readFloat(){let t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){let t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){let i=this.buf,n,s;return s=i[this.pos++],n=s&127,s<128||(s=i[this.pos++],n|=(s&127)<<7,s<128)||(s=i[this.pos++],n|=(s&127)<<14,s<128)||(s=i[this.pos++],n|=(s&127)<<21,s<128)?n:(s=i[this.pos],n|=(s&15)<<28,c_(n,t,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){let t=this.readVarint();return t%2===1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){let t=this.readVarint()+this.pos,i=this.pos;return this.pos=t,t-i>=l_&&em?em.decode(this.buf.subarray(i,t)):w_(this.buf,i,t)}readBytes(){let t=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,t);return this.pos=t,i}readPackedVarint(t=[],i){let n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readVarint(i));return t}readPackedSVarint(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readFloat());return t}readPackedDouble(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===Ks?this.readVarint()+this.pos:this.pos+1}skip(t){let i=t&7;if(i===Yu)for(;this.buf[this.pos++]>127;);else if(i===Ks)this.pos=this.readVarint()+this.pos;else if(i===Zr)this.pos+=4;else if(i===Kr)this.pos+=8;else throw new Error(`Unimplemented type: ${i}`)}writeTag(t,i){this.writeVarint(t<<3|i)}realloc(t){let i=this.length||16;for(;i<this.pos+t;)i*=2;if(i!==this.length){let n=new Uint8Array(i);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=i}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*tm),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*tm),!0),this.pos+=8}writeVarint(t){if(t=+t||0,t>268435455||t<0){u_(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))}writeSVarint(t){this.writeVarint(t<0?-t*2-1:t*2)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(t.length*4),this.pos++;let i=this.pos;this.pos=S_(this.buf,t,this.pos);let n=this.pos-i;n>=128&&im(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){let i=t.length;this.writeVarint(i),this.realloc(i);for(let n=0;n<i;n++)this.buf[this.pos++]=t[n]}writeRawMessage(t,i){this.pos++;let n=this.pos;t(i,this);let s=this.pos-n;s>=128&&im(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s}writeMessage(t,i,n){this.writeTag(t,Ks),this.writeRawMessage(i,n)}writePackedVarint(t,i){i.length&&this.writeMessage(t,f_,i)}writePackedSVarint(t,i){i.length&&this.writeMessage(t,p_,i)}writePackedBoolean(t,i){i.length&&this.writeMessage(t,b_,i)}writePackedFloat(t,i){i.length&&this.writeMessage(t,m_,i)}writePackedDouble(t,i){i.length&&this.writeMessage(t,g_,i)}writePackedFixed32(t,i){i.length&&this.writeMessage(t,y_,i)}writePackedSFixed32(t,i){i.length&&this.writeMessage(t,v_,i)}writePackedFixed64(t,i){i.length&&this.writeMessage(t,x_,i)}writePackedSFixed64(t,i){i.length&&this.writeMessage(t,__,i)}writeBytesField(t,i){this.writeTag(t,Ks),this.writeBytes(i)}writeFixed32Field(t,i){this.writeTag(t,Zr),this.writeFixed32(i)}writeSFixed32Field(t,i){this.writeTag(t,Zr),this.writeSFixed32(i)}writeFixed64Field(t,i){this.writeTag(t,Kr),this.writeFixed64(i)}writeSFixed64Field(t,i){this.writeTag(t,Kr),this.writeSFixed64(i)}writeVarintField(t,i){this.writeTag(t,Yu),this.writeVarint(i)}writeSVarintField(t,i){this.writeTag(t,Yu),this.writeSVarint(i)}writeStringField(t,i){this.writeTag(t,Ks),this.writeString(i)}writeFloatField(t,i){this.writeTag(t,Zr),this.writeFloat(i)}writeDoubleField(t,i){this.writeTag(t,Kr),this.writeDouble(i)}writeBooleanField(t,i){this.writeVarintField(t,+i)}};function c_(e,t,i){let n=i.buf,s,o;if(o=n[i.pos++],s=(o&112)>>4,o<128||(o=n[i.pos++],s|=(o&127)<<3,o<128)||(o=n[i.pos++],s|=(o&127)<<10,o<128)||(o=n[i.pos++],s|=(o&127)<<17,o<128)||(o=n[i.pos++],s|=(o&127)<<24,o<128)||(o=n[i.pos++],s|=(o&1)<<31,o<128))return Bn(e,s,t);throw new Error("Expected varint not more than 10 bytes")}function Bn(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function u_(e,t){let i,n;if(e>=0?(i=e%4294967296|0,n=e/4294967296|0):(i=~(-e%4294967296),n=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,n=n+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),h_(i,n,t),d_(n,t)}function h_(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function d_(e,t){let i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function im(e,t,i){let n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(n);for(let s=i.pos-1;s>=e;s--)i.buf[s+n]=i.buf[s]}function f_(e,t){for(let i=0;i<e.length;i++)t.writeVarint(e[i])}function p_(e,t){for(let i=0;i<e.length;i++)t.writeSVarint(e[i])}function m_(e,t){for(let i=0;i<e.length;i++)t.writeFloat(e[i])}function g_(e,t){for(let i=0;i<e.length;i++)t.writeDouble(e[i])}function b_(e,t){for(let i=0;i<e.length;i++)t.writeBoolean(e[i])}function y_(e,t){for(let i=0;i<e.length;i++)t.writeFixed32(e[i])}function v_(e,t){for(let i=0;i<e.length;i++)t.writeSFixed32(e[i])}function x_(e,t){for(let i=0;i<e.length;i++)t.writeFixed64(e[i])}function __(e,t){for(let i=0;i<e.length;i++)t.writeSFixed64(e[i])}function w_(e,t,i){let n="",s=t;for(;s<i;){let o=e[s],r=null,a=o>239?4:o>223?3:o>191?2:1;if(s+a>i)break;let l,c,u;a===1?o<128&&(r=o):a===2?(l=e[s+1],(l&192)===128&&(r=(o&31)<<6|l&63,r<=127&&(r=null))):a===3?(l=e[s+1],c=e[s+2],(l&192)===128&&(c&192)===128&&(r=(o&15)<<12|(l&63)<<6|c&63,(r<=2047||r>=55296&&r<=57343)&&(r=null))):a===4&&(l=e[s+1],c=e[s+2],u=e[s+3],(l&192)===128&&(c&192)===128&&(u&192)===128&&(r=(o&15)<<18|(l&63)<<12|(c&63)<<6|u&63,(r<=65535||r>=1114112)&&(r=null))),r===null?(r=65533,a=1):r>65535&&(r-=65536,n+=String.fromCharCode(r>>>10&1023|55296),r=56320|r&1023),n+=String.fromCharCode(r),s+=a}return n}function S_(e,t,i){for(let n=0,s,o;n<t.length;n++){if(s=t.charCodeAt(n),s>55295&&s<57344)if(o)if(s<56320){e[i++]=239,e[i++]=191,e[i++]=189,o=s;continue}else s=o-55296<<10|s-56320|65536,o=null;else{s>56319||n+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):o=s;continue}else o&&(e[i++]=239,e[i++]=191,e[i++]=189,o=null);s<128?e[i++]=s:(s<2048?e[i++]=s>>6|192:(s<65536?e[i++]=s>>12|224:(e[i++]=s>>18|240,e[i++]=s>>12&63|128),e[i++]=s>>6&63|128),e[i++]=s&63|128)}return i}import"mapbox-gl";function Se(e,t){this.x=e,this.y=t}Se.prototype={clone(){return new Se(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){let t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){let t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){let e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){let t=Math.cos(e),i=Math.sin(e),n=t*this.x-i*this.y,s=i*this.x+t*this.y;return this.x=n,this.y=s,this},_rotateAround(e,t){let i=Math.cos(e),n=Math.sin(e),s=t.x+i*(this.x-t.x)-n*(this.y-t.y),o=t.y+n*(this.x-t.x)+i*(this.y-t.y);return this.x=s,this.y=o,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Se};Se.convert=function(e){if(e instanceof Se)return e;if(Array.isArray(e))return new Se(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new Se(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};var Jr=class{constructor(t,i,n,s,o){this.properties={},this.extent=n,this.type=0,this.id=void 0,this._pbf=t,this._geometry=-1,this._keys=s,this._values=o,t.readFields(E_,this,i)}loadGeometry(){let t=this._pbf;t.pos=this._geometry;let i=t.readVarint()+t.pos,n=[],s,o=1,r=0,a=0,l=0;for(;t.pos<i;){if(r<=0){let c=t.readVarint();o=c&7,r=c>>3}if(r--,o===1||o===2)a+=t.readSVarint(),l+=t.readSVarint(),o===1&&(s&&n.push(s),s=[]),s&&s.push(new Se(a,l));else if(o===7)s&&s.push(s[0].clone());else throw new Error(`unknown command ${o}`)}return s&&n.push(s),n}bbox(){let t=this._pbf;t.pos=this._geometry;let i=t.readVarint()+t.pos,n=1,s=0,o=0,r=0,a=1/0,l=-1/0,c=1/0,u=-1/0;for(;t.pos<i;){if(s<=0){let h=t.readVarint();n=h&7,s=h>>3}if(s--,n===1||n===2)o+=t.readSVarint(),r+=t.readSVarint(),o<a&&(a=o),o>l&&(l=o),r<c&&(c=r),r>u&&(u=r);else if(n!==7)throw new Error(`unknown command ${n}`)}return[a,c,l,u]}toGeoJSON(t,i,n){let s=this.extent*Math.pow(2,n),o=this.extent*t,r=this.extent*i,a=this.loadGeometry();function l(f){return[(f.x+o)*360/s-180,360/Math.PI*Math.atan(Math.exp((1-(f.y+r)*2/s)*Math.PI))-90]}function c(f){return f.map(l)}let u;if(this.type===1){let f=[];for(let m of a)f.push(m[0]);let p=c(f);u=f.length===1?{type:"Point",coordinates:p[0]}:{type:"MultiPoint",coordinates:p}}else if(this.type===2){let f=a.map(c);u=f.length===1?{type:"LineString",coordinates:f[0]}:{type:"MultiLineString",coordinates:f}}else if(this.type===3){let f=C_(a),p=[];for(let m of f)p.push(m.map(c));u=p.length===1?{type:"Polygon",coordinates:p[0]}:{type:"MultiPolygon",coordinates:p}}else throw new Error("unknown feature type");let h={type:"Feature",geometry:u,properties:this.properties};return this.id!=null&&(h.id=this.id),h}};Jr.types=["Unknown","Point","LineString","Polygon"];function E_(e,t,i){e===1?t.id=i.readVarint():e===2?M_(i,t):e===3?t.type=i.readVarint():e===4&&(t._geometry=i.pos)}function M_(e,t){let i=e.readVarint()+e.pos;for(;e.pos<i;){let n=t._keys[e.readVarint()],s=t._values[e.readVarint()];t.properties[n]=s}}function C_(e){let t=e.length;if(t<=1)return[e];let i=[],n,s;for(let o=0;o<t;o++){let r=L_(e[o]);r!==0&&(s===void 0&&(s=r<0),s===r<0?(n&&i.push(n),n=[e[o]]):n&&n.push(e[o]))}return n&&i.push(n),i}function L_(e){let t=0;for(let i=0,n=e.length,s=n-1,o,r;i<n;s=i++)o=e[i],r=e[s],t+=(r.x-o.x)*(o.y+r.y);return t}var qu=class{constructor(t,i){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(T_,this,i),this.length=this._features.length}feature(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];let i=this._pbf.readVarint()+this._pbf.pos;return new Jr(this._pbf,i,this.extent,this._keys,this._values)}};function T_(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(A_(i))}function A_(e){let t=null,i=e.readVarint()+e.pos;for(;e.pos<i;){let n=e.readVarint()>>3;t=n===1?e.readString():n===2?e.readFloat():n===3?e.readDouble():n===4?e.readVarint64():n===5?e.readVarint():n===6?e.readSVarint():n===7?e.readBoolean():null}if(t==null)throw new Error("unknown feature value");return t}var Js=class{constructor(t,i){this.layers=t.readFields(k_,{},i)}};function k_(e,t,i){if(e===3){let n=new qu(i,i.readVarint()+i.pos);n.length&&(t[n.name]=n)}}var P_=Object.defineProperty,R_=Object.defineProperties,D_=Object.getOwnPropertyDescriptors,oa=Object.getOwnPropertySymbols,rm=Object.prototype.hasOwnProperty,am=Object.prototype.propertyIsEnumerable,nm=(e,t,i)=>t in e?P_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,tt=(e,t)=>{for(var i in t||(t={}))rm.call(t,i)&&nm(e,i,t[i]);if(oa)for(var i of oa(t))am.call(t,i)&&nm(e,i,t[i]);return e},je=(e,t)=>R_(e,D_(t)),ra=(e,t)=>{var i={};for(var n in e)rm.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&oa)for(var n of oa(e))t.indexOf(n)<0&&am.call(e,n)&&(i[n]=e[n]);return i},th=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},wt=(e,t,i)=>(th(e,t,"read from private field"),i?i.call(e):t.get(e)),Tt=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},pe=(e,t,i,n)=>(th(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),O_=(e,t,i,n)=>({set _(s){pe(e,t,s,i)},get _(){return wt(e,t,n)}}),yi=(e,t,i)=>(th(e,t,"access private method"),i),Ht=(e,t,i)=>new Promise((n,s)=>{var o=l=>{try{a(i.next(l))}catch(c){s(c)}},r=l=>{try{a(i.throw(l))}catch(c){s(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(o,r);a((i=i.apply(e,t)).next())}),lm="https://api.mapbox.com/autofill/v1",I_="suggest",F_="retrieve",B_=`${lm}/${I_}`,N_=`${lm}/${F_}`,at=class{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90");if(this.lng>180||this.lng<-180)throw new Error("Invalid LngLat longitude value: must be between -180 and 180")}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}static convert(e){if(e instanceof at)return new at(e.lng,e.lat);if(Array.isArray(e)&&e.length===2)return new at(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null&&("lng"in e||"lon"in e)&&"lat"in e)return new at(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}},Mt=class{constructor(e,t){this._sw=at.convert(e),this._ne=at.convert(t)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new at(this.getWest(),this.getNorth())}getSouthEast(){return new at(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toFlatArray(){return[this._sw.lng,this._sw.lat,this._ne.lng,this._ne.lat]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}static convert(e){if(!e)throw new Error("Invalid LngLatBounds convert value: falsy");if(e instanceof Mt)return new Mt(e.getSouthWest(),e.getNorthEast());if(Array.isArray(e)&&e.length===2)return new Mt(at.convert(e[0]),at.convert(e[1]));if(Array.isArray(e)&&e.length===4)return new Mt(at.convert([e[0],e[1]]),at.convert([e[2],e[3]]));throw new Error("`LngLatBoundsLike` argument must be specified as an array [<LngLatLike>, <LngLatLike>] or an array [<west>, <south>, <east>, <north>]")}};function W_(){let t=(Math.random().toString(16)+Date.now().toString(16)+Math.random().toString(16)).replace(/\./g,"");return[t.slice(0,8),t.slice(8,12),"4"+t.slice(12,15)+"-8"+t.slice(15,18),t.slice(18,30)].join("-")}var Ut=class{constructor(e){this.id=e??W_()}toString(){return this.id}static convert(e){return new Ut(e instanceof Ut?e.id:e.toString())}},H_="Unknown error",U_=class extends Error{constructor(e,t){super(String(e.message||e.error||H_)),this.name="MapboxError",this.statusCode=t}toString(){return`${this.name} (${this.statusCode}): ${this.message}`}};function ze(e){return Ht(this,null,function*(){if(!e.ok){let t=yield e.json();throw new U_(t,e.status)}})}var sm=globalThis.fetch,z_=globalThis.AbortController;function Ee(){if(!sm)throw new Error("Fetch implementation not found. Please include a fetch polyfill in your application or use `polyfillFetch` from `@mapbox/search-js-core` to fix this issue.");return{fetch:sm,AbortController:z_}}function Zi(...e){let t=[];for(let i of e){if(!i)continue;let n=Object.entries(i);for(let[s,o]of n)o!=null&&t.push(`${s}=${encodeURIComponent(String(o))}`)}return t.join("&")}var Qr,$u,cm,um=class{constructor(e={}){Tt(this,$u),Tt(this,Qr,void 0);let t=e,{accessToken:i}=t,n=ra(t,["accessToken"]);this.accessToken=i,this.defaults=tt(tt({},um.defaults),n)}get responseHeaders(){return wt(this,Qr)}suggest(e,t){return Ht(this,null,function*(){if(!e)throw new Error("searchText is required");let{sessionToken:i,signal:n}=t,s=je(tt(tt({},this.defaults),t),{sessionToken:i}),o=new URL(`${B_}/${encodeURIComponent(e)}`);o.search=yi(this,$u,cm).call(this,s);let{fetch:r}=Ee(),a=yield r(o.toString(),{signal:n});pe(this,Qr,a.headers),yield ze(a);let l=yield a.json();return je(tt({},l),{suggestions:l.suggestions.map(c=>je(tt({},c),{original_search_text:e,_source:"mapbox"})),url:o.toString()})})}retrieve(e,t){return Ht(this,null,function*(){if(!e)throw new Error("suggestion is required");if(!this.canRetrieve(e))throw new Error("suggestion cannot be retrieved");let{sessionToken:i,signal:n}=t,s=Ut.convert(i),o=new URL(`${N_}/${e.action.id}`);o.search=Zi({access_token:this.accessToken,session_token:s.id});let{fetch:r}=Ee(),a=yield r(o.toString(),{signal:n});yield ze(a);let l=yield a.json();return l.url=o.toString(),l})}canRetrieve(e){let t=e.action;return typeof t?.id=="string"}},aa=um;Qr=new WeakMap;$u=new WeakSet;cm=function(e){return Zi({types:"address",access_token:this.accessToken,streets:e.streets,language:e.language,country:e.country,limit:e.limit},e.sessionToken&&{session_token:Ut.convert(e.sessionToken).id},e.proximity&&{proximity:typeof e.proximity=="string"?e.proximity:at.convert(e.proximity).toArray().join(",")},e.bbox&&{bbox:typeof e.bbox=="string"?e.bbox:Mt.convert(e.bbox).toFlatArray().join(",")})};aa.defaults={language:"en",proximity:"ip",streets:!0};var la="https://api.mapbox.com/search/searchbox/v1",j_="suggest",V_="retrieve",G_="category",Y_="reverse",q_=`${la}/${j_}`,X_=`${la}/${V_}`,$_=`${la}/${G_}`,K_=`${la}/${Y_}`,hm="\\.\\d{1,256}",Z_=`\\d{1,3}(${hm})?`,om=`(-?(${Z_}|${hm}))`,dm=new RegExp(`^[ ]*${om},\\s*${om}[ ]*$`),fm=/[\s,]+/,ta,Ku,Zu,pm,eh,mm,gm=class{constructor(e={}){Tt(this,ta),Tt(this,Zu),Tt(this,eh);let t=e,{accessToken:i}=t,n=ra(t,["accessToken"]);this.accessToken=i,this.defaults=tt(tt({},gm.defaults),n)}suggest(e,t){return Ht(this,null,function*(){var i;if(!e)throw new Error("searchText is required");if(dm.test(e)&&t.allowReverse){let h=e.trim().split(fm).map(m=>m.trim());t.flipCoordinates&&(h=h.reverse());let f=h.join(","),p=yield this.reverse(f,t);return yi(this,Zu,pm).call(this,p)}let{sessionToken:s,signal:o}=t,r=je(tt(tt({},this.defaults),t),{q:e,sessionToken:s});if(r.eta_type&&(!r.origin||!r.navigation_profile))throw new Error("to provide eta estimate: eta, navigation_profile, and origin are required");if(r.origin&&!r.navigation_profile)throw new Error("to provide distance estimate: both navigation_profile and origin are required");let a=new URL(q_);a.search=yi(this,ta,Ku).call(this,r);let{fetch:l}=Ee(),c=yield l(a.toString(),{signal:o});yield ze(c);let u=yield c.json();return u.url=a.toString(),(i=u.suggestions)==null||i.forEach(h=>{h._source="mapbox"}),u})}retrieve(e,t){return Ht(this,null,function*(){if(!e)throw new Error("suggestion is required");if(e._originalFeature)return{type:"FeatureCollection",features:[e._originalFeature],url:e._originalUrl||""};if(e._geometry)return{type:"FeatureCollection",features:[{type:"Feature",properties:e,geometry:e._geometry}]};let{sessionToken:i,signal:n,language:s}=t,o=Ut.convert(i),r=tt(tt({},this.defaults),s&&{language:s}),a=new URL(`${X_}/${encodeURIComponent(e.mapbox_id)}`);a.search=Zi({access_token:this.accessToken,session_token:o.id},{language:r.language});let{fetch:l}=Ee(),c=yield l(a.toString(),{signal:n});yield ze(c);let u=yield c.json();return u.url=a.toString(),u})}category(e){return Ht(this,arguments,function*(t,i={}){if(!t)throw new Error("category is required");let n=tt(tt({},this.defaults),i),s=new URL(`${$_}/${encodeURIComponent(t)}`);s.search=yi(this,ta,Ku).call(this,n);let{fetch:o}=Ee(),r=yield o(s.toString(),{signal:n.signal});yield ze(r);let a=yield r.json();return a.url=s.toString(),a})}reverse(e){return Ht(this,arguments,function*(t,i={}){var n;if(!t)throw new Error("lngLat is required");let[s,o]=typeof t=="string"?t.split(",").map(h=>parseFloat(h)):at.convert(t).toArray();if(isNaN(s)||isNaN(o))throw new Error("lngLat is required");let r=tt(tt({},this.defaults),i),a=new URL(K_);a.search=Zi({access_token:this.accessToken,language:r.language,limit:r.limit,longitude:s,latitude:o},r.types&&{types:typeof r.types=="string"?r.types:[...r.types].join(",")});let{fetch:l}=Ee(),c=yield l(a.toString(),{signal:r.signal});yield ze(c);let u=yield c.json();return u.url=a.toString(),(n=u.features)==null||n.forEach(h=>{h._source="mapbox"}),u})}},ih=gm;ta=new WeakSet;Ku=function(e){return Zi({q:e.q,access_token:this.accessToken,language:e.language,limit:e.limit,navigation_profile:e.navigation_profile,route:e.route,route_geometry:e.route_geometry,sar_type:e.sar_type,time_deviation:e.time_deviation,eta_type:e.eta_type,country:e.country,poi_category:e.poi_category,rich_metadata_provider:e.rich_metadata_provider,poi_category_exclusions:e.poi_category_exclusions},e.sessionToken&&{session_token:Ut.convert(e.sessionToken).id},e.proximity&&{proximity:typeof e.proximity=="string"?e.proximity:at.convert(e.proximity).toArray().join(",")},e.origin&&{origin:typeof e.origin=="string"?e.origin:at.convert(e.origin).toArray().join(",")},e.bbox&&{bbox:typeof e.bbox=="string"?e.bbox:Mt.convert(e.bbox).toFlatArray().join(",")},e.types&&{types:typeof e.types=="string"?e.types:[...e.types].join(",")})};Zu=new WeakSet;pm=function(e){return{suggestions:e.features.map(t=>yi(this,eh,mm).call(this,t,e.url)),attribution:e.attribution,url:e.url}};eh=new WeakSet;mm=function(e,t){return je(tt({},e.properties),{_originalFeature:e,_originalUrl:t,_source:e._source})};ih.defaults={language:"en"};var J_="https://api.mapbox.com/autofill/v1",Q_="retrieve",t0=`${J_}/${Q_}`,Ju,bm,ym=class{constructor(e={}){Tt(this,Ju);let t=e,{accessToken:i}=t,n=ra(t,["accessToken"]);this.accessToken=i,this.defaults=tt(tt({},ym.defaults),n)}validate(e,t){return Ht(this,null,function*(){if(!e)throw new Error("searchText is required");let{sessionToken:i,signal:n}=t,s=je(tt(tt({},this.defaults),t),{sessionToken:i}),o=new URL(`${t0}/${encodeURIComponent(e)}`);o.search=yi(this,Ju,bm).call(this,s);let{fetch:r}=Ee(),a=yield r(o.toString(),{signal:n});yield ze(a);let l=yield a.json();return l.url=o.toString(),l.features.length>0&&(l.features=[l.features[0]]),l})}},nh=ym;Ju=new WeakSet;bm=function(e){return Zi({access_token:this.accessToken,language:e.language,country:e.country},e.sessionToken&&{session_token:Ut.convert(e.sessionToken).id},e.proximity&&{proximity:typeof e.proximity=="string"?e.proximity:at.convert(e.proximity).toArray().join(",")},e.bbox&&{bbox:typeof e.bbox=="string"?e.bbox:Mt.convert(e.bbox).toFlatArray().join(",")})};nh.defaults={language:"en",proximity:"ip"};var sh="https://api.mapbox.com/search/geocode/v6",e0=`${sh}/forward`,i0=`${sh}/reverse`,r1=`${sh}/batch`,Qs,ea,Qu,vm=class{constructor(e={}){Tt(this,ea),Tt(this,Qs,void 0);let t=e,{accessToken:i}=t,n=ra(t,["accessToken"]);this.accessToken=i,this.defaults=tt({},n)}get responseHeaders(){return wt(this,Qs)}forward(e,t){return Ht(this,null,function*(){var i;if(!e)throw new Error("searchText is required");let n;t&&({signal:n}=t);let s=je(tt(tt({},this.defaults),t),{q:e}),o=new URL(`${e0}`);o.search=yi(this,ea,Qu).call(this,s);let{fetch:r}=Ee(),a=n?{signal:n}:{},l=yield r(o.toString(),a);pe(this,Qs,l.headers),yield ze(l);let c=yield l.json();return c.url=o.toString(),(i=c.features)==null||i.forEach(u=>{u._source="mapbox"}),c})}reverse(e,t){return Ht(this,null,function*(){var i;if(!e)throw new Error("lngLat is required");let n;t&&({signal:n}=t);let s;if(typeof e=="string"){let[h,f]=e.split(",");s=new at(Number(h),Number(f))}else s=at.convert(e);let o=je(tt(tt({},this.defaults),t),{longitude:s.lng,latitude:s.lat}),r=new URL(`${i0}`);r.search=yi(this,ea,Qu).call(this,o,!0);let{fetch:a}=Ee(),l=n?{signal:n}:{},c=yield a(r.toString(),l);pe(this,Qs,c.headers),yield ze(c);let u=yield c.json();return u.url=r.toString(),(i=u.features)==null||i.forEach(h=>{h._source="mapbox"}),u})}suggest(e,t){return Ht(this,null,function*(){if(dm.test(e)){let n=e.trim().split(fm).map(o=>o.trim());t.flipCoordinates&&(n=n.reverse());let s=n.join(",");return this.reverse(s,t)}else return this.forward(e,t)})}retrieve(e){return Ht(this,null,function*(){return e})}};Qs=new WeakMap;ea=new WeakSet;Qu=function(e,t=!1){return t&&["proximity","autocomplete","bbox"].forEach(i=>{i in e&&delete e[i]}),Zi({q:e.q,longitude:e.longitude,latitude:e.latitude,access_token:this.accessToken,permanent:e.permanent,language:e.language,country:e.country,limit:e.limit,autocomplete:e.autocomplete,worldview:e.worldview},e.sessionToken&&{session_token:Ut.convert(e.sessionToken).id},e.proximity&&{proximity:typeof e.proximity=="string"?e.proximity:at.convert(e.proximity).toArray().join(",")},e.bbox&&{bbox:typeof e.bbox=="string"?e.bbox:Mt.convert(e.bbox).toFlatArray().join(",")},e.types&&{types:typeof e.types=="string"?e.types:[...e.types].join(",")})};var oh=(e=>(e.exact="exact",e.high="high",e.medium="medium",e.low="low",e))(oh||{}),to,xm=class{constructor(){Tt(this,to,{})}addEventListener(e,t){let i=wt(this,to);i[e]||(i[e]=[]),i[e].push(t)}removeEventListener(e,t){let i=wt(this,to);if(!i[e])return;let n=i[e],s=n.indexOf(t);s!==-1&&n.splice(s,1)}fire(e,t){let i=wt(this,to);if(!i[e])return;let n=i[e];for(let s of n)s(t)}};to=new WeakMap;function rh(e,t,i){let n=null;return(...s)=>{n!==null&&clearTimeout(n);let o=i&&i();n=setTimeout(()=>{n=null,!o?.aborted&&e(...s)},t)}}function Xu(){let{AbortController:e}=Ee();return new e}var eo,ia,na,Nn,bi,sa,Ji=class extends xm{constructor(e,t=0){super(),Tt(this,eo,new Ut),Tt(this,ia,0),Tt(this,na,!1),Tt(this,Nn,void 0),Tt(this,bi,Xu()),Tt(this,sa,void 0),pe(this,sa,rh((i,...n)=>Ht(this,[i,...n],function*(s,o={}){if(wt(this,bi).abort(),pe(this,bi,Xu()),!s){pe(this,Nn,null),this.fire("suggest",wt(this,Nn));return}try{let r=yield this.search.suggest(s,je(tt({sessionToken:this.sessionToken},o),{signal:wt(this,bi).signal}));pe(this,Nn,r),this.fire("suggest",r)}catch(r){if(r.name==="AbortError")return;this.fire("suggesterror",r)}}),t,()=>wt(this,bi).signal)),Object.defineProperties(this,{search:{value:e,writable:!1},debounce:{value:t,writable:!1}})}get sessionToken(){return wt(this,na)?wt(this,eo).id:`${wt(this,eo).id}.${wt(this,ia)}`}set sessionToken(e){pe(this,na,!0),pe(this,eo,new Ut(e))}get suggestions(){return wt(this,Nn)}suggest(e,t){return wt(this,sa).call(this,e,t),new Promise((i,n)=>{let s,o;s=r=>{this.removeEventListener("suggest",s),this.removeEventListener("suggesterror",o),i(r)},o=r=>{this.removeEventListener("suggest",s),this.removeEventListener("suggesterror",o),n(r)},this.addEventListener("suggest",s),this.addEventListener("suggesterror",o)})}clear(){this.suggest("")}retrieve(e,t){return Ht(this,null,function*(){let i=yield this.search.retrieve(e,tt({sessionToken:this.sessionToken},t));return this.fire("retrieve",i),i})}canRetrieve(e){return this.search.canRetrieve?this.search.canRetrieve(e):!0}canSuggest(e){return this.search.canSuggest?this.search.canSuggest(e):!0}abort(){wt(this,bi).abort(),pe(this,bi,Xu())}incrementSession(){O_(this,ia)._++}};eo=new WeakMap;ia=new WeakMap;na=new WeakMap;Nn=new WeakMap;bi=new WeakMap;sa=new WeakMap;function Wn(e){let{properties:t}=e;return tt({},t)}function ua(e){return e.split("-")[0]}function ah(e){return e.split("-")[1]}function lh(e){return["top","bottom"].includes(ua(e))?"x":"y"}function Sm(e){return e==="y"?"height":"width"}function _m(e,t,i){let{reference:n,floating:s}=e,o=n.x+n.width/2-s.width/2,r=n.y+n.height/2-s.height/2,a=lh(t),l=Sm(a),c=n[l]/2-s[l]/2,u=a==="x",h;switch(ua(t)){case"top":h={x:o,y:n.y-s.height};break;case"bottom":h={x:o,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:r};break;case"left":h={x:n.x-s.width,y:r};break;default:h={x:n.x,y:n.y}}switch(ah(t)){case"start":h[a]-=c*(i&&u?-1:1);break;case"end":h[a]+=c*(i&&u?-1:1)}return h}var Em=async(e,t,i)=>{let{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:r}=i,a=await(r.isRTL==null?void 0:r.isRTL(t)),l=await r.getElementRects({reference:e,floating:t,strategy:s}),{x:c,y:u}=_m(l,n,a),h=n,f={},p=0;for(let m=0;m<o.length;m++){let{name:g,fn:b}=o[m],{x:y,y:v,data:M,reset:w}=await b({x:c,y:u,initialPlacement:n,placement:h,strategy:s,middlewareData:f,rects:l,platform:r,elements:{reference:e,floating:t}});c=y??c,u=v??u,f={...f,[g]:{...f[g],...M}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(l=w.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:s}):w.rects),{x:c,y:u}=_m(l,h,a)),m=-1)}return{x:c,y:u,placement:h,strategy:s,middlewareData:f}};function n0(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function io(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function Mm(e,t){var i;t===void 0&&(t={});let{x:n,y:s,platform:o,rects:r,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=t,m=n0(p),g=a[f?h==="floating"?"reference":"floating":h],b=io(await o.getClippingRect({element:(i=await(o.isElement==null?void 0:o.isElement(g)))==null||i?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=io(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:h==="floating"?{...r.floating,x:n,y:s}:r.reference,offsetParent:await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),strategy:l}):r[h]);return{top:b.top-y.top+m.top,bottom:y.bottom-b.bottom+m.bottom,left:b.left-y.left+m.left,right:y.right-b.right+m.right}}var s0={left:"right",right:"left",bottom:"top",top:"bottom"};function ca(e){return e.replace(/left|right|bottom|top/g,t=>s0[t])}function o0(e,t,i){i===void 0&&(i=!1);let n=ah(e),s=lh(e),o=Sm(s),r=s==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(r=ca(r)),{main:r,cross:ca(r)}}var r0={start:"end",end:"start"};function wm(e){return e.replace(/start|end/g,t=>r0[t])}var a0=["top","right","bottom","left"],y1=a0.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);var ch=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i;let{placement:n,middlewareData:s,rects:o,initialPlacement:r,platform:a,elements:l}=t,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",flipAlignment:p=!0,...m}=e,g=ua(n),b=h||(g===r||!p?[ca(r)]:function(L){let T=ca(L);return[wm(L),T,wm(T)]}(r)),y=[r,...b],v=await Mm(t,m),M=[],w=((i=s.flip)==null?void 0:i.overflows)||[];if(c&&M.push(v[g]),u){let{main:L,cross:T}=o0(n,o,await(a.isRTL==null?void 0:a.isRTL(l.floating)));M.push(v[L],v[T])}if(w=[...w,{placement:n,overflows:M}],!M.every(L=>L<=0)){var x,E;let L=((x=(E=s.flip)==null?void 0:E.index)!=null?x:0)+1,T=y[L];if(T)return{data:{index:L,overflows:w},reset:{placement:T}};let k="bottom";switch(f){case"bestFit":{var _;let R=(_=w.map(O=>[O,O.overflows.filter(H=>H>0).reduce((H,Y)=>H+Y,0)]).sort((O,H)=>O[1]-H[1])[0])==null?void 0:_[0].placement;R&&(k=R);break}case"initialPlacement":k=r}if(n!==k)return{reset:{placement:k}}}return{}}}};var uh=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){let{x:i,y:n}=t,s=await async function(o,r){let{placement:a,platform:l,elements:c}=o,u=await(l.isRTL==null?void 0:l.isRTL(c.floating)),h=ua(a),f=ah(a),p=lh(a)==="x",m=["left","top"].includes(h)?-1:1,g=u&&p?-1:1,b=typeof r=="function"?r(o):r,{mainAxis:y,crossAxis:v,alignmentAxis:M}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return f&&typeof M=="number"&&(v=f==="end"?-1*M:M),p?{x:v*g,y:y*m}:{x:y*m,y:v*g}}(t,e);return{x:i+s.x,y:n+s.y,data:s}}}};function Pm(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Ye(e){if(e==null)return window;if(!Pm(e)){let t=e.ownerDocument;return t&&t.defaultView||window}return e}function so(e){return Ye(e).getComputedStyle(e)}function Ve(e){return Pm(e)?"":e?(e.nodeName||"").toLowerCase():""}function Rm(){let e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function Me(e){return e instanceof Ye(e).HTMLElement}function xi(e){return e instanceof Ye(e).Element}function dh(e){return typeof ShadowRoot>"u"?!1:e instanceof Ye(e).ShadowRoot||e instanceof ShadowRoot}function fa(e){let{overflow:t,overflowX:i,overflowY:n}=so(e);return/auto|scroll|overlay|hidden/.test(t+n+i)}function l0(e){return["table","td","th"].includes(Ve(e))}function Cm(e){let t=/firefox/i.test(Rm()),i=so(e);return i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].includes(i.willChange)||t&&i.willChange==="filter"||t&&!!i.filter&&i.filter!=="none"}function Dm(){return!/^((?!chrome|android).)*safari/i.test(Rm())}var Lm=Math.min,no=Math.max,ha=Math.round;function Ge(e,t,i){var n,s,o,r;t===void 0&&(t=!1),i===void 0&&(i=!1);let a=e.getBoundingClientRect(),l=1,c=1;t&&Me(e)&&(l=e.offsetWidth>0&&ha(a.width)/e.offsetWidth||1,c=e.offsetHeight>0&&ha(a.height)/e.offsetHeight||1);let u=xi(e)?Ye(e):window,h=!Dm()&&i,f=(a.left+(h&&(n=(s=u.visualViewport)==null?void 0:s.offsetLeft)!=null?n:0))/l,p=(a.top+(h&&(o=(r=u.visualViewport)==null?void 0:r.offsetTop)!=null?o:0))/c,m=a.width/l,g=a.height/c;return{width:m,height:g,top:p,right:f+m,bottom:p+g,left:f,x:f,y:p}}function vi(e){return(t=e,(t instanceof Ye(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function pa(e){return xi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Om(e){return Ge(vi(e)).left+pa(e).scrollLeft}function c0(e,t,i){let n=Me(t),s=vi(t),o=Ge(e,n&&function(l){let c=Ge(l);return ha(c.width)!==l.offsetWidth||ha(c.height)!==l.offsetHeight}(t),i==="fixed"),r={scrollLeft:0,scrollTop:0},a={x:0,y:0};if(n||!n&&i!=="fixed")if((Ve(t)!=="body"||fa(s))&&(r=pa(t)),Me(t)){let l=Ge(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}else s&&(a.x=Om(s));return{x:o.left+r.scrollLeft-a.x,y:o.top+r.scrollTop-a.y,width:o.width,height:o.height}}function Im(e){return Ve(e)==="html"?e:e.assignedSlot||e.parentNode||(dh(e)?e.host:null)||vi(e)}function Tm(e){return Me(e)&&getComputedStyle(e).position!=="fixed"?e.offsetParent:null}function hh(e){let t=Ye(e),i=Tm(e);for(;i&&l0(i)&&getComputedStyle(i).position==="static";)i=Tm(i);return i&&(Ve(i)==="html"||Ve(i)==="body"&&getComputedStyle(i).position==="static"&&!Cm(i))?t:i||function(n){let s=Im(n);for(dh(s)&&(s=s.host);Me(s)&&!["html","body"].includes(Ve(s));){if(Cm(s))return s;s=s.parentNode}return null}(e)||t}function Am(e){if(Me(e))return{width:e.offsetWidth,height:e.offsetHeight};let t=Ge(e);return{width:t.width,height:t.height}}function Fm(e){let t=Im(e);return["html","body","#document"].includes(Ve(t))?e.ownerDocument.body:Me(t)&&fa(t)?t:Fm(t)}function da(e,t){var i;t===void 0&&(t=[]);let n=Fm(e),s=n===((i=e.ownerDocument)==null?void 0:i.body),o=Ye(n),r=s?[o].concat(o.visualViewport||[],fa(n)?n:[]):n,a=t.concat(r);return s?a:a.concat(da(r))}function km(e,t,i){return t==="viewport"?io(function(n,s){let o=Ye(n),r=vi(n),a=o.visualViewport,l=r.clientWidth,c=r.clientHeight,u=0,h=0;if(a){l=a.width,c=a.height;let f=Dm();(f||!f&&s==="fixed")&&(u=a.offsetLeft,h=a.offsetTop)}return{width:l,height:c,x:u,y:h}}(e,i)):xi(t)?function(n,s){let o=Ge(n,!1,s==="fixed"),r=o.top+n.clientTop,a=o.left+n.clientLeft;return{top:r,left:a,x:a,y:r,right:a+n.clientWidth,bottom:r+n.clientHeight,width:n.clientWidth,height:n.clientHeight}}(t,i):io(function(n){var s;let o=vi(n),r=pa(n),a=(s=n.ownerDocument)==null?void 0:s.body,l=no(o.scrollWidth,o.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),c=no(o.scrollHeight,o.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),u=-r.scrollLeft+Om(n),h=-r.scrollTop;return so(a||o).direction==="rtl"&&(u+=no(o.clientWidth,a?a.clientWidth:0)-l),{width:l,height:c,x:u,y:h}}(vi(e)))}function u0(e){let t=da(e),i=["absolute","fixed"].includes(so(e).position)&&Me(e)?hh(e):e;return xi(i)?t.filter(n=>xi(n)&&function(s,o){let r=o.getRootNode==null?void 0:o.getRootNode();if(s.contains(o))return!0;if(r&&dh(r)){let a=o;do{if(a&&s===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(n,i)&&Ve(n)!=="body"):[]}var h0={getClippingRect:function(e){let{element:t,boundary:i,rootBoundary:n,strategy:s}=e,o=[...i==="clippingAncestors"?u0(t):[].concat(i),n],r=o[0],a=o.reduce((l,c)=>{let u=km(t,c,s);return l.top=no(u.top,l.top),l.right=Lm(u.right,l.right),l.bottom=Lm(u.bottom,l.bottom),l.left=no(u.left,l.left),l},km(t,r,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:i,strategy:n}=e,s=Me(i),o=vi(i);if(i===o)return t;let r={scrollLeft:0,scrollTop:0},a={x:0,y:0};if((s||!s&&n!=="fixed")&&((Ve(i)!=="body"||fa(o))&&(r=pa(i)),Me(i))){let l=Ge(i,!0);a.x=l.x+i.clientLeft,a.y=l.y+i.clientTop}return{...t,x:t.x-r.scrollLeft+a.x,y:t.y-r.scrollTop+a.y}},isElement:xi,getDimensions:Am,getOffsetParent:hh,getDocumentElement:vi,getElementRects:e=>{let{reference:t,floating:i,strategy:n}=e;return{reference:c0(t,hh(i),n),floating:{...Am(i),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>so(e).direction==="rtl"};function Bm(e,t,i,n){n===void 0&&(n={});let{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:r=!0,animationFrame:a=!1}=n,l=s&&!a,c=o&&!a,u=l||c?[...xi(e)?da(e):[],...da(t)]:[];u.forEach(m=>{l&&m.addEventListener("scroll",i,{passive:!0}),c&&m.addEventListener("resize",i)});let h,f=null;if(r){let m=!0;f=new ResizeObserver(()=>{m||i(),m=!1}),xi(e)&&!a&&f.observe(e),f.observe(t)}let p=a?Ge(e):null;return a&&function m(){let g=Ge(e);!p||g.x===p.x&&g.y===p.y&&g.width===p.width&&g.height===p.height||i(),p=g,h=requestAnimationFrame(m)}(),i(),()=>{var m;u.forEach(g=>{l&&g.removeEventListener("scroll",i),c&&g.removeEventListener("resize",i)}),(m=f)==null||m.disconnect(),f=null,a&&cancelAnimationFrame(h)}}var Nm=(e,t,i)=>Em(e,t,{platform:h0,...i});var Eh=Sn(Hm());var zm=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],ga=zm.join(","),jm=typeof Element>"u",Qi=jm?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,fh=!jm&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},Vm=function(t,i,n){var s=Array.prototype.slice.apply(t.querySelectorAll(ga));return i&&Qi.call(t,ga)&&s.unshift(t),s=s.filter(n),s},Gm=function e(t,i,n){for(var s=[],o=Array.from(t);o.length;){var r=o.shift();if(r.tagName==="SLOT"){var a=r.assignedElements(),l=a.length?a:r.children,c=e(l,!0,n);n.flatten?s.push.apply(s,c):s.push({scope:r,candidates:c})}else{var u=Qi.call(r,ga);u&&n.filter(r)&&(i||!t.includes(r))&&s.push(r);var h=r.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(r),f=!n.shadowRootFilter||n.shadowRootFilter(r);if(h&&f){var p=e(h===!0?r.children:h.children,!0,n);n.flatten?s.push.apply(s,p):s.push({scope:r,candidates:p})}else o.unshift.apply(o,r.children)}}return s},Ym=function(t,i){return t.tabIndex<0&&(i||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},d0=function(t,i){return t.tabIndex===i.tabIndex?t.documentOrder-i.documentOrder:t.tabIndex-i.tabIndex},qm=function(t){return t.tagName==="INPUT"},f0=function(t){return qm(t)&&t.type==="hidden"},p0=function(t){var i=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return i},m0=function(t,i){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===i)return t[n]},g0=function(t){if(!t.name)return!0;var i=t.form||fh(t),n=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=n(window.CSS.escape(t.name));else try{s=n(t.name)}catch(r){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",r.message),!1}var o=m0(s,t.form);return!o||o===t},b0=function(t){return qm(t)&&t.type==="radio"},y0=function(t){return b0(t)&&!g0(t)},Um=function(t){var i=t.getBoundingClientRect(),n=i.width,s=i.height;return n===0&&s===0},v0=function(t,i){var n=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=Qi.call(t,"details>summary:first-of-type"),r=o?t.parentElement:t;if(Qi.call(r,"details:not([open]) *"))return!0;var a=fh(t).host,l=a?.ownerDocument.contains(a)||t.ownerDocument.contains(t);if(!n||n==="full"){if(typeof s=="function"){for(var c=t;t;){var u=t.parentElement,h=fh(t);if(u&&!u.shadowRoot&&s(u)===!0)return Um(t);t.assignedSlot?t=t.assignedSlot:!u&&h!==t.ownerDocument?t=h.host:t=u}t=c}if(l)return!t.getClientRects().length}else if(n==="non-zero-area")return Um(t);return!1},x0=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var i=t.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var n=0;n<i.children.length;n++){var s=i.children.item(n);if(s.tagName==="LEGEND")return Qi.call(i,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}i=i.parentElement}return!1},ba=function(t,i){return!(i.disabled||f0(i)||v0(i,t)||p0(i)||x0(i))},ph=function(t,i){return!(y0(i)||Ym(i)<0||!ba(t,i))},_0=function(t){var i=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},w0=function e(t){var i=[],n=[];return t.forEach(function(s,o){var r=!!s.scope,a=r?s.scope:s,l=Ym(a,r),c=r?e(s.candidates):a;l===0?r?i.push.apply(i,c):i.push(a):n.push({documentOrder:o,tabIndex:l,item:s,isScope:r,content:c})}),n.sort(d0).reduce(function(s,o){return o.isScope?s.push.apply(s,o.content):s.push(o.content),s},[]).concat(i)},Xm=function(t,i){i=i||{};var n;return i.getShadowRoot?n=Gm([t],i.includeContainer,{filter:ph.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:_0}):n=Vm(t,i.includeContainer,ph.bind(null,i)),w0(n)},$m=function(t,i){i=i||{};var n;return i.getShadowRoot?n=Gm([t],i.includeContainer,{filter:ba.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):n=Vm(t,i.includeContainer,ba.bind(null,i)),n},oo=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return Qi.call(t,ga)===!1?!1:ph(i,t)},S0=zm.concat("iframe").join(","),ya=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return Qi.call(t,S0)===!1?!1:ba(i,t)};function Km(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,n)}return i}function Zm(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Km(Object(i),!0).forEach(function(n){E0(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Km(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function E0(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Jm=function(){var e=[];return{activateTrap:function(i){if(e.length>0){var n=e[e.length-1];n!==i&&n.pause()}var s=e.indexOf(i);s===-1||e.splice(s,1),e.push(i)},deactivateTrap:function(i){var n=e.indexOf(i);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}}}(),M0=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},C0=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},L0=function(t){return t.key==="Tab"||t.keyCode===9},Qm=function(t){return setTimeout(t,0)},tg=function(t,i){var n=-1;return t.every(function(s,o){return i(s)?(n=o,!1):!0}),n},ro=function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return typeof t=="function"?t.apply(void 0,n):t},va=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},eg=function(t,i){var n=i?.document||document,s=Zm({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},r,a=function(E,_,L){return E&&E[_]!==void 0?E[_]:s[L||_]},l=function(E){return o.containerGroups.findIndex(function(_){var L=_.container,T=_.tabbableNodes;return L.contains(E)||T.find(function(k){return k===E})})},c=function(E){var _=s[E];if(typeof _=="function"){for(var L=arguments.length,T=new Array(L>1?L-1:0),k=1;k<L;k++)T[k-1]=arguments[k];_=_.apply(void 0,T)}if(_===!0&&(_=void 0),!_){if(_===void 0||_===!1)return _;throw new Error("`".concat(E,"` was specified but was not a node, or did not return a node"))}var R=_;if(typeof _=="string"&&(R=n.querySelector(_),!R))throw new Error("`".concat(E,"` as selector refers to no known node"));return R},u=function(){var E=c("initialFocus");if(E===!1)return!1;if(E===void 0)if(l(n.activeElement)>=0)E=n.activeElement;else{var _=o.tabbableGroups[0],L=_&&_.firstTabbableNode;E=L||c("fallbackFocus")}if(!E)throw new Error("Your focus-trap needs to have at least one focusable element");return E},h=function(){if(o.containerGroups=o.containers.map(function(E){var _=Xm(E,s.tabbableOptions),L=$m(E,s.tabbableOptions);return{container:E,tabbableNodes:_,focusableNodes:L,firstTabbableNode:_.length>0?_[0]:null,lastTabbableNode:_.length>0?_[_.length-1]:null,nextTabbableNode:function(k){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,O=L.findIndex(function(H){return H===k});if(!(O<0))return R?L.slice(O+1).find(function(H){return oo(H,s.tabbableOptions)}):L.slice(0,O).reverse().find(function(H){return oo(H,s.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(E){return E.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!c("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},f=function x(E){if(E!==!1&&E!==n.activeElement){if(!E||!E.focus){x(u());return}E.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=E,M0(E)&&E.select()}},p=function(E){var _=c("setReturnFocus",E);return _||(_===!1?!1:E)},m=function(E){var _=va(E);if(!(l(_)>=0)){if(ro(s.clickOutsideDeactivates,E)){r.deactivate({returnFocus:s.returnFocusOnDeactivate&&!ya(_,s.tabbableOptions)});return}ro(s.allowOutsideClick,E)||E.preventDefault()}},g=function(E){var _=va(E),L=l(_)>=0;L||_ instanceof Document?L&&(o.mostRecentlyFocusedNode=_):(E.stopImmediatePropagation(),f(o.mostRecentlyFocusedNode||u()))},b=function(E){var _=va(E);h();var L=null;if(o.tabbableGroups.length>0){var T=l(_),k=T>=0?o.containerGroups[T]:void 0;if(T<0)E.shiftKey?L=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:L=o.tabbableGroups[0].firstTabbableNode;else if(E.shiftKey){var R=tg(o.tabbableGroups,function(ft){var It=ft.firstTabbableNode;return _===It});if(R<0&&(k.container===_||ya(_,s.tabbableOptions)&&!oo(_,s.tabbableOptions)&&!k.nextTabbableNode(_,!1))&&(R=T),R>=0){var O=R===0?o.tabbableGroups.length-1:R-1,H=o.tabbableGroups[O];L=H.lastTabbableNode}}else{var Y=tg(o.tabbableGroups,function(ft){var It=ft.lastTabbableNode;return _===It});if(Y<0&&(k.container===_||ya(_,s.tabbableOptions)&&!oo(_,s.tabbableOptions)&&!k.nextTabbableNode(_))&&(Y=T),Y>=0){var G=Y===o.tabbableGroups.length-1?0:Y+1,q=o.tabbableGroups[G];L=q.firstTabbableNode}}}else L=c("fallbackFocus");L&&(E.preventDefault(),f(L))},y=function(E){if(C0(E)&&ro(s.escapeDeactivates,E)!==!1){E.preventDefault(),r.deactivate();return}if(L0(E)){b(E);return}},v=function(E){var _=va(E);l(_)>=0||ro(s.clickOutsideDeactivates,E)||ro(s.allowOutsideClick,E)||(E.preventDefault(),E.stopImmediatePropagation())},M=function(){if(o.active)return Jm.activateTrap(r),o.delayInitialFocusTimer=s.delayInitialFocus?Qm(function(){f(u())}):f(u()),n.addEventListener("focusin",g,!0),n.addEventListener("mousedown",m,{capture:!0,passive:!1}),n.addEventListener("touchstart",m,{capture:!0,passive:!1}),n.addEventListener("click",v,{capture:!0,passive:!1}),n.addEventListener("keydown",y,{capture:!0,passive:!1}),r},w=function(){if(o.active)return n.removeEventListener("focusin",g,!0),n.removeEventListener("mousedown",m,!0),n.removeEventListener("touchstart",m,!0),n.removeEventListener("click",v,!0),n.removeEventListener("keydown",y,!0),r};return r={get active(){return o.active},get paused(){return o.paused},activate:function(E){if(o.active)return this;var _=a(E,"onActivate"),L=a(E,"onPostActivate"),T=a(E,"checkCanFocusTrap");T||h(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement,_&&_();var k=function(){T&&h(),M(),L&&L()};return T?(T(o.containers.concat()).then(k,k),this):(k(),this)},deactivate:function(E){if(!o.active)return this;var _=Zm({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},E);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,w(),o.active=!1,o.paused=!1,Jm.deactivateTrap(r);var L=a(_,"onDeactivate"),T=a(_,"onPostDeactivate"),k=a(_,"checkCanReturnFocus"),R=a(_,"returnFocus","returnFocusOnDeactivate");L&&L();var O=function(){Qm(function(){R&&f(p(o.nodeFocusedBeforeActivation)),T&&T()})};return R&&k?(k(p(o.nodeFocusedBeforeActivation)).then(O,O),this):(O(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,w(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,h(),M(),this)},updateContainerElements:function(E){var _=[].concat(E).filter(Boolean);return o.containers=_.map(function(L){return typeof L=="string"?n.querySelector(L):L}),o.active&&h(),this}},r.updateContainerElements(t),r};var Fg=Sn(mh());var Wg=Sn(mh());var Ug=Sn(ng());var A0=Object.defineProperty,k0=Object.defineProperties,P0=Object.getOwnPropertyDescriptors,sg=Object.getOwnPropertySymbols,R0=Object.prototype.hasOwnProperty,D0=Object.prototype.propertyIsEnumerable,og=(e,t,i)=>t in e?A0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,I=(e,t)=>{for(var i in t||(t={}))R0.call(t,i)&&og(e,i,t[i]);if(sg)for(var i of sg(t))D0.call(t,i)&&og(e,i,t[i]);return e},Jt=(e,t)=>k0(e,P0(t)),nd=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},d=(e,t,i)=>(nd(e,t,"read from private field"),i?i.call(e):t.get(e)),S=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},A=(e,t,i,n)=>(nd(e,t,"write to private field"),n?n.call(e,i):t.set(e,i),i),Po=(e,t,i)=>(nd(e,t,"access private method"),i),Pe=(e,t,i)=>new Promise((n,s)=>{var o=l=>{try{a(i.next(l))}catch(c){s(c)}},r=l=>{try{a(i.throw(l))}catch(c){s(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(o,r);a((i=i.apply(e,t)).next())}),rg=document.implementation.createHTMLDocument();function ln(e,t){let i={};for(let[n,s]of Object.entries(t))i[n]=e.querySelector(s);return i}function O0(e){return Array.from(e.childNodes||[]).filter(t=>t.nodeType===Node.ELEMENT_NODE)}function Qt(e){let t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild}function I0(e){let t=rg.createElement("style");return t.textContent=e,rg.head.appendChild(t),t.sheet}function F0(e){return window.getComputedStyle(e).display!=="none"}function Ce(e,t){if(!e)return;Object.getOwnPropertyDescriptor(e.constructor.prototype,"value").set.call(e,t);let n=e;n._valueTracker&&n._valueTracker.setValue("");let s=new Event("input",{bubbles:!0});s.simulated=!0,e.dispatchEvent(s);let o=new Event("change",{bubbles:!0});o.simulated=!0,e.dispatchEvent(o)}function bg(e,t=!1){let i,n,s=e.getBoundingClientRect();if(e.style.display==="none"||s.height===0&&s.width===0){let o=e.cloneNode(t);e.parentElement.appendChild(o),o.style.setProperty("display","block","important");let r=o.getBoundingClientRect();i=r.width,n=r.height,o.style.setProperty("display","none"),o.remove()}else i=s.width,n=s.height;return{height:Math.floor(n),width:Math.floor(i)}}function B0(e){let t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}var N0=new RegExp("[_a-zA-Z]+[_a-zA-Z0-9-]*","g"),W0=new RegExp(`\\.${N0.source}`,"g"),H0=new RegExp("^\\s*(@(?:media|supports)[^{]*){(.*)}\\s*$");function _a(e,t){return e.replace(W0,i=>"."+t(i.slice(1)))}function yg(e,t){let n=I0(e).cssRules;function s(r){if(r instanceof CSSStyleRule)return`${_a(r.selectorText,t)} { ${r.style.cssText} }`;let a=H0.exec(r.cssText.split(`
`).join(""));if(a&&a.length>2){let l=a[1],c=a[2];return`${l} { ${yg(c,t)} }`}return r.cssText}let o="";for(let r of Array.from(n))o+=s(r)+`

`;return o.trim()}function ag(e,t){let i=Array.from(e.querySelectorAll("[class]"));i.push(e);for(let n of i){let{classList:s}=n;for(let o of Array.from(s))s.remove(o),s.add(t(o))}return e}var sd=1.4;function vg(e,t,i=.5){let{center:n,zoom:s}=e.cameraForBounds(t),o=Math.max(s-i,0);return{center:n,zoom:o,speed:sd}}function xg(e){switch(e){case"street":return 15;case"neighborhood":case"postcode":case"locality":case"oaza":return 14;case"place":case"city":return 13;case"district":return 9;case"region":case"prefecture":return 6;case"country":return 4;default:return 16}}function _g(e,t){return`https://api.mapbox.com/styles/v1/${e}/${t}/static/`}var od='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 3.8a1 1 0 0 1 1.4 0L9 7.58l3.8-3.8a1 1 0 1 1 1.4 1.42L10.42 9l3.8 3.8a1 1 0 0 1-1.42 1.4L9 10.42l-3.8 3.8a1 1 0 0 1-1.4-1.42L7.58 9l-3.8-3.8a1 1 0 0 1 0-1.4Z" fill="currentColor"/></svg>',wg='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/></svg>',U0=_g("mapbox","satellite-streets-v11"),z0="20d01",j0=["mapbox.com","mapbox.cn","tilestream.net"],V0=Qt(`
<template>
  <div class="MapboxSearch">
    <div class="Label" role="label" aria-live="polite" aria-atomic="true">
    </div>
    <div class="Results" aria-hidden="true">
      <div class="ResultsList" role="listbox">
      </div>
      <div class="ResultsAttribution" aria-hidden="true">
        <a href="https://www.mapbox.com/search-service" target="_blank" tabindex="-1">
          Powered by Mapbox
        </a>
      </div>
    </div>
  </div>
</template>
`),G0=Qt(`
<template>
  <div class="Suggestion" role="option" tabindex="-1">
    <div class="SuggestionIcon" aria-hidden="true"></div>
    <div class="SuggestionText">
      <div class="SuggestionName"></div>
      <div class="SuggestionDesc"></div>
    </div>
  </div>
</template>
`),Y0=Qt(`
<template>
  <div class="SearchBox">
    <div class="SearchIcon"></div>
    <input class="Input" type="text" />
    <div class="ActionIcon">
      <button aria-label="Clear" class="ClearBtn" type="button">${od}</button>
      <div class="LoadingIcon">${wg}</div>
    </div>
  </div>
</template>
`),q0=Qt(`
<template>
  <div class="Geocoder">
    <div class="SearchIcon"></div>
    <input class="Input" type="text" />
    <div class="ActionIcon">
      <button aria-label="Clear" class="ClearBtn" type="button">${od}</button>
      <div class="LoadingIcon">${wg}</div>
    </div>
  </div>
</template>
`);function an(){return"mbx"+new Ut().id.slice(0,8)}function ss(e){try{return JSON.parse(e)}catch{return null}}function rd(e,t){if(e==null||t==null||typeof e!="object"||typeof t!="object")return e===t;let i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(let s of i)if(!rd(e[s],t[s]))return!1;return!0}function lg(e,t){let i=Math.pow(10,t);return Math.round(e*i)/i}function X0(e){return!!e.match(/localhost|[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}|::1|\.local|^$/gi)}function $0(e){return!!j0.some(t=>e.includes(t))}var ao,Un,zn,Ci=class extends HTMLElement{constructor(){super(...arguments),S(this,ao,an()),S(this,Un,void 0),S(this,zn,e=>`${d(this,ao)}--${e}`)}get template(){return null}get templateStyle(){return null}get templateUserStyle(){return null}clonedCallback(e,t){let i=o=>o.replace(e,t);ag(this,i);let n=Array.from(this.querySelectorAll("style"));for(let o of n)o.textContent=_a(o.textContent,i);n.length&&A(this,Un,n[n.length-1]);let s=Array.from(this.querySelectorAll(`[id^="${e}"]`));for(let o of s)o.id=o.id.replace(e,t)}connectedCallback(){if(this.childElementCount>0){let n=this.dataset.seed,s=d(this,ao);n&&n!==s&&(this.clonedCallback(n,s),this.dataset.seed=s);return}this.dataset.seed=d(this,ao);let e=this.template;if(e){let n=this.prepareTemplate(e);this.appendChild(n)}let t=this.templateStyle;if(t){let n=document.createElement("style");n.textContent=this.prepareCSS(t),this.appendChild(n)}let i=document.createElement("style");this.templateUserStyle&&(i.textContent=this.prepareCSS(this.templateUserStyle)),this.appendChild(i),A(this,Un,i)}prepareTemplate(e){let t=e.content.firstElementChild;return ag(t.cloneNode(!0),d(this,zn))}prepareCSS(e){return yg(e,d(this,zn))}updateTemplateUserStyle(e){d(this,Un)&&(d(this,Un).textContent=this.prepareCSS(e))}querySelector(e){return super.querySelector(_a(e,d(this,zn)))}querySelectorAll(e){return super.querySelectorAll(_a(e,d(this,zn)))}addEventListener(e,t,i){super.addEventListener(e,t,i)}removeEventListener(e,t,i){super.removeEventListener(e,t,i)}dispatchEvent(e){return super.dispatchEvent(e)}};ao=new WeakMap;Un=new WeakMap;zn=new WeakMap;var K0='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 16A7 7 0 1 0 9 2a7 7 0 0 0 0 14ZM6.88 4.88a2.58 2.58 0 0 1 1.83-.75h1.08a2.58 2.58 0 0 1 2.59 2.58v.16c0 1-.53 1.94-1.4 2.46l-.56.34c-.27.16-.45.42-.52.71-.03.14-.14.25-.28.25H8.38a.23.23 0 0 1-.24-.25c.08-.91.59-1.74 1.38-2.21l.56-.34c.34-.2.54-.57.54-.96V6.7a.83.83 0 0 0-.83-.83H8.71a.83.83 0 0 0-.84.83v.18a.87.87 0 1 1-1.75 0V6.7c0-.69.28-1.34.76-1.83ZM10 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" fill="currentColor"/></svg>',Z0='<svg width="48" height="56" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#a)"><path d="m24 50.4 13.79-14.12a18.82 18.82 0 0 0 4.23-20.86 19.23 19.23 0 0 0-7.19-8.6 19.76 19.76 0 0 0-21.66 0c-3.21 2.11-5.71 5.1-7.19 8.6a18.82 18.82 0 0 0 4.23 20.86L24 50.4Z" fill="currentColor"/><path d="M37.26 35.75 24 49.34 10.75 35.76l-.01-.01A18.07 18.07 0 0 1 6.68 15.7a18.48 18.48 0 0 1 6.9-8.26 19 19 0 0 1 20.84 0 18.48 18.48 0 0 1 6.9 8.26 18.07 18.07 0 0 1-4.06 20.04Z" stroke="#fff" stroke-width="1.5"/></g><circle cx="24" cy="22.45" fill="#fff" r="5.85"/><defs><filter id="a" x=".5" y=".6" width="47" height="54.8" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="2"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_17_871"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_17_871" result="shape"/></filter></defs></svg>',J0=`<svg width="24" height="24" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M1.08 14.94 5.625 3.06h1.17l-3.42 11.88H1.08Zm15.885 0L12.42 3.06h-1.17l3.42 11.88h2.295Zm-6.86-1.44H7.946l.128-2.61h1.912l.119 2.61Zm-.217-4.77H8.181l.088-1.8h1.537l.082 1.8ZM9.74 5.49h-1.4l.049-.99h1.306l.045.99Z" fill="currentColor" />
</svg>`,Q0=`<!-- TODO: I'm not sure if the way I added the circle will "scale" properly, need to check that -->
<svg width="24" height="24" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path fill="none" stroke="currentColor" stroke-width="1.5" d="M4 7a5 5 0 1 1 10 0c0 3.025-3.28 6.713-5 9-1.72-2.287-5-5.975-5-9z"></path>
    <circle cx="9" cy="7" r="2" fill="currentColor"></circle>
</svg>`,tw=`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>
</svg>`,ew="@mapbox/search-js-web",Gl="1.3.0",iw=`https://api.mapbox.com/search-js/v${Gl}/img/style-toggle-satellite.jpg`,nw=`https://api.mapbox.com/search-js/v${Gl}/img/style-toggle-default.jpg`,sw=767,ow=`@media only screen and (max-width: ${sw}px)`,ad={variables:{unit:["mobile","16px","14px"],unitHeader:["mobile","24px","18px"],minWidth:"min(300px, 100vw)",spacing:"0.75em",padding:"0.5em 0.75em",paddingFooterLabel:"0.5em 0.75em",paddingModal:"1.25em",colorText:"rgba(0, 0, 0, 0.75)",colorPrimary:"#4264FB",colorSecondary:"#667F91",colorBackground:"#fff",colorBackgroundHover:"#f5f5f5",colorBackgroundActive:"#f0f0f0",colorBackdrop:"rgba(102, 127, 145, 0.3)",border:"none",borderRadius:"4px",boxShadow:`
      0 0 10px 2px rgba(0, 0, 0, 0.05),
      0 0 6px 1px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.1)
    `,lineHeight:"1.2em",fontFamily:`
      -apple-system, BlinkMacSystemFont,
      avenir next, avenir,
      segoe ui,
      helvetica neue, helvetica,
      Ubuntu, roboto, noto, arial, sans-serif
    `,fontWeight:"normal",fontWeightSemibold:"600",fontWeightBold:"bold",duration:"150ms",curve:"ease-out"},icons:{close:od,question:K0,marker:Z0,street:J0,addressMarker:Q0,search:tw},images:{styleToggleDefault:nw,styleToggleSatellite:iw}};function Yt(e,t={}){let i=I(I({},ad.variables),t.variables||{}),n=t.cssText||"",s="";for(let[o,r]of Object.entries(i)){if(!Array.isArray(r)){s+=`--${o}: ${r};`;continue}if(r[0]!=="mobile"){let c=JSON.stringify(r);throw new Error(`Unsupported expression in theme variables: ${o} ${c}`)}let[,a,l]=r;n+=`${ow} { ${e} { --${o}: ${a} !important; } }`,s+=`--${o}: ${l};`}return n+`${e} { ${s} }`}function ae(e,t={}){return I(I({},ad.icons),t.icons||{})[e]}function rw(e,t={}){return I(I({},ad.images),t.images||{})[e]}var jn,xh,cg=class{constructor(e,t,i){S(this,jn,void 0),S(this,xh,{placement:"bottom-start",flip:!1,offset:10}),this.update=()=>Pe(this,null,function*(){let n={placement:this.options.placement,middleware:[uh(this.options.offset),this.options.flip&&ch()].filter(Boolean)},{x:s,y:o}=yield Nm(this.referenceEl,this.floatingEl,n);Object.assign(this.floatingEl.style,{left:`${s}px`,top:`${o}px`})}),this.referenceEl=e,this.floatingEl=t,A(this,jn,I(I({},d(this,xh)),i)),this.destroy=Bm(this.referenceEl,this.floatingEl,this.update)}get options(){return d(this,jn)}set options(e){A(this,jn,I(I({},d(this,jn)),e))}};jn=new WeakMap;xh=new WeakMap;var cn=".Geocoder *,.MapboxAddressConfirmation *,.MapboxAddressConfirmationFeature *,.MapboxAddressConfirmationNoFeature *,.MapboxAddressMinimap *,.MapboxSearch *,.SearchBox *{box-sizing:border-box!important}[role=button]{cursor:pointer}.MapboxSearch{--width:0;display:none}.Results{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);min-width:var(--minWidth);overflow-y:auto;position:absolute;transform:translateZ(0);transition:visibility var(--duration);width:var(--width);z-index:1000}.Results:not([aria-hidden=true]){visibility:visible}.Results[aria-hidden=true]{animation:fadein var(--duration) var(--curve) reverse forwards;visibility:hidden}.Suggestion{align-items:center;display:flex;padding:var(--padding)}.Suggestion:hover{cursor:pointer}.Suggestion[aria-selected=true]{background-color:var(--colorBackgroundHover)}.Suggestion:active{background-color:var(--colorBackgroundActive)}.SuggestionName{font-weight:var(--fontWeightBold)}.SuggestionIcon{margin-right:6px}.SuggestionIcon[aria-hidden=true]{display:none}.ResultsAttribution{padding:var(--paddingFooterLabel)}.ResultsAttribution a{color:var(--colorSecondary)}.ResultsAttribution a:not(:hover){text-decoration:none}.ResultsList{list-style:none;margin:0;padding:0}.Label{display:none}.Geocoder,.SearchBox{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--padding);padding-bottom:0;padding-top:0;position:relative;width:100%}.SearchIcon{fill:#757575;left:.5em}.ActionIcon,.SearchIcon{bottom:0;height:20px;margin:auto 0;position:absolute;top:0;width:20px}.ActionIcon{right:.5em}.ActionIcon>button{background:none;border:none;color:inherit;cursor:pointer;font:inherit;height:100%;outline:inherit;padding:0;width:100%}.ActionIcon>button:hover{background:none!important}.ClearBtn{display:none}.ClearBtn:hover{color:#909090}.ClearBtn:focus{border:1.5px solid #909090;border-radius:4px}.LoadingIcon{-moz-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;-webkit-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;display:none;height:100%}@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.Input{background-color:transparent;border:0;color:#404040;color:rgba(0,0,0,.75);font:inherit;height:36px;margin:0;overflow:hidden;padding:0 40px;text-overflow:ellipsis;white-space:nowrap;width:100%}.Input::-ms-clear{display:none}.Input:focus{border:thin dotted;border-radius:var(--borderRadius);box-shadow:none;color:#404040;color:rgba(0,0,0,.75);outline:0}mapbox-address-confirmation-feature[aria-hidden=true],mapbox-address-confirmation-no-feature[aria-hidden=true]{display:none}.MapboxAddressConfirmation{align-items:center;background-color:var(--colorBackdrop);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;transform:translateZ(0);z-index:1000}.MapboxAddressConfirmation:not([aria-hidden=true]){animation:fadein var(--duration) var(--curve) forwards;visibility:visible}.MapboxAddressConfirmation[aria-hidden=true]{visibility:hidden}.ContentFeature,.ContentNoFeature{width:var(--minWidth)}.Modal{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--paddingModal);width:100%}@media screen and (max-width:480px){.MapboxAddressConfirmation{align-items:flex-end}.ContentFeature,.ContentNoFeature{width:100%}.Modal{border-bottom-left-radius:0;border-bottom-right-radius:0}}.ModalHeader{align-items:center;color:var(--colorPrimary);display:flex;font-size:var(--unitHeader);font-weight:var(--fontWeightBold);margin-bottom:var(--spacing);user-select:none;width:100%}.ModalMap{height:calc(var(--minWidth)*9/16);margin-left:calc(var(--paddingModal)*-1);width:calc(100% + var(--paddingModal)*2)}.ModalMap[aria-hidden=true]{display:none}.Icon{height:var(--unitHeader);width:var(--unitHeader)}.Icon.IconClose{color:var(--colorSecondary)}.ModalHeaderTitle{flex:1;margin-left:.25em}.ModalFooter{color:var(--colorSecondary);margin-top:var(--spacing);text-align:center}.ModalFooter[aria-hidden=true]{display:none}.ModalSubheader{font-weight:var(--fontWeightBold);user-select:none}.ModalDescription{color:var(--colorPrimary)}.ModalAddress,.ModalSubheader{margin-bottom:var(--spacing)}.ModalAddress.ModalAddressApprove{color:var(--colorPrimary)}.Button{border-radius:var(--borderRadius);cursor:pointer;font-weight:var(--fontWeightSemibold);margin-top:var(--spacing);padding:var(--padding);text-align:center;user-select:none;width:100%}.Button[aria-hidden=true]{display:none}.Button.ButtonPrimary{background-color:var(--colorPrimary);color:var(--colorBackground)}.Button.ButtonSecondary{border:1px solid var(--colorSecondary);color:var(--colorSecondary)}@keyframes fadein{0%{opacity:0}to{opacity:1}}.MapboxAddressMinimap{font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight)}.MapboxAddressMinimap[aria-hidden=true]{display:none}.MinimapImageContainer{border-radius:var(--borderRadius);overflow:hidden}.MinimapImage{height:unset;max-height:unset;max-width:unset;position:relative;width:unset}.MinimapInnerFrame{border:var(--border);border-radius:inherit;height:inherit;left:0;overflow:hidden;position:absolute;top:0;width:inherit}.MinimapMarker{left:50%;position:absolute;top:50%}.MinimapMarker>svg{color:var(--colorPrimary);display:block!important}.MinimapAttributionLogo{bottom:0;left:0;margin:0 0 6px 6px;position:absolute}.MinimapAttributionLogo a{cursor:pointer;display:block;height:23px;width:88px}.MinimapAttributionText{background-color:hsla(0,0%,100%,.65);bottom:0;font:11px/16px Helvetica Neue,Arial,Helvetica,sans-serif;padding:0 5px;position:absolute;right:0}.MinimapAttributionText a{color:rgba(0,0,0,.75);text-decoration:none}.MinimapAttributionText a:hover{color:inherit;text-decoration:underline}.MinimapAttributionText a:not(:first-child){margin-left:3px}.MinimapStyleToggle{background-position:0;background-repeat:no-repeat;background-size:contain;border:2px solid #fff;border-radius:3px;box-shadow:var(--boxShadow);cursor:pointer;height:2em;position:absolute;right:var(--spacing);top:var(--spacing);width:2em}.MinimapFooter{color:var(--colorSecondary);font-family:var(--fontFamily);font-size:var(--unit);margin-top:var(--spacing)}.MinimapFooter[aria-hidden=true]{display:none}.MinimapEditButtons{bottom:26px;display:flex;font-family:var(--fontFamily);position:absolute;right:var(--spacing)}.MinimapEditButtons .Button{box-shadow:var(--boxShadow)}.MinimapButtonCancel{background-color:var(--colorBackground);margin-left:var(--spacing)}.draggable{cursor:move;cursor:grab}.draggable:active{cursor:grabbing}",it=class extends CustomEvent{constructor(e,t){super(e,{composed:!0,detail:t})}clone(e){let t=new it(this.type,this.detail);return e&&Object.defineProperty(t,"target",{value:e}),t}},aw="Type in 2 or more characters for results.",lw="When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.",cw="No search results.",uw=(e,t,i)=>`${t} ${t===1?"result is":"results are"} available. ${e}. ${i} of ${t} is selected.`,hw=e=>`${e} ${e===1?"result is":"results are"} available. Use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.`;function Sg(e){let t=e.currentTarget;(e.key===" "||e.key==="Enter")&&(e.preventDefault(),e.stopPropagation(),t.dispatchEvent(new MouseEvent("click",{bubbles:!0,composed:!0})))}var Eg="search-listbox__description",ld=e=>{let t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.setAttribute("role","status"),t.setAttribute("style","border: 0px;clip: rect(0px, 0px, 0px, 0px);height: 1px;margin-bottom: -1px;margin-right: -1px;overflow: hidden;padding: 0px;position: absolute;white-space: nowrap;width: 1px;");let i=document.createElement("div");return i.setAttribute("id",`${e}--${Eg}`),t.appendChild(i),t},ug=(e,t)=>{var i;let n=(i=document.body.querySelector(`[id="${t}--${Eg}"]`))!=null?i:null;n&&(n.textContent=e)},dw=e=>{e.name=e.name+" address-search",e.setAttribute("data-lpignore","true")},fw=(e,t,i)=>{let n=null,s=!t||t.length===0;if(e?.length<2)n=aw+" "+lw;else if(s)n=cw;else if(i!==void 0){let o=t[i],r=o.name||o.feature_name||o.properties.name;n=uw(r,t.length,i+1)}else n=hw(t.length);return n},_h=(e,t)=>{switch(t){case 0:return e.matching_name||e.feature_name||e.address_line1;case 2:return e.name;case 1:return e.properties.name;default:return""}},pw=(e,t)=>{switch(t){case 0:return e.description;case 2:return e.feature_type==="poi"?e.full_address:e.place_formatted;case 1:return e.properties.place_formatted;default:return""}};function yh(e,t){return`${e}-${t}`}var Ct,At,lo,qe,co,wa,uo,Sa,wh,Sh,Mg,Ea,Ma,Ca,jl,ho,Vn,La,Ro=class extends Ci{constructor(){super(...arguments),S(this,Sa),S(this,Sh),this.suggestions=null,S(this,Ct,null),S(this,At,void 0),S(this,lo,void 0),S(this,qe,void 0),S(this,co,void 0),S(this,wa,null),S(this,uo,void 0),S(this,Ea,{}),S(this,Ma,{}),S(this,Ca,e=>{let{Results:t}=d(this,At),i=e.target;if(i.dataset.mapboxSuccess){delete i.dataset.mapboxSuccess;return}let n=i.value;this.renderAriaMessage(),t.setAttribute("aria-busy","true"),this.dispatchEvent(new it("input",{lastInput:e.data,inputText:n}))}),this.renderAriaMessage=()=>{var e;let t=fw((e=this.input)==null?void 0:e.value,this.suggestions,this.selectedIndex);ug(t,this.dataset.seed)},this.clearAriaMessage=()=>{ug("",this.dataset.seed)},this.handleSuggest=e=>{if(this.suggestions=e,(!e||e.length===0)&&this.renderAriaMessage(),!e){this.hideResults();return}Po(this,Sh,Mg).call(this),e.length&&Po(this,Sa,wh).call(this);let{Results:t}=d(this,At);t.setAttribute("aria-busy","false")},this.handleError=()=>{let{Results:e}=d(this,At);e.setAttribute("aria-busy","false"),this.hideResults()},S(this,jl,(e,t)=>Pe(this,null,function*(){let i=this.input;i&&(i.dataset.mapboxSuccess="true");let n={suggestion:e,selectedIndex:t};this.dispatchEvent(new it("select",n)),this.hideResults()})),S(this,ho,()=>{let e=this.input;delete e.dataset.mapboxSuccess,this.dispatchEvent(new it("focus")),this.renderAriaMessage(),Po(this,Sa,wh).call(this)}),S(this,Vn,()=>{document.activeElement!==this.input&&(this.dispatchEvent(new it("blur")),this.clearAriaMessage())}),this.handleArrowUp=()=>{this.selectedIndex===void 0?this.selectedIndex=this.suggestions.length-1:this.selectedIndex===0?this.selectedIndex=void 0:this.selectedIndex=Math.max(0,this.selectedIndex-1)},this.handleArrowDown=()=>{this.selectedIndex===void 0?this.selectedIndex=0:this.selectedIndex===this.suggestions.length-1?this.selectedIndex=void 0:this.selectedIndex=Math.min(this.selectedIndex+1,this.suggestions.length-1)},S(this,La,e=>{var t;if((t=this.suggestions)!=null&&t.length){if(e.key==="ArrowDown"){e.preventDefault(),this.handleArrowDown();return}if(e.key==="ArrowUp"){e.preventDefault(),this.handleArrowUp();return}if(e.key==="Escape"){this.hideResults();return}if(this.selectedIndex!==void 0&&e.key==="Enter"){e.preventDefault(),d(this,jl).call(this,this.suggestions[this.selectedIndex],this.selectedIndex);return}}})}get template(){return V0}get templateStyle(){return cn}get templateUserStyle(){return Yt(".MapboxSearch",this.theme)}get input(){return d(this,co)}set input(e){let t=d(this,co);t&&(t.removeEventListener("input",d(this,Ca)),t.removeEventListener("focus",d(this,ho)),t.removeEventListener("blur",d(this,Vn)),t.removeEventListener("keydown",d(this,La)),d(this,Ct)&&d(this,Ct).destroy()),e&&(e.addEventListener("input",d(this,Ca)),e.addEventListener("focus",d(this,ho)),e.addEventListener("blur",d(this,Vn)),e.addEventListener("keydown",d(this,La)),e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls",d(this,qe)),this.isConnected&&A(this,Ct,new cg(e,d(this,At).Results,this.popoverOptions))),A(this,co,e)}get searchService(){return d(this,wa)}set searchService(e){A(this,wa,e)}get selectedIndex(){return d(this,uo)}set selectedIndex(e){let t=d(this,uo);A(this,uo,e);let{ResultsList:i}=d(this,At),n=yh(d(this,qe),e);if(e!==void 0?(this.input.setAttribute("aria-activedescendant",n),i.setAttribute("aria-activedescendant",n)):(this.input.removeAttribute("aria-activedescendant"),i.removeAttribute("aria-activedescendant")),t!==e){let s=yh(d(this,qe),t),o=i.querySelector(`#${s}`);if(o?.removeAttribute("aria-selected"),o?.setAttribute("tabindex","-1"),e!==void 0){let r=i.querySelector(`#${n}`);r?.setAttribute("aria-selected","true"),r?.setAttribute("tabindex","0")}}this.renderAriaMessage()}hideResults(){let{Results:e,ResultsList:t}=d(this,At);e.setAttribute("aria-hidden","true"),this.input.setAttribute("aria-expanded","false"),t.removeAttribute("aria-activedescendant"),this.input.removeAttribute("aria-activedescendant")}renderItem(e){let t=this.prepareTemplate(G0);return t.id=yh(d(this,qe),e),t}fillItem(e,t,i,n){let s=e.querySelector('[class$="SuggestionIcon"]'),o=e.querySelector('[class$="SuggestionName"]'),r=e.querySelector('[class$="SuggestionDesc"]');this.searchService===0?(s.innerHTML=ae(t.accuracy==="street"?"street":"addressMarker",this.theme),s.removeAttribute("aria-hidden")):s.setAttribute("aria-hidden","true"),o.textContent=r.textContent="",o.textContent=_h(t,this.searchService),r.textContent=pw(t,this.searchService),i===this.selectedIndex?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected"),e.setAttribute("aria-posinset",(i+1).toString()),e.setAttribute("aria-setsize",n.toString())}get theme(){return d(this,Ea)}set theme(e){A(this,Ea,e),!(!d(this,At)||!e)&&this.updateTemplateUserStyle(Yt(".MapboxSearch",e))}get popoverOptions(){return d(this,Ma)}set popoverOptions(e){A(this,Ma,e),d(this,Ct)&&(d(this,Ct).options=e,d(this,Ct).update())}connectedCallback(){super.connectedCallback(),this.dataSeed=this.dataset.seed,A(this,lo,this.dataset.seed+"-Label"),A(this,qe,this.dataset.seed+"-ResultsList"),this.input&&this.input.setAttribute("aria-controls",d(this,qe)),A(this,At,ln(this,{MapboxSearch:".MapboxSearch",Results:".Results",ResultsList:".ResultsList",Label:".Label"}));let{Results:e,ResultsList:t,Label:i}=d(this,At);i.id=d(this,lo),t.id=d(this,qe),t.setAttribute("aria-labelledby",d(this,lo)),e.addEventListener("blur",d(this,Vn)),!d(this,Ct)&&this.input&&A(this,Ct,new cg(this.input,d(this,At).Results,this.popoverOptions)),requestAnimationFrame(()=>{d(this,Ct)&&d(this,Ct).update()})}disconnectedCallback(){this.input=null;let{Results:e}=d(this,At);e.removeEventListener("blur",d(this,Vn)),d(this,Ct)&&d(this,Ct).destroy()}focus(){document.activeElement===this.input?d(this,ho).call(this):this.input.focus()}blur(){this.input.blur()}updatePopover(){d(this,Ct)&&d(this,Ct).update()}};Ct=new WeakMap;At=new WeakMap;lo=new WeakMap;qe=new WeakMap;co=new WeakMap;wa=new WeakMap;uo=new WeakMap;Sa=new WeakSet;wh=function(){if(!this.suggestions||!this.suggestions.length)return;let{Results:e,MapboxSearch:t}=d(this,At),i=this.input.getBoundingClientRect();t.style.setProperty("--width",`${i.width}px`),t.style.setProperty("display","block"),this.input.setAttribute("aria-expanded","true"),e.removeAttribute("aria-hidden"),this.selectedIndex=void 0};Sh=new WeakSet;Mg=function(){let{ResultsList:e}=d(this,At);if(!this.suggestions||!this.suggestions.length){e.innerHTML="",this.hideResults();return}let t=O0(e);if(this.suggestions.length>t.length)for(let i=t.length;i<this.suggestions.length;i++){let n=this.renderItem(i);t.push(n),n.onmouseenter=()=>{this.selectedIndex=i},n.onmouseleave=()=>{this.selectedIndex=void 0},e.appendChild(n)}if(this.suggestions.length<t.length)for(let i=this.suggestions.length;i<t.length;i++)t[i].remove();for(let i=0;i<this.suggestions.length;i++){let n=this.suggestions[i],s=t[i];this.fillItem(s,n,i,this.suggestions.length),s.onclick=()=>{d(this,jl).call(this,n,i)}}};Ea=new WeakMap;Ma=new WeakMap;Ca=new WeakMap;jl=new WeakMap;ho=new WeakMap;Vn=new WeakMap;La=new WeakMap;window.MapboxSearchListbox=Ro;window.customElements.get("mapbox-search-listbox")||customElements.define("mapbox-search-listbox",Ro);var mw=new Set(["street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code"]),gw=new Set(["off","on","true","false"]);function Cg(e){let t=e.parentNode;for(;t;){if(t instanceof HTMLFormElement)return t;t=t.parentNode}return null}function bw(e){let t=e||document;return Array.from(t.querySelectorAll('input[autocomplete~="address-line1"], input[autocomplete~="street-address"]'))}var yw="section-",vw="section-default",xw="section-shipping",_w="section-billing";function cd(e){let t=Array.from(e.querySelectorAll("[autocomplete]")).filter(n=>{let s=n.tagName.toLowerCase();return s==="input"||s==="select"||s==="textarea"}),i=[];for(let n of t){if(!F0(n))continue;let s=n.getAttribute("autocomplete")||"";if(!s||gw.has(s))continue;let o=s.toLowerCase().split(" ");if(o.length>3)continue;let r=o[o.length-1];if(!mw.has(r))continue;o.pop();let a=vw;if(o.length){let l=o[o.length-1];l==="shipping"&&(a=xw,o.pop()),l==="billing"&&(a=_w,o.pop())}if(o.length){let l=o[o.length-1];l.startsWith(yw)&&(a=l)}i.push({input:n,section:a,field:r})}return i}function Do(e,t){let i=[],n=[],s=cd(e),o=null;for(let{input:r,section:a,field:l}of s){let c=i.length-1,u=!1;if(i.length?(n[c]!==a||i[c][l])&&(u=!0):u=!0,u){if(o)break;i.push({[l]:r}),n.push(a),c++}else i[c][l]=r;r===t&&(o=i[c])}return o??{}}function Lg(e,t,i){var n;let s=Do(e,t),o=[i.address_line1,i.address_line2,i.address_line3].filter(a=>!!a).join(", ");Ce(s["street-address"],s["address-line2"]?i.address_line1||"":o),Ce(s["address-line1"],i.address_line1||""),Ce(s["address-line2"],i.address_line2||""),Ce(s["address-level1"],i.address_level1||""),Ce(s["address-level2"],i.address_level2||""),Ce(s["address-level3"],i.address_level3||"");let r=i.country_code||((n=i.metadata)==null?void 0:n.iso_3166_1)||"";if(s.country&&s.country instanceof HTMLSelectElement){let a=s.country.querySelector("option").value;a===""&&(a=s.country.querySelectorAll("option")[1].value);let l=a===a.toUpperCase();Ce(s.country,l?r.toUpperCase():r)}else Ce(s.country,r);Ce(s["country-name"],i.country||""),Ce(s["postal-code"],i.postcode||"")}function ww(e,t){let i=Do(e,t),n={};for(let[s,o]of Object.entries(i))o?.value&&(n[s]=o.value);return n}function Tg(e){let t=[];return e["street-address"]?t.push(e["street-address"]):t.push(e["address-line1"]||""),t.push(e["address-line2"]||""),t.push(e["address-line3"]||""),t.push(e["address-level3"]||""),t.push(e["address-level2"]||""),t.push(e["address-level1"]||""),t.push(e["postal-code"]||""),e["country-name"]?t.push(e["country-name"]):t.push(e.country||""),t.filter(i=>!!i).map(i=>i.trim()).join(", ")}function Ag(e,t){let i=Cg(t);if(!i)return;let n=Wn(e);Lg(i,t,n);let s=Do(i,t);s["address-line2"]&&!n.address_line2&&s["address-line2"].focus()}function Sw(e){var t;let i={},n=[e.properties.address_line1,e.properties.address_line2,e.properties.address_line3].filter(s=>!!s).join(", ");return i["street-address"]=n,i["address-line1"]=e.properties.address_line1,i["address-line2"]=e.properties.address_line2,i["address-line3"]=e.properties.address_line3,i["address-level1"]=e.properties.address_level1,i["address-level2"]=e.properties.address_level2,i["address-level3"]=e.properties.address_level3,i.country=(t=e.properties.metadata)==null?void 0:t.iso_3166_1,i["country-name"]=e.properties.country,i["postal-code"]=e.properties.postcode,i}function Ew(e,t){for(let[i,n]of Object.entries(e))if(t[i]!==n)return!0;return!1}var Mw=e=>e.filter((t,i,n)=>{let s=_h(t,0);return t.accuracy!=="street"||n.findIndex(o=>s===_h(o,0))===i}),ns=(e,t,i)=>{let o=i?t||"address-line1":"new-password";e&&(e.autocomplete=o)},Cw=(e,t,i)=>{if(!e||!i)return;ns(e,t,!0);let n={properties:Jt(I({},i),{address_line1:i.address_line1+" ",postcode:null})};Ag(n,e),ns(e,t,!1),e?.focus()},Lw=class{constructor(){this.feedbackEnabled=!0,this.autofillSessionToken=new Ut,this.autofillSessionEnabled=!1,this.detectBrowserAutofillEnabled=!1}},me=new Lw;Object.defineProperty(me,"autofillSessionToken",{configurable:!1,writable:!1});var Tw=Qt(`
<template>
  <div class="MapboxAddressConfirmation" aria-hidden="true">
    <mapbox-address-confirmation-feature class="ContentFeature"></mapbox-address-confirmation-feature>
    <mapbox-address-confirmation-no-feature class="ContentNoFeature"></mapbox-address-confirmation-no-feature>
  </div>
</template>
`),Ta,ie,Gn,Aa,ud=class extends Ci{constructor(){super(...arguments),S(this,Ta,!1),S(this,ie,void 0),S(this,Gn,void 0),S(this,Aa,{})}get template(){return Tw}get templateStyle(){return cn}get templateUserStyle(){return Yt(".MapboxAddressConfirmation",this.theme)}get theme(){return d(this,Aa)}set theme(e){if(A(this,Aa,e),!d(this,ie)||!e)return;this.updateTemplateUserStyle(Yt(".MapboxAddressConfirmation",e));let{ContentFeature:t,ContentNoFeature:i}=d(this,ie);t.theme=e,i.theme=e}connectedCallback(){super.connectedCallback(),A(this,ie,ln(this,{MapboxAddressConfirmation:".MapboxAddressConfirmation",ContentFeature:".ContentFeature",ContentNoFeature:".ContentNoFeature"}));let{MapboxAddressConfirmation:e}=d(this,ie);e.setAttribute("aria-hidden","true");let t=this.theme;if(t){let{ContentFeature:i,ContentNoFeature:n}=d(this,ie);i.theme=t,n.theme=t}}disconnectedCallback(){A(this,Gn,null)}hide(){var e;if(A(this,Ta,!1),!d(this,ie))return;let{MapboxAddressConfirmation:t}=d(this,ie);t.setAttribute("aria-hidden","true"),(e=d(this,Gn))==null||e.deactivate(),Eh.default.off()}show(e,t,i){return Pe(this,null,function*(){var n;if(!d(this,ie))return{type:"cancel"};let{MapboxAddressConfirmation:s,ContentFeature:o,ContentNoFeature:r}=d(this,ie),{accessToken:a,minimap:l=!1,theme:c,footer:u}=t;this.theme=c,i?(o.removeAttribute("aria-hidden"),r.setAttribute("aria-hidden","true"),o.minimap=l,o.accessToken=a,o.footer=u,o.update(i,e)):(o.setAttribute("aria-hidden","true"),r.removeAttribute("aria-hidden"),r.update(e)),A(this,Ta,!0),s.removeAttribute("aria-hidden"),Eh.default.on();let h=i?o:r;return A(this,Gn,eg(s,{fallbackFocus:h,escapeDeactivates:()=>(this.hide(),!0)})),(n=d(this,Gn))==null||n.activate(),new Promise(f=>{let p=h,m=g=>{p.removeEventListener("result",m);let b=g.detail;this.hide(),f(b==="change"?{type:"change",feature:i}:{type:b})};p.addEventListener("result",m)})})}tryShow(e,t){return Pe(this,null,function*(){if(!d(this,ie))return{type:"cancel"};let{accessToken:i,options:n={}}=t,s=new nh(I({accessToken:i},n)),o=Tg(e),a=(yield s.validate(o,{sessionToken:me.autofillSessionToken})).features[0];if(a){let l=u=>u.properties.match_code.confidence===oh.exact,{skipConfirmModal:c=l}=t;if(c(a))return{type:"nochange"}}return yield this.show(e,t,a)})}};Ta=new WeakMap;ie=new WeakMap;Gn=new WeakMap;Aa=new WeakMap;window.MapboxAddressConfirmation=ud;window.customElements.get("mapbox-address-confirmation")||customElements.define("mapbox-address-confirmation",ud);var vh=new ud;function Aw(e){return Pe(this,arguments,function*(t,i={}){var n;let{sections:s=[]}=i;vh.parentNode||document.body.appendChild(vh);let o={type:"nochange"},r=bw(t),a=cd(t),l=Array.from(document.querySelectorAll("mapbox-search-listbox"));for(let c of r){if(s.length){let g=a.find(b=>b.input===c);if(!g||!s.includes(g.section))continue}let u=ww(t,c),h=l.find(g=>g.input===c),f=h?.autofillHost;if(f){let g=f.retrieveFeature;if(g){let b=Sw(g);if(!Ew(u,b))continue}}let p=i.accessToken||me.accessToken,m=yield vh.tryShow(u,Jt(I({},i),{accessToken:p}));if(m.type==="change"){let g=Do(t,c);if((n=g["address-line2"])!=null&&n.value&&(m.feature.properties.address_line2=g["address-line2"].value),h)f.simulateRetrieve(m.feature);else{c.dataset.mapboxSuccess="true";let b=Wn(m.feature);Lg(t,c,b)}}m.type==="change"&&o.type!=="cancel"&&(o=m),m.type==="cancel"&&(o=m)}return o})}function kg(e,t,i,n,s){if(t){let o=Qt(`
        <span>
          <span></span>
          <br />
          <span></span>
        </span>
      `),[r,a]=Array.from(o.querySelectorAll("span > span"));if(i&&n)r.textContent=i,a.textContent=n;else{let l=t.split(",");r.textContent=l[0].trim(),a.textContent=l.slice(1).join(",").trim()}if(!s){if(e["address-line2"]){let l=document.createElement("span");l.textContent=e["address-line2"],o.insertBefore(l,a),o.insertBefore(document.createElement("br"),a)}if(e["address-line3"]){let l=document.createElement("span");l.textContent=e["address-line3"],o.insertBefore(l,a),o.insertBefore(document.createElement("br"),a)}}return o}else{let o=e["street-address"]||e["address-line1"]||"",r=e["address-line2"],a=e["address-line3"],l=[e["address-level4"]||"",e["address-level3"]||"",e["address-level2"]||"",`${e["address-level1"]||""} ${e["postal-code"]||""}`,e.country||e["country-name"]||""].filter(Boolean).join(", "),u=[o,r,a,l].filter(Boolean).map(f=>`<span>${f}</span>`).join("<br />");return Qt(`
        <span>${u}</span>
      `)}}function kw(e,t,i,n){return Pe(this,null,function*(){if(!i)return;let s=Cg(e),o=Object.values(Do(s,e));if(!t.detail.elements.some(f=>o.includes(f)))return;let r=cd(s),l=r.find(f=>f.input===e).section,c=Array.from(new Set(r.filter(f=>t.detail.elements.includes(f.input)).map(f=>f.section)));if(!c.includes(l))return;let u=typeof i=="object"&&i.sections||[];if(u.length&&!u.some(f=>c.includes(f)))return;let h=typeof i=="object"?i:{};h=Jt(I({},h),{accessToken:n,sections:[l]}),yield Aw(s,h)})}var Pw="https://contribute-api.mapbox.com/v1",Rw="https://contribute-api-staging.tilestream.net/v1",Dw="edit-suggestion";function Pg(e,t){if(!me.feedbackEnabled)return;let i=window.location.hostname,s=`${X0(i)||$0(i)?Rw:Pw}/${Dw}/address?access_token=${e}`,{originalCoordinate:o,originalAddress:r,changes:a}=t,l={action:"update",reason:"incorrect_address",location:{longitude:o[0],latitude:o[1]},userEmail:"no-reply-autofill@mapbox.com",changes:a,placeName:r};fetch(s,{method:"POST",headers:new Headers({"User-Agent":`mapbox-search-js.${Gl}.${navigator.userAgent}`,"Content-Type":"application/json"}),body:JSON.stringify(l)})}var Ow=Qt(`
<template>
  <div class="MapboxAddressConfirmationFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Did you mean?</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>

      <div class="ModalAddress ModalAddressApprove"></div>
            
      <div class="ModalMap">
        <mapbox-address-minimap class="Minimap"></mapbox-address-minimap>
      </div>

      <div
        class="Button ButtonPrimary ButtonApprove"
        tabindex="0"
        role="button"
        aria-label="Yes"
      >
        Yes
      </div>
      
      <div
        class="Button ButtonSecondary ButtonReject"
        tabindex="0"
        role="button"
        aria-label="No, use the address I provided"
      >
        No, use the address I provided
      </div>

      <div class="ModalFooter">
          Your confirmation helps improve address data accuracy.
      </div>
    </div>
  </div>
</template>
`),Xe,ka,fo,Pa,Ra,Da,Oa,Ia,Rg=class extends Ci{constructor(){super(...arguments),S(this,Xe,void 0),S(this,ka,{}),this.minimap=!1,S(this,fo,void 0),S(this,Pa,void 0),this.update=(e,t)=>{var i;A(this,fo,e),A(this,Pa,t);let{ModalMap:n,Minimap:s,ModalAddressApprove:o}=d(this,Xe);if(this.minimap){if(n.removeAttribute("aria-hidden"),s.accessToken=this.accessToken,typeof this.minimap=="object"){let{defaultMapStyle:a,theme:l,mapStyleMode:c,satelliteToggle:u}=this.minimap;a&&(s.defaultMapStyle=this.minimap.defaultMapStyle),l&&(s.theme=this.minimap.theme),c&&(s.mapStyleMode=c),u!==void 0&&(s.satelliteToggle=u)}s.feature=e}else n.setAttribute("aria-hidden","true");let r=e.properties.place_name||e.properties.full_address||e.properties.address;o.innerHTML="",o.appendChild(kg(t,r,e.properties.feature_name,e.properties.description,((i=e.properties.place_type)==null?void 0:i[0])==="secondary_address"))},S(this,Ra,()=>{this.dispatchEvent(new it("result","cancel"))}),this.approve=()=>{this.dispatchEvent(new it("result","change"))},this.reject=()=>{this.dispatchEvent(new it("result","nochange")),Pg(this.accessToken,{originalCoordinate:d(this,fo).geometry.coordinates,originalAddress:d(this,fo).properties.full_address,changes:{address:Tg(d(this,Pa))}})},S(this,Da,an()),S(this,Oa,an()),S(this,Ia,an())}get template(){return Ow}get templateStyle(){return cn}get templateUserStyle(){return Yt(".MapboxAddressConfirmationFeature",this.theme)}get theme(){return d(this,ka)}set theme(e){if(A(this,ka,e),!d(this,Xe)||!e)return;this.updateTemplateUserStyle(Yt(".MapboxAddressConfirmationFeature",e));let{IconQuestion:t,IconClose:i}=d(this,Xe);t.innerHTML=ae("question",e),i.innerHTML=ae("close",e)}set footer(e){if(e===void 0)return;let t=this.querySelector(".ModalFooter");typeof e=="string"?(t.textContent=e,t.removeAttribute("aria-hidden")):e?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),A(this,Xe,ln(this,{MapboxAddressConfirmationFeature:".MapboxAddressConfirmationFeature",Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",ModalMap:".ModalMap",Minimap:".Minimap",IconQuestion:".IconQuestion",IconClose:".IconClose",ButtonApprove:".ButtonApprove",ButtonReject:".ButtonReject",ModalAddressApprove:".ModalAddressApprove"}));let{Modal:e,ModalHeaderTitle:t,IconClose:i,ButtonApprove:n,ButtonReject:s,ModalAddressApprove:o}=d(this,Xe);e.setAttribute("aria-labelledby",d(this,Oa)),e.setAttribute("aria-describedby",d(this,Ia)),i.setAttribute("aria-controls",d(this,Da)),e.id=d(this,Da),t.id=d(this,Oa),o.id=d(this,Ia);let r=Array.from(this.querySelectorAll('[role="button"]'));for(let l of r)l.addEventListener("keydown",Sg);i.addEventListener("click",d(this,Ra)),n.addEventListener("click",this.approve),s.addEventListener("click",this.reject);let a=this.theme;if(a){let{IconQuestion:l,IconClose:c}=d(this,Xe);l.innerHTML=ae("question",a),c.innerHTML=ae("close",a)}}disconnectedCallback(){let{IconClose:e,ButtonApprove:t}=d(this,Xe);e.removeEventListener("click",d(this,Ra)),t.removeEventListener("click",this.approve)}};Xe=new WeakMap;ka=new WeakMap;fo=new WeakMap;Pa=new WeakMap;Ra=new WeakMap;Da=new WeakMap;Oa=new WeakMap;Ia=new WeakMap;window.MapboxAddressConfirmationFeature=Rg;window.customElements.get("mapbox-address-confirmation-feature")||customElements.define("mapbox-address-confirmation-feature",Rg);var Iw=Qt(`
<template>
  <div class="MapboxAddressConfirmationNoFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Confirm address</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>
      <div class="ModalDescription">
        We couldn't verify this address. Please check that your information is correct before continuing.
      </div>
      <br />
      <div class="ModalSubheader">
        You entered
      </div>
      <div class="ModalAddress"></div>
      <div
        class="Button ButtonPrimary"
        tabindex="0"
        role="button"
        aria-label="Use the address I provided"
      >
        Use the address I provided
      </div>
    </div>
  </div>
</template>
`),$e,Fa,Ba,Na,Wa,Ha,Dg=class extends Ci{constructor(){super(...arguments),S(this,$e,void 0),S(this,Fa,{}),this.update=e=>{let{ModalAddress:t}=d(this,$e);t.innerHTML="",t.appendChild(kg(e))},S(this,Ba,()=>{this.dispatchEvent(new it("result","cancel"))}),this.reject=()=>{this.dispatchEvent(new it("result","nochange"))},S(this,Na,an()),S(this,Wa,an()),S(this,Ha,an())}get template(){return Iw}get templateStyle(){return cn}get templateUserStyle(){return Yt(".MapboxAddressConfirmationNoFeature",this.theme)}get theme(){return d(this,Fa)}set theme(e){if(A(this,Fa,e),!d(this,$e)||!e)return;this.updateTemplateUserStyle(Yt(".MapboxAddressConfirmationNoFeature",e));let{IconQuestion:t,IconClose:i}=d(this,$e);t.innerHTML=ae("question",e),i.innerHTML=ae("close",e)}connectedCallback(){super.connectedCallback(),A(this,$e,ln(this,{Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",IconQuestion:".IconQuestion",IconClose:".IconClose",ModalAddress:".ModalAddress",ButtonReject:".Button"}));let{Modal:e,ModalHeaderTitle:t,IconClose:i,ModalAddress:n,ButtonReject:s}=d(this,$e);e.setAttribute("aria-labelledby",d(this,Wa)),e.setAttribute("aria-describedby",d(this,Ha)),i.setAttribute("aria-controls",d(this,Na)),e.id=d(this,Na),t.id=d(this,Wa),n.id=d(this,Ha);let o=Array.from(this.querySelectorAll('[role="button"]'));for(let a of o)a.addEventListener("keydown",Sg);i.addEventListener("click",d(this,Ba)),s.addEventListener("click",this.reject);let r=this.theme;if(r){let{IconQuestion:a,IconClose:l}=d(this,$e);a.innerHTML=ae("question",r),l.innerHTML=ae("close",r)}}disconnectedCallback(){let{IconClose:e,ButtonReject:t}=d(this,$e);e.removeEventListener("click",d(this,Ba)),t.removeEventListener("click",this.reject)}};$e=new WeakMap;Fa=new WeakMap;Ba=new WeakMap;Na=new WeakMap;Wa=new WeakMap;Ha=new WeakMap;window.MapboxAddressConfirmationNoFeature=Dg;window.customElements.get("mapbox-address-confirmation-no-feature")||customElements.define("mapbox-address-confirmation-no-feature",Dg);var Fw='input:-webkit-autofill,select:-webkit-autofill,textarea:-webkit-autofill{animation-name:onbrowserautofillstart}input:not(:-webkit-autofill),select:not(:-webkit-autofill),textarea:not(:-webkit-autofill){animation-name:onbrowserautofillcancel}@keyframes onbrowserautofillstart{0%{animation-name:"onbrowserautofillstart"}to{animation-name:"onbrowserautofillstart"}}@keyframes onbrowserautofillcancel{0%{animation-name:"onbrowserautofillcancel"}to{animation-name:"onbrowserautofillcancel"}}',Vl="browser-autofilled",Mh=[];function Bw(){window.dispatchEvent(new window.CustomEvent("browserautofill",{bubbles:!0,cancelable:!0,detail:{elements:Mh}})),Mh=[]}var Nw=rh(Bw,5);function Og(e){e.hasAttribute(Vl)||(e.setAttribute(Vl,""),Mh.push(e),Nw())}function Ig(e){e.hasAttribute(Vl)&&e.removeAttribute(Vl)}function Ww(e){e.animationName==="onbrowserautofillstart"?Og(e.target):Ig(e.target)}function Hw(e){let t=e.target;t.nodeName.toLowerCase()!=="select"&&!e.simulated&&!(e instanceof it)&&(e.inputType==="insertReplacementText"||!("data"in e))?Og(t):Ig(t)}function Uw(){me.detectBrowserAutofillEnabled||(me.detectBrowserAutofillEnabled=!0,B0(Fw),document.addEventListener("animationstart",Ww,!0),document.addEventListener("input",Hw,!0))}var hd=(e,t)=>{if(typeof e=="string")if(e==="ip"){let i=t?.get("ip-proximity");return i&&typeof i=="string"?i.split(",").map(parseFloat):[999,999]}else return e.split(",").map(Number);else return at.convert(e).toArray()},zw=e=>{let t={};return e.bbox&&(typeof e.bbox=="string"?t.bbox=e.bbox.split(",").map(Number):t.bbox=Mt.convert(e.bbox).toFlatArray()),e.proximity&&(t.proximity=hd(e.proximity)),e.country&&(t.country=e.country.split(",")),e.language&&(t.language=e.language.split(",")),e.types&&(typeof e.types=="string"?t.types=e.types.split(","):t.types=Array.from(e.types)),e.limit&&(typeof e.limit=="string"?t.limit=parseInt(e.limit):t.limit=e.limit),t},jw=(e,t)=>{let i={};return e.bbox&&(typeof e.bbox=="string"?i.bbox=e.bbox.split(",").map(Number):i.bbox=Mt.convert(e.bbox).toFlatArray()),e.proximity&&(i.proximity=hd(e.proximity,t)),e.country&&(i.country=e.country.split(",")),e.language&&(i.language=e.language.split(",")),e.types&&(typeof e.types=="string"?i.types=e.types.split(","):i.types=Array.from(e.types)),e.limit&&(typeof e.limit=="string"?i.limit=parseInt(e.limit):i.limit=e.limit),typeof e.autocomplete=="boolean"&&(i.autocomplete=e.autocomplete),e.worldview&&(i.worldview=e.worldview),e.permanent&&(i.permanent=e.permanent),i},Vw=(e,t)=>{let i={};return e.bbox&&(typeof e.bbox=="string"?i.bbox=e.bbox.split(",").map(Number):i.bbox=Mt.convert(e.bbox).toFlatArray()),e.proximity&&(i.proximity=hd(e.proximity,t)),e.country&&(i.country=e.country.split(",")),e.language&&(i.language=e.language.split(",")),e.limit&&(typeof e.limit=="string"?i.limit=parseInt(e.limit):i.limit=e.limit),e.streets!==void 0&&e.streets!==null&&(typeof e.streets=="string"?i.streets=e.streets==="true":i.streets=e.streets),i},Gw=(e,t,i)=>{switch(t){case 2:return zw(e);case 1:return jw(e,i);case 0:return Vw(e,i)}},Yw=e=>({suggestionIds:e.map(t=>t.mapbox_id||""),suggestionNames:e.map(t=>t.feature_type==="poi"?[t.name,t.full_address].filter(Boolean).join(", "):t.full_address?t.full_address:t.name),suggestionTypes:e.map(t=>t.feature_type||""),suggestionSources:e.map(t=>t._source||"")}),qw=e=>({suggestionIds:e.map(t=>t.properties.mapbox_id||t.id||""),suggestionNames:e.map(t=>t.properties.full_address||""),suggestionTypes:e.map(t=>t.properties.feature_type||""),suggestionSources:e.map(t=>t._source||"")}),Xw=e=>({suggestionIds:e.map(t=>t.mapbox_id||""),suggestionNames:e.map(t=>t.full_address||""),suggestionTypes:e.map(t=>{var i;return((i=t.place_type)==null?void 0:i[0])||""}),suggestionSources:e.map(t=>t._source||"")}),$w=(e,t)=>{switch(t){case 2:return Yw(e);case 1:return qw(e);case 0:return Xw(e)}},hg=(e,t)=>{switch(e){case 2:return"search/searchbox/v1/suggest";case 1:return`search/geocode/v6/${/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/.test(t)?"reverse":"forward"}`;case 0:return"autofill/v1/suggest"}},Ch,Lh,tn,Ua,Th,en,po,mo,go,bo,Ah,Yn,Ke,kh,Ph,Rh,yo,Dh,Oh,Ih,Fh,Bh,Nh,vo,nn,xo,dd=class{constructor(e){S(this,Ch,"https://api.mapbox.com"),S(this,Lh,"events/v2"),S(this,tn,void 0),S(this,Ua,void 0),S(this,Th,navigator.language||null),S(this,en,[]),S(this,po,""),S(this,mo,0),S(this,go,!0),S(this,bo,1e3),S(this,Ah,100),S(this,Yn,void 0),S(this,Ke,void 0),this.start=(t,i,n,s)=>{A(this,tn,i.accessToken);let o=d(this,yo).call(this,"search.start",{queryString:t,options:i,map:n,responseHeaders:s});o&&d(this,xo).call(this,o)},this.input=(t,i,n,s,o)=>{if(A(this,tn,n.accessToken),d(this,go)&&(this.start(t,n,s,o),A(this,go,!1)),!i)return;let r=d(this,yo).call(this,"search.keystroke",{lastInput:i,queryString:t,options:n,map:s,responseHeaders:o});r&&d(this,xo).call(this,r)},this.select=(t,i,n,s,o,r)=>{A(this,tn,s.accessToken);let a=d(this,yo).call(this,"search.select",{queryString:t,selectedIndex:i,suggestions:n,options:s,map:o,responseHeaders:r});a&&(a.resultIndex===d(this,mo)&&a.queryString===d(this,po)||a.resultIndex===-1||(A(this,mo,a.resultIndex),A(this,po,a.queryString),d(this,xo).call(this,a)))},this.clear=()=>{A(this,go,!0),A(this,po,""),A(this,mo,0),d(this,nn).call(this)},S(this,kh,t=>{let i=`${d(this,Ch)}/${d(this,Lh)}?access_token=${d(this,tn)}`,n=d(this,Ph).call(this,t);try{fetch(i,n)}catch(s){d(this,Rh).call(this,s)}}),S(this,Ph,t=>(Array.isArray(t)||(t=[t]),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})),S(this,Rh,t=>{console.log(t)}),S(this,yo,(t,i)=>{if(t==="search.select"&&!(typeof i.selectedIndex=="number"||i.suggestions)||t==="search.keystroke"&&!i.lastInput)return null;let n=Gw(i.options,d(this,Ke),i.responseHeaders),s=d(this,Dh).call(this,t,i,n);return t==="search.keystroke"?d(this,Oh).call(this,s,i,n):t==="search.select"&&d(this,Ih).call(this,s,i,n),d(this,Nh).call(this,s)?s:null}),S(this,Dh,(t,i,n)=>{let s={event:t,version:d(this,Bh).call(this,t),created:+new Date,sessionIdentifier:i.options.sessionToken,userAgent:d(this,Ua),keyboardLocale:d(this,Th),queryString:i.queryString};if(n&&(s=I(I({},s),n)),t==="search.start")for(let o of["streets","permanent"])delete s[o];if(i.map){let o=i.map.getZoom()||void 0,r=i.map.getCenter();s=Jt(I({},s),{mapZoom:o,mapCenterLat:r.lat,mapCenterLng:r.lng})}return s}),S(this,Oh,(t,i,n)=>{switch(d(this,Ke)){case 0:n.streets&&(t.streets=n.streets);break;case 1:n.permanent&&(t.permanent=n.permanent);break}t.path=hg(d(this,Ke),i.queryString),t.lastAction=i.lastInput}),S(this,Ih,(t,i,n)=>{switch(d(this,Ke)){case 0:n.streets&&(t.streets=n.streets);break;case 1:n.permanent&&(t.permanent=n.permanent);break}t.path=hg(d(this,Ke),i.queryString);let{selectedIndex:s,suggestions:o}=i;if(o&&o.length>0){let r=$w(o,d(this,Ke));t.resultIndex=s,t.resultPlaceName=r.suggestionNames[s],t.resultId=r.suggestionIds[s],t.resultId.startsWith("dXJuOm1ie")&&(t.resultMapboxId=t.resultId),t.suggestionIds=r.suggestionIds,t.suggestionNames=r.suggestionNames,t.suggestionTypes=r.suggestionTypes,t.suggestionSources=r.suggestionSources}}),S(this,Fh,()=>`mapbox.${ew.split("/")[1]}.${Gl}.${navigator.userAgent}`),S(this,Bh,t=>["search.keystroke","search.select"].includes(t)?"2.2":"2.0"),S(this,Nh,t=>{if(!t||!t.event)return!1;let i=["event","created","sessionIdentifier","queryString"],n=["event","created","sessionIdentifier","queryString","lastAction"],s=["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"],o=t.event;return o==="search.start"?d(this,vo).call(this,t,i):o==="search.keystroke"?d(this,vo).call(this,t,n):o==="search.select"?d(this,vo).call(this,t,s):!0}),S(this,vo,(t,i)=>i.every(n=>n==="queryString"?typeof t[n]=="string"&&t[n].length>0:t[n]!==void 0)),S(this,nn,()=>{d(this,en).length>0&&d(this,tn)&&(d(this,kh).call(this,d(this,en)),A(this,en,[])),d(this,Yn)&&clearTimeout(d(this,Yn)),d(this,bo)&&A(this,Yn,setTimeout(d(this,nn),d(this,bo)))}),S(this,xo,(t,i)=>{d(this,en).push(t),(d(this,en).length>=d(this,Ah)||i)&&d(this,nn).call(this)}),this.remove=()=>{d(this,nn).call(this)},A(this,Ke,e),A(this,Ua,d(this,Fh).call(this)),A(this,Yn,setTimeout(d(this,nn),d(this,bo)))}};Ch=new WeakMap;Lh=new WeakMap;tn=new WeakMap;Ua=new WeakMap;Th=new WeakMap;en=new WeakMap;po=new WeakMap;mo=new WeakMap;go=new WeakMap;bo=new WeakMap;Ah=new WeakMap;Yn=new WeakMap;Ke=new WeakMap;kh=new WeakMap;Ph=new WeakMap;Rh=new WeakMap;yo=new WeakMap;Dh=new WeakMap;Oh=new WeakMap;Ih=new WeakMap;Fh=new WeakMap;Bh=new WeakMap;Nh=new WeakMap;vo=new WeakMap;nn=new WeakMap;xo=new WeakMap;var _i,zt,jt,$,qn,wi,_o,za,ja,wo,Va,Ga,Ya,qa,Xa,$a,Ka,Wh,fd=class extends Ci{constructor(){super(...arguments),S(this,_i,new aa),S(this,zt,new Ji(d(this,_i))),S(this,jt,void 0),S(this,$,new Ro),S(this,qn,new dd(0)),S(this,wi,void 0),this.options={},this.confirmOnBrowserAutofill=!1,S(this,_o,!1),S(this,za,e=>{let t=e?.suggestions?Mw(e.suggestions):null;d(this,$).handleSuggest(t),this.dispatchEvent(new it("suggest",e))}),S(this,ja,e=>{d(this,$).handleError(),this.dispatchEvent(new it("suggesterror",e))}),S(this,wo,e=>{var t;if(this.dispatchEvent(new it("retrieve",e)),this.retrieveFeature=(t=e.features)==null?void 0:t[0],!d(this,jt))return;let i=e;!i||!i.features||!i.features.length||Ag(i.features[0],d(this,jt))}),S(this,Va,()=>{var e;try{let t=(e=this.querySelector("input"))!=null?e:null;A(this,jt,t),d(this,$).input=t}catch(t){A(this,jt,null),d(this,$).input=null,console.error(t.message||t)}}),S(this,Ga,new MutationObserver(d(this,Va))),S(this,Ya,e=>{d(this,$).blur(),kw(d(this,jt),e,this.confirmOnBrowserAutofill,this.accessToken)}),this.retrieveFeature=null,this.interceptSearch=null,S(this,qa,e=>{this.dispatchEvent(new it("input",e.detail.inputText));let{lastInput:t,inputText:i}=e.detail,n=this.browserAutofillEnabled===!0&&i?.length<=2;if(ns(d(this,jt),d(this,wi),n),!i){d(this,Wh).call(this);return}let s=this.interceptSearch&&this.interceptSearch(i),o=this.interceptSearch?s:i;if(this.interceptSearch&&!s||o?.length<=2){d(this,$).handleSuggest(null);return}d(this,zt).suggest(o,this.options),d(this,qn).input(o,t,Jt(I({},this.options),{sessionToken:d(this,zt).sessionToken,accessToken:this.accessToken}),null,d(this,_i).responseHeaders)}),S(this,Xa,e=>{let{suggestion:t,selectedIndex:i}=e.detail;t.accuracy!=="street"?(ns(d(this,jt),d(this,wi),!0),d(this,zt).retrieve(t,this.options),d(this,qn).select(this.input.value,i,d(this,$).suggestions,Jt(I({},this.options),{sessionToken:d(this,zt).sessionToken,accessToken:this.accessToken}),null,d(this,_i).responseHeaders)):Cw(d(this,jt),d(this,wi),t)}),S(this,$a,()=>{ns(d(this,jt),d(this,wi),!0),d(this,zt).abort(),d(this,$).hideResults()}),S(this,Ka,()=>{var e;let t=this.browserAutofillEnabled===!0&&((e=d(this,jt).value)==null?void 0:e.length)<=2;ns(d(this,jt),d(this,wi),t)}),S(this,Wh,()=>{d(this,$).handleSuggest(null),d(this,qn).clear()})}get accessToken(){return d(this,_i).accessToken}set accessToken(e){d(this,_i).accessToken=e}get input(){return d(this,jt)}get theme(){return d(this,$).theme}set theme(e){d(this,$).theme=e}get popoverOptions(){return d(this,$).popoverOptions}set popoverOptions(e){d(this,$).popoverOptions=e}get browserAutofillEnabled(){return d(this,_o)}set browserAutofillEnabled(e){A(this,_o,e)}connectedCallback(){var e;super.connectedCallback(),me.autofillSessionEnabled=!0,d(this,zt).sessionToken=me.autofillSessionToken.id,d(this,$).autofillHost=this,d(this,$).searchService=0;let t=(e=this.querySelector("input"))!=null?e:null;d(this,Ga).observe(this,{subtree:!0,childList:!0}),d(this,Va).call(this),d(this,$).addEventListener("input",d(this,qa)),d(this,$).addEventListener("select",d(this,Xa)),d(this,$).addEventListener("blur",d(this,$a)),d(this,$).addEventListener("focus",d(this,Ka)),d(this,zt).addEventListener("suggest",d(this,za)),d(this,zt).addEventListener("suggesterror",d(this,ja)),d(this,zt).addEventListener("retrieve",d(this,wo)),document.body.appendChild(d(this,$)),t&&(t.insertAdjacentElement("beforebegin",ld(d(this,$).dataSeed)),dw(t),A(this,wi,t.autocomplete)),Uw(),window.addEventListener("browserautofill",d(this,Ya))}disconnectedCallback(){d(this,$).remove(),d(this,$).removeEventListener("input",d(this,qa)),d(this,$).removeEventListener("select",d(this,Xa)),d(this,$).removeEventListener("blur",d(this,$a)),d(this,$).removeEventListener("focus",d(this,Ka)),d(this,zt).removeEventListener("suggest",d(this,za)),d(this,zt).removeEventListener("suggesterror",d(this,ja)),d(this,zt).removeEventListener("retrieve",d(this,wo)),d(this,qn).remove(),d(this,Ga).disconnect(),window.removeEventListener("browserautofill",d(this,Ya))}attributeChangedCallback(e,t,i){if(e==="access-token"){d(this,_i).accessToken=i;return}if(e==="browser-autofill-enabled"){A(this,_o,!!i);return}if(e==="theme"){this.theme=ss(i);return}if(e==="popover-options"){this.popoverOptions=ss(i);return}let n=e.split("-").join("_");i||delete this.options[n],this.options[n]=i}focus(){d(this,$).focus()}simulateRetrieve(e){let t=this.input;t&&(t.dataset.mapboxSuccess="true"),d(this,$).hideResults();let i={type:"FeatureCollection",features:[e],url:""};d(this,wo).call(this,i)}};_i=new WeakMap;zt=new WeakMap;jt=new WeakMap;$=new WeakMap;qn=new WeakMap;wi=new WeakMap;_o=new WeakMap;za=new WeakMap;ja=new WeakMap;wo=new WeakMap;Va=new WeakMap;Ga=new WeakMap;Ya=new WeakMap;qa=new WeakMap;Xa=new WeakMap;$a=new WeakMap;Ka=new WeakMap;Wh=new WeakMap;fd.observedAttributes=["access-token","browser-autofill-enabled","theme","popover-options","css-text","language","country","bbox","limit","proximity","streets"];window.MapboxAddressAutofill=fd;window.customElements.get("mapbox-address-autofill")||customElements.define("mapbox-address-autofill",fd);var Kw={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"},Bg={placeholder:Kw},Zw=9,dg={flyTo:!0},Jw=["allowReverse","flipCoordinates"],ne,Xn,Vt,se,Le,K,$n,Za,Hh,Uh,Ng,Kn,Ja,Qa,tl,sn,el,il,So,nl,Eo,sl,Si,ol,rl,zh,os=class extends Ci{constructor(){super(...arguments),S(this,Uh),S(this,ne,void 0),S(this,Xn,new ih({})),S(this,Vt,new Ji(d(this,Xn))),S(this,se,null),S(this,Le,void 0),S(this,K,new Ro),S(this,$n,new dd(2)),this.options={},S(this,Za,I({},dg)),S(this,Hh,()=>{let e=I({},this.componentOptions);for(let t in e)Jw.indexOf(t)===-1&&delete e[t];return e}),S(this,Kn,void 0),S(this,Ja,e=>Pe(this,null,function*(){d(this,Si).call(this);let t=null;if(this.componentOptions.customSearch){let i=yield this.componentOptions.customSearch(this.value);i&&i.length&&(i.forEach(n=>{n._source="custom"}),t=i)}e&&e.suggestions&&(t?t=t.concat(e.suggestions):t=e.suggestions),d(this,K).handleSuggest(t||null),this.dispatchEvent(new it("suggest",e))})),S(this,Qa,e=>Pe(this,null,function*(){if(d(this,Si).call(this),this.componentOptions.customSearch){let t=yield this.componentOptions.customSearch(this.value);t&&t.length?(t.forEach(i=>{i._source="custom"}),d(this,K).handleSuggest(t||null)):d(this,K).handleError()}else d(this,K).handleError();this.dispatchEvent(new it("suggesterror",e))})),S(this,tl,e=>{d(this,Si).call(this),this.dispatchEvent(new it("retrieve",e));let t=e;if(!t||!t.features.length)return;let i=Wn(t.features[0]);d(this,Le).value=i.name;let n=t.features[0];!n||!d(this,se)||(this.componentOptions.flyTo&&d(this,zh).call(this,n),this.marker&&this.mapboxgl&&d(this,il).call(this,n))}),S(this,sn,void 0),S(this,el,()=>{d(this,sn)&&(d(this,sn).remove(),A(this,sn,null))}),S(this,il,e=>{if(!d(this,se)||(d(this,el).call(this),!e))return;let i=I(I({},{color:"#4668F2"}),typeof this.marker=="object"&&this.marker);A(this,sn,new this.mapboxgl.Marker(i)),e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&d(this,sn).setLngLat(e.geometry.coordinates).addTo(d(this,se))}),this.interceptSearch=null,S(this,So,e=>{this.dispatchEvent(new it("input",e.detail.inputText));let{lastInput:t,inputText:i}=e.detail;if(!i){d(this,ol).call(this);return}let n=this.interceptSearch&&this.interceptSearch(i),s=this.interceptSearch?n:i;if(this.interceptSearch&&!n){d(this,K).hideResults();return}d(this,Vt).suggest(s,I(I({},this.options),d(this,Hh).call(this))),d(this,$n).input(s,t,Jt(I({},this.options),{sessionToken:d(this,Vt).sessionToken,accessToken:this.accessToken}),d(this,se)),d(this,Si).call(this,!0)}),S(this,nl,e=>{let{suggestion:t,selectedIndex:i}=e.detail;d(this,Vt).retrieve(t,this.options),d(this,$n).select(this.value,i,d(this,K).suggestions,Jt(I({},this.options),{sessionToken:d(this,Vt).sessionToken,accessToken:this.accessToken}),d(this,se)),d(this,Si).call(this,!0)}),S(this,Eo,()=>{d(this,Vt).abort()}),S(this,sl,e=>{d(this,ne).SearchBox.contains(e.relatedTarget)||(d(this,Eo).call(this),d(this,K).hideResults())}),S(this,Si,(e=!1)=>{e?(d(this,ne).ClearBtn.style.display="none",d(this,ne).LoadingIcon.style.display="block"):(d(this,ne).LoadingIcon.style.display="none",d(this,ne).ClearBtn.style.display=this.value?"block":"none")}),S(this,ol,()=>{this.value="",d(this,Si).call(this),d(this,il).call(this,null),d(this,K).handleSuggest(null),d(this,K).focus(),d(this,$n).clear(),d(this,Vt).incrementSession(),this.dispatchEvent(new it("clear"))}),this.marker=!0,S(this,rl,()=>{let e=d(this,se),t=I({},this.options);if(e.getZoom()<=Zw){delete t.proximity,this.options=t;return}let i=e.getCenter();this.options=Jt(I({},t),{proximity:i})}),S(this,zh,e=>{let t=d(this,se);if(!t)return;let i=e.properties.feature_type,n,s=e.properties.bbox;if(s)n=vg(t,Mt.convert(s).toFlatArray());else{let o=e.geometry.coordinates,r=xg(i);n={center:o,zoom:r,speed:sd}}n=Object.assign(n,this.componentOptions.flyTo),t.flyTo(n)})}get accessToken(){return d(this,Xn).accessToken}set accessToken(e){d(this,Xn).accessToken=e}get value(){return d(this,Le).value}set value(e){d(this,Le).value=e||""}get input(){return d(this,Le)}get template(){return Y0}get templateStyle(){return cn}get templateUserStyle(){return Yt(".SearchBox",d(this,K).theme)}get componentOptions(){return d(this,Za)}set componentOptions(e){A(this,Za,I(I({},dg),e))}get theme(){return d(this,K).theme}set theme(e){if(d(this,K).theme=e,!d(this,ne)||!e)return;this.updateTemplateUserStyle(Yt(".SearchBox",e)),d(this,K).updatePopover();let{SearchIcon:t}=d(this,ne);t.innerHTML=ae("search",e)}get popoverOptions(){return d(this,K).popoverOptions}set popoverOptions(e){d(this,K).popoverOptions=e}get placeholder(){return d(this,Kn)||Po(this,Uh,Ng).call(this)}set placeholder(e){A(this,Kn,e),d(this,Le)&&(d(this,Le).placeholder=this.placeholder,d(this,Le).setAttribute("aria-label",this.placeholder))}connectedCallback(){super.connectedCallback(),A(this,ne,ln(this,{SearchBox:".SearchBox",SearchIcon:".SearchIcon",Input:".Input",ClearBtn:".ClearBtn",LoadingIcon:".LoadingIcon"})),this.theme=I({},this.theme);let{Input:e,ClearBtn:t,SearchBox:i}=d(this,ne);i.addEventListener("focusout",d(this,sl)),A(this,Le,e),d(this,K).input=e,d(this,K).searchService=2,d(this,K).addEventListener("input",d(this,So)),d(this,K).addEventListener("select",d(this,nl)),d(this,K).addEventListener("blur",d(this,Eo)),d(this,Vt).addEventListener("suggest",d(this,Ja)),d(this,Vt).addEventListener("suggesterror",d(this,Qa)),d(this,Vt).addEventListener("retrieve",d(this,tl)),t.addEventListener("click",d(this,ol)),this.placeholder=d(this,Kn),this.parentElement.appendChild(d(this,K)),e&&(e.previousElementSibling.hasAttribute("aria-live")&&e.previousElementSibling.remove(),e.insertAdjacentElement("beforebegin",ld(d(this,K).dataSeed)))}disconnectedCallback(){let{SearchBox:e}=d(this,ne);e.removeEventListener("focusout",d(this,sl)),d(this,K).remove(),d(this,K).input=null,d(this,K).removeEventListener("input",d(this,So)),d(this,K).removeEventListener("select",d(this,nl)),d(this,K).removeEventListener("blur",d(this,Eo)),d(this,Vt).removeEventListener("suggest",d(this,Ja)),d(this,Vt).removeEventListener("suggesterror",d(this,Qa)),d(this,Vt).removeEventListener("retrieve",d(this,tl)),d(this,$n).remove()}attributeChangedCallback(e,t,i){if(e==="access-token"){d(this,Xn).accessToken=i;return}if(e==="theme"){this.theme=ss(i);return}if(e==="popover-options"){this.popoverOptions=ss(i);return}if(e==="placeholder"){this.placeholder=i;return}if(e==="allow-reverse"){this.componentOptions.allowReverse=i==="true";return}if(e==="flip-coordinates"){this.componentOptions.flipCoordinates=i==="true";return}let n=e.split("-").join("_");i||delete this.options[n],this.options[n]=i,n==="language"&&(this.placeholder=d(this,Kn))}focus(){d(this,K).focus()}search(e){this.value=e;let t={lastInput:e,inputText:e};d(this,So).call(this,new it("input",t))}bindMap(e){d(this,se)&&d(this,se).off("moveend",d(this,rl)),e&&e.on("moveend",d(this,rl)),A(this,se,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let t=document.createElement("div");return t.className="mapboxgl-ctrl",t.style.width="300px",t.appendChild(this),t}onRemove(){this.remove(),this.unbindMap(),d(this,el).call(this)}getDefaultPosition(){return"top-right"}};ne=new WeakMap;Xn=new WeakMap;Vt=new WeakMap;se=new WeakMap;Le=new WeakMap;K=new WeakMap;$n=new WeakMap;Za=new WeakMap;Hh=new WeakMap;Uh=new WeakSet;Ng=function(){if(this.options.language){let e=this.options.language.split(",")[0],t=Fg.default.language(e),i=Bg.placeholder[t];if(i)return i}return"Search"};Kn=new WeakMap;Ja=new WeakMap;Qa=new WeakMap;tl=new WeakMap;sn=new WeakMap;el=new WeakMap;il=new WeakMap;So=new WeakMap;nl=new WeakMap;Eo=new WeakMap;sl=new WeakMap;Si=new WeakMap;ol=new WeakMap;rl=new WeakMap;zh=new WeakMap;os.observedAttributes=["access-token","theme","popover-options","placeholder","allow-reverse","flip-coordinates","language","country","bbox","limit","navigation-profile","origin","proximity","eta-type","types"];window.MapboxSearchBox=os;window.customElements.get("mapbox-search-box")||customElements.define("mapbox-search-box",os);var Qw=9,fg={flyTo:!0},tS=["flipCoordinates"],oe,Ei,Gt,re,Te,Z,Zn,al,jh,Vh,Hg,Jn,ll,cl,ul,on,hl,dl,Mo,fl,Co,pl,Mi,ml,gl,Gh,pd=class extends Ci{constructor(){super(...arguments),S(this,Vh),S(this,oe,void 0),S(this,Ei,new vm({})),S(this,Gt,new Ji(d(this,Ei))),S(this,re,null),S(this,Te,void 0),S(this,Z,new Ro),S(this,Zn,new dd(1)),this.options={},S(this,al,I({},fg)),S(this,jh,()=>{let e=I({},this.componentOptions);for(let t in e)tS.indexOf(t)===-1&&delete e[t];return e}),S(this,Jn,void 0),S(this,ll,e=>Pe(this,null,function*(){d(this,Mi).call(this);let t=null;if(this.componentOptions.customSearch){let i=yield this.componentOptions.customSearch(this.value);i&&i.length&&(i.forEach(n=>{n._source="custom"}),t=i)}e&&e.features&&(t?t=t.concat(e.features):t=e.features),d(this,Z).handleSuggest(t||null),this.dispatchEvent(new it("suggest",e))})),S(this,cl,e=>Pe(this,null,function*(){if(d(this,Mi).call(this),this.componentOptions.customSearch){let t=yield this.componentOptions.customSearch(this.value);t&&t.length?(t.forEach(i=>{i._source="custom"}),d(this,Z).handleSuggest(t||null)):d(this,Z).handleError()}else d(this,Z).handleError();this.dispatchEvent(new it("suggesterror",e))})),S(this,ul,e=>{d(this,Mi).call(this),this.dispatchEvent(new it("retrieve",e));let t=e;!t||(d(this,Te).value=t.properties.full_address,!d(this,re))||(this.componentOptions.flyTo&&d(this,Gh).call(this,t),this.marker&&this.mapboxgl&&d(this,dl).call(this,t))}),S(this,on,void 0),S(this,hl,()=>{d(this,on)&&(d(this,on).remove(),A(this,on,null))}),S(this,dl,e=>{if(!d(this,re)||(d(this,hl).call(this),!e))return;let i=I(I({},{color:"#4668F2"}),typeof this.marker=="object"&&this.marker);A(this,on,new this.mapboxgl.Marker(i)),e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&d(this,on).setLngLat(e.geometry.coordinates).addTo(d(this,re))}),this.interceptSearch=null,S(this,Mo,e=>{this.dispatchEvent(new it("input",e.detail.inputText));let{lastInput:t,inputText:i}=e.detail;if(!i){d(this,ml).call(this);return}let n=this.interceptSearch&&this.interceptSearch(i),s=this.interceptSearch?n:i;if(this.interceptSearch&&!n){d(this,Z).hideResults();return}d(this,Gt).suggest(s,I(I({},this.options),d(this,jh).call(this))),d(this,Zn).input(s,t,Jt(I({},this.options),{sessionToken:d(this,Gt).sessionToken,accessToken:this.accessToken}),d(this,re),d(this,Ei).responseHeaders),d(this,Mi).call(this,!0)}),S(this,fl,e=>{let{suggestion:t,selectedIndex:i}=e.detail;d(this,Gt).retrieve(t,this.options),d(this,Zn).select(this.value,i,d(this,Z).suggestions,Jt(I({},this.options),{sessionToken:d(this,Gt).sessionToken,accessToken:this.accessToken}),d(this,re),d(this,Ei).responseHeaders),d(this,Mi).call(this,!0)}),S(this,Co,()=>{d(this,Gt).abort()}),S(this,pl,e=>{d(this,oe).Geocoder.contains(e.relatedTarget)||(d(this,Co).call(this),d(this,Z).hideResults())}),S(this,Mi,(e=!1)=>{e?(d(this,oe).ClearBtn.style.display="none",d(this,oe).LoadingIcon.style.display="block"):(d(this,oe).LoadingIcon.style.display="none",d(this,oe).ClearBtn.style.display=this.value?"block":"none")}),S(this,ml,()=>{this.value="",d(this,Mi).call(this),d(this,dl).call(this,null),d(this,Z).handleSuggest(null),d(this,Z).focus(),d(this,Zn).clear(),d(this,Gt).incrementSession(),this.dispatchEvent(new it("clear"))}),this.marker=!0,S(this,gl,()=>{let e=d(this,re),t=I({},this.options);if(e.getZoom()<=Qw){delete t.proximity,this.options=t;return}let i=e.getCenter();this.options=Jt(I({},t),{proximity:i})}),S(this,Gh,e=>{let t=d(this,re);if(!t)return;let i=e.properties.feature_type,n,s=e.properties.bbox;if(s)n=vg(t,Mt.convert(s).toFlatArray());else{let o=e.geometry.coordinates,r=xg(i);n={center:o,zoom:r,speed:sd}}n=Object.assign(n,this.componentOptions.flyTo),t.flyTo(n)})}get accessToken(){return d(this,Ei).accessToken}set accessToken(e){d(this,Ei).accessToken=e}get value(){return d(this,Te).value}set value(e){d(this,Te).value=e||""}get input(){return d(this,Te)}get template(){return q0}get templateStyle(){return cn}get templateUserStyle(){return Yt(".Geocoder",d(this,Z).theme)}get componentOptions(){return d(this,al)}set componentOptions(e){A(this,al,I(I({},fg),e))}get theme(){return d(this,Z).theme}set theme(e){if(d(this,Z).theme=e,!d(this,oe)||!e)return;this.updateTemplateUserStyle(Yt(".Geocoder",e)),d(this,Z).updatePopover();let{SearchIcon:t}=d(this,oe);t.innerHTML=ae("search",e)}get popoverOptions(){return d(this,Z).popoverOptions}set popoverOptions(e){d(this,Z).popoverOptions=e}get placeholder(){return d(this,Jn)||Po(this,Vh,Hg).call(this)}set placeholder(e){A(this,Jn,e),d(this,Te)&&(d(this,Te).placeholder=this.placeholder,d(this,Te).setAttribute("aria-label",this.placeholder))}connectedCallback(){super.connectedCallback(),A(this,oe,ln(this,{Geocoder:".Geocoder",SearchIcon:".SearchIcon",Input:".Input",ClearBtn:".ClearBtn",LoadingIcon:".LoadingIcon"})),this.theme=I({},this.theme);let{Input:e,ClearBtn:t,Geocoder:i}=d(this,oe);i.addEventListener("focusout",d(this,pl)),A(this,Te,e),d(this,Z).input=e,d(this,Z).searchService=1,d(this,Z).addEventListener("input",d(this,Mo)),d(this,Z).addEventListener("select",d(this,fl)),d(this,Z).addEventListener("blur",d(this,Co)),d(this,Gt).addEventListener("suggest",d(this,ll)),d(this,Gt).addEventListener("suggesterror",d(this,cl)),d(this,Gt).addEventListener("retrieve",d(this,ul)),t.addEventListener("click",d(this,ml)),this.placeholder=d(this,Jn),this.parentElement.appendChild(d(this,Z)),e&&(e.previousElementSibling.hasAttribute("aria-live")&&e.previousElementSibling.remove(),e.insertAdjacentElement("beforebegin",ld(d(this,Z).dataSeed)))}disconnectedCallback(){let{Geocoder:e}=d(this,oe);e.removeEventListener("focusout",d(this,pl)),d(this,Z).remove(),d(this,Z).input=null,d(this,Z).removeEventListener("input",d(this,Mo)),d(this,Z).removeEventListener("select",d(this,fl)),d(this,Z).removeEventListener("blur",d(this,Co)),d(this,Gt).removeEventListener("suggest",d(this,ll)),d(this,Gt).removeEventListener("suggesterror",d(this,cl)),d(this,Gt).removeEventListener("retrieve",d(this,ul)),d(this,Zn).remove()}attributeChangedCallback(e,t,i){if(e==="access-token"){d(this,Ei).accessToken=i;return}if(e==="theme"){this.theme=ss(i);return}if(e==="popover-options"){this.popoverOptions=ss(i);return}if(e==="placeholder"){this.placeholder=i;return}if(e==="flip-coordinates"){this.componentOptions.flipCoordinates=i==="true";return}let n=e.split("-").join("_");i||delete this.options[n],this.options[n]=i,n==="language"&&(this.placeholder=d(this,Jn))}focus(){d(this,Z).focus()}search(e){this.value=e;let t={lastInput:e,inputText:e};d(this,Mo).call(this,new it("input",t))}bindMap(e){d(this,re)&&d(this,re).off("moveend",d(this,gl)),e&&e.on("moveend",d(this,gl)),A(this,re,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let t=document.createElement("div");return t.className="mapboxgl-ctrl",t.style.width="300px",t.appendChild(this),t}onRemove(){this.remove(),this.unbindMap(),d(this,hl).call(this)}getDefaultPosition(){return"top-right"}};oe=new WeakMap;Ei=new WeakMap;Gt=new WeakMap;re=new WeakMap;Te=new WeakMap;Z=new WeakMap;Zn=new WeakMap;al=new WeakMap;jh=new WeakMap;Vh=new WeakSet;Hg=function(){if(this.options.language){let e=this.options.language.split(",")[0],t=Wg.default.language(e),i=Bg.placeholder[t];if(i)return i}return"Search"};Jn=new WeakMap;ll=new WeakMap;cl=new WeakMap;ul=new WeakMap;on=new WeakMap;hl=new WeakMap;dl=new WeakMap;Mo=new WeakMap;fl=new WeakMap;Co=new WeakMap;pl=new WeakMap;Mi=new WeakMap;ml=new WeakMap;gl=new WeakMap;Gh=new WeakMap;pd.observedAttributes=["access-token","theme","popover-options","placeholder","flip-coordinates","autocomplete","language","country","bbox","limit","proximity","types","worldview","permanent"];window.MapboxGeocoder=pd;window.customElements.get("mapbox-geocoder")||customElements.define("mapbox-geocoder",pd);var pg=new Ug.default({size:512,antimeridian:!0}),Hn=1280;function mg(e,t){let{width:i,height:n}=bg(e,!0);switch(t){case"center":return[0,0];case"top":return[0,n/2];case"bottom":return[0,-1*n/2];case"left":return[i/2,0];case"right":return[-1*i/2,0];case"top-left":return[i/2,n/2];case"top-right":return[-1*i/2,n/2];case"bottom-left":return[i/2,-1*n/2];case"bottom-right":return[-1*i/2,-1*n/2]}}var bl,Yh,Qn,yl,vl,qh,xl,_l,Xh,wl,Sl,ts,$h,El,eS=class{constructor(e,t,i,n,s,o){S(this,bl,void 0),S(this,Yh,()=>{[this.anchorOffsetX,this.anchorOffsetY]=mg(this.markerElement,this.anchor),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}}),S(this,Qn,{anchorX:0,anchorY:0,globalX:0,globalY:0,correctionX:0,correctionY:0}),S(this,yl,!1),S(this,vl,void 0),S(this,qh,a=>{this.isActive&&(a.preventDefault(),a.stopPropagation(),d(this,ts).call(this,a),window.addEventListener("pointermove",d(this,_l)),window.addEventListener("pointerup",d(this,xl)))}),S(this,xl,()=>{window.removeEventListener("pointermove",d(this,_l)),window.removeEventListener("pointerup",d(this,xl))}),S(this,_l,a=>{a.preventDefault(),a.stopPropagation();let l=this.curPointerXPos-a.pageX,c=this.curPointerYPos-a.pageY;this.markerDeltaX+=l,this.markerDeltaY-=c,this.markerDeltaX=Math.max(Math.min(this.imgElement.width/2,this.markerDeltaX),this.imgElement.width/2*-1),this.markerDeltaY=Math.max(Math.min(this.imgElement.height/2,this.markerDeltaY),this.imgElement.height/2*-1);let u=this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],h=this.imgCenterPx[1]-this.imgCenterAdjustedPx[1],f=this.markerDeltaX-u,p=this.markerDeltaY+h;this.markerTransform={globalX:f,globalY:p},d(this,ts).call(this,a)}),S(this,Xh,a=>{this.isActive&&(a.preventDefault(),a.stopPropagation(),d(this,ts).call(this,a),window.addEventListener("pointermove",d(this,Sl)),window.addEventListener("pointerup",d(this,wl)))}),S(this,wl,()=>{window.removeEventListener("pointermove",d(this,Sl)),window.removeEventListener("pointerup",d(this,wl))}),S(this,Sl,a=>{a.preventDefault();let l=Math.round(this.imgContainerElement.scrollTop+(this.curPointerYPos-a.pageY));l=Math.max(Math.min(this.imgElement.height-this.imgContainerElement.clientHeight,l),0);let c=Math.round(this.imgContainerElement.scrollLeft+(this.curPointerXPos-a.pageX));c=Math.max(Math.min(this.imgElement.width-this.imgContainerElement.clientWidth,c),0),this.imgContainerElement.scrollTop=l,this.imgContainerElement.scrollLeft=c;let u=Math.round(c-(this.imgElement.width-this.imgContainerElement.clientWidth)/2),h=Math.round((this.imgElement.height-this.imgContainerElement.clientHeight)/2-l);if(this.imgCenterAdjustedPx=[this.imgCenterPx[0]+u,this.imgCenterPx[1]-h],!this.keepMarkerCentered){let f=this.markerDeltaX+u,p=this.markerDeltaY+h;this.markerTransform={globalX:f,globalY:p}}d(this,El).call(this,c,l),d(this,ts).call(this,a)}),S(this,ts,a=>{this.curPointerXPos=a.pageX,this.curPointerYPos=a.pageY}),S(this,$h,()=>{let{anchorX:a,anchorY:l,globalX:c,globalY:u,correctionX:h,correctionY:f}=d(this,Qn),p=a-c+h,m=l+u+f;this.markerElement.style.transform=`translate(calc(-50% + ${p}px), calc(-50% + ${m}px))`}),this.reCenter=()=>{let a=(this.imgElement.height-this.imgContainerElement.clientHeight)/2,l=(this.imgElement.width-this.imgContainerElement.clientWidth)/2;this.imgContainerElement.scrollTop=a,this.imgContainerElement.scrollLeft=l,this.imgCenterAdjustedPx=this.imgCenterPx,this.markerDeltaX=this.markerDeltaY=0,this.markerTransform={globalX:0,globalY:0,correctionX:0,correctionY:0}},this.handleMinimapResize=()=>{if(!this.imgElement.height||!this.imgElement.width)return;let a=this.imgCenterOffset.x,l=this.imgCenterOffset.y,c=this.imgElement.width/2-a-this.imgContainerElement.clientWidth/2,u=this.imgElement.height/2-l-this.imgContainerElement.clientHeight/2;this.imgContainerElement.scrollLeft=c,this.imgContainerElement.scrollTop=u,d(this,El).call(this,c,u)},S(this,El,(a,l)=>{let c=this.imgCenterOffset.x,u=this.imgCenterOffset.y,{correctionX:h,correctionY:f}=this.markerTransform,p={};if(a/2<c*-1){let m=c*-1-a/2;p.correctionX=m*2}else a<0?p.correctionX=a:h!==0&&(p.correctionX=0);if(l/2<u*-1){let m=u*-1-l/2;p.correctionY=m*2}else l<0?p.correctionY=l:f!==0&&(p.correctionY=0);this.markerTransform=p}),this.markerElement=i,this.imgContainerElement=e,this.imgElement=t,this.keepMarkerCentered=n,this.zoom=s,this.anchor=o,this.curPointerXPos=0,this.curPointerYPos=0,this.markerDeltaX=0,this.markerDeltaY=0,this.imgContainerElement.addEventListener("pointerdown",d(this,Xh)),this.keepMarkerCentered||this.markerElement.addEventListener("pointerdown",d(this,qh)),new ResizeObserver(d(this,Yh)).observe(this.markerElement)}get anchor(){return d(this,bl)}set anchor(e){A(this,bl,e),[this.anchorOffsetX,this.anchorOffsetY]=mg(this.markerElement,e),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}}get markerTransform(){return d(this,Qn)}set markerTransform(e){A(this,Qn,I(I({},d(this,Qn)),e)),d(this,$h).call(this)}get isActive(){return d(this,yl)}set isActive(e){this.imgContainerElement.style.touchAction=e?"none":"",A(this,yl,e)}get coordinate(){let e=this.keepMarkerCentered?this.imgCenterAdjustedPx:[this.imgCenterPx[0]-this.markerDeltaX,this.imgCenterPx[1]+this.markerDeltaY];if(rd(e,this.imgCenterPx))return d(this,vl);{let t=pg.ll(e,this.zoom);return[lg(t[0],6),lg(t[1],6)]}}set coordinate(e){A(this,vl,e),this.imgCenterPx=this.imgCenterAdjustedPx=pg.px(e,this.zoom)}get imgCenterOffset(){return{x:this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],y:this.imgCenterPx[1]-this.imgCenterAdjustedPx[1]}}};bl=new WeakMap;Yh=new WeakMap;Qn=new WeakMap;yl=new WeakMap;vl=new WeakMap;qh=new WeakMap;xl=new WeakMap;_l=new WeakMap;Xh=new WeakMap;wl=new WeakMap;Sl=new WeakMap;ts=new WeakMap;$h=new WeakMap;El=new WeakMap;var iS='<svg width="88" height="23" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill-rule="evenodd"><defs><path id="g" d="M11.5 2.25a9.25 9.25 0 1 1 0 18.5 9.25 9.25 0 0 1 0-18.5zM7 15.98c-.05-.33-.83-5.8 2.23-8.87a4.4 4.4 0 0 1 3.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39a4.4 4.4 0 0 1-1.28 3.13C12.72 16.93 7 16 7 16v-.02zm8.3-5.48-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z"/><path id="b" d="M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19A3.77 3.77 0 0 1 50.86 15v3.77c0 .13-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01.01-.01c.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V15a3.7 3.7 0 0 1-2.73 1.19c-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.38-.19a4.24 4.24 0 0 0-4.16 3.29 4.07 4.07 0 0 0 0 1.77 4.23 4.23 0 0 0 4.17 3.3 4.22 4.22 0 0 0 4.26-4.19 4.2 4.2 0 0 0-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18a4 4 0 0 1 3.84 3.28c.13.59.13 1.2 0 1.8a4 4 0 0 1-3.84 3.29A3.77 3.77 0 0 1 60.86 15v.77c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4a.23.23 0 0 1-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55a2.73 2.73 0 0 1 2.44-1.56c1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.62 0h-1.61a.27.27 0 0 1-.12-.03c-.1-.06-.13-.19-.06-.28l2.43-3.71-2.4-3.65a.21.21 0 0 1-.02-.12.2.2 0 0 1 .2-.21h1.61c.13 0 .24.06.3.17L82 10.54l1.4-2.37a.34.34 0 0 1 .3-.17h1.6l.12.03c.1.06.13.19.06.28l-2.37 3.65 2.43 3.7.01.13a.2.2 0 0 1-.2.21h-1.61a.33.33 0 0 1-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 0 1-.3.17zm-7.12-1.49A2.47 2.47 0 0 1 70.7 12a2.47 2.47 0 0 1 2.42-2.52 2.47 2.47 0 0 1 2.42 2.51 2.48 2.48 0 0 1-2.42 2.52zm-19.87 0a2.48 2.48 0 0 1-2.42-2.48v-.07a2.47 2.47 0 0 1 2.4-2.49 2.47 2.47 0 0 1 2.41 2.51 2.47 2.47 0 0 1-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51a2.47 2.47 0 0 1 2.4-2.52 2.46 2.46 0 0 1 2.41 2.48l.02.08zm18.12 2.47a2.47 2.47 0 0 1-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51a2.47 2.47 0 0 1-2.42 2.51z"/></defs><mask id="c"><rect width="100%" height="100%" fill="#fff"/><use xlink:href="#g"/><use xlink:href="#b"/></mask><g opacity=".3" stroke="#000" stroke-width="3"><circle mask="url(#c)" cx="11.5" cy="11.5" r="9.25"/><use xlink:href="#b" mask="url(#c)"/></g><g opacity=".9" fill="#fff"><use xlink:href="#g"/><use xlink:href="#b"/></g></svg>',gg=16,nS=Qt(`
<template>
  <div class="MapboxAddressMinimap" aria-hidden="true">
    <div class="MinimapImageContainer">
      <img class="MinimapImage" draggable="false"></img>
      <div class="MinimapInnerFrame">
        <div class="MinimapMarker"></div>
        <div class="MinimapAttribution">
          <div class="MinimapAttributionLogo">
            <a target="_blank" rel="noopener nofollow" href="https://www.mapbox.com/" aria-label="Mapbox logo">
              ${iS}
            </a>
          </div>
          <div class="MinimapAttributionText">
            <a target="_blank" href='https://www.mapbox.com/about/maps/'>\xA9 Mapbox</a><a target="_blank" href='http://www.openstreetmap.org/copyright'>\xA9 OpenStreetMap</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
`),sS=Qt(`
<template>
  <button type="button" class="MinimapStyleToggle"></button>
</template>
`),oS=Qt(`
<template>
  <div class="MinimapFooter">Adjust the marker on the map if it doesn't precisely match your location. This helps improve address data quality.</div>
</template>
`),Kh="Adjust pin",Zh="Save",Jh="Cancel",rS=Qt(`
<template>
  <div class="MinimapEditButtons">
    <div class="Button ButtonPrimary MinimapButtonAdjust">${Kh}</div>
    <div class="Button ButtonPrimary MinimapButtonSave" aria-hidden="true">${Zh}</div>
    <div class="Button MinimapButtonCancel" aria-hidden="true">${Jh}</div>
  </div>
</template>
`),Ml,es,Lo,Ze,rn,Ae,ke,st,xt,Cl,Ll,Tl,is,Al,kl,Pl,Rl,Dl,Ol,To,Il,Fl,Bl,Nl,Qh,td,Wl,Ao,ko,Hl,Ul,ed,zl,id,md=class extends Ci{constructor(){super(...arguments),S(this,Ml,!1),this.keepMarkerCentered=!1,this.markerAnchor="bottom",S(this,es,!1),S(this,Lo,!1),S(this,Ze,void 0),S(this,rn,""),S(this,Ae,void 0),S(this,ke,void 0),S(this,st,void 0),S(this,xt,void 0),S(this,Cl,void 0),S(this,Ll,{}),S(this,Tl,!1),S(this,is,"default"),S(this,Al,void 0),S(this,kl,void 0),S(this,Pl,void 0),S(this,Rl,["mapbox","streets-v11"]),S(this,Dl,void 0),S(this,Ol,void 0),S(this,To,()=>{let{ImageContainer:e,ButtonAdjust:t,ButtonSave:i,ButtonCancel:n}=d(this,st);d(this,es)?(e.classList.add(`${this.dataset.seed}--draggable`),d(this,xt).isActive=!0,t.setAttribute("aria-hidden","true"),i.removeAttribute("aria-hidden"),n.removeAttribute("aria-hidden")):(e.classList.remove(`${this.dataset.seed}--draggable`),d(this,xt).isActive=!1,t.removeAttribute("aria-hidden"),i.setAttribute("aria-hidden","true"),n.setAttribute("aria-hidden","true"))}),S(this,Il,()=>{A(this,es,!0),d(this,To).call(this)}),S(this,Fl,()=>{if(this.feature.properties.full_address&&!rd(this.feature.geometry.coordinates,d(this,xt).coordinate)){let[e,t]=d(this,xt).coordinate;Pg(this.accessToken,{originalCoordinate:this.feature.geometry.coordinates,originalAddress:this.feature.properties.full_address,changes:{location:{longitude:e,latitude:t}}})}this.onSaveMarkerLocation&&this.onSaveMarkerLocation(d(this,xt).coordinate),A(this,es,!1),d(this,To).call(this)}),S(this,Bl,()=>{d(this,xt).reCenter(),A(this,es,!1),d(this,To).call(this)}),S(this,Nl,()=>{this.mapStyleMode=this.mapStyleMode==="default"?"satellite":"default"}),S(this,Qh,()=>{d(this,Lo)||d(this,xt).reCenter(),A(this,Lo,!0),d(this,xt)&&d(this,xt).handleMinimapResize()}),S(this,td,()=>{A(this,Lo,!1)}),S(this,Wl,e=>{if(d(this,Ae)===0||d(this,ke)===0)return"";let[t,i]=this.defaultMapStyle,n=_g(t,i),s=this.mapStyleMode==="default"?n:U0,o=z0+me.autofillSessionToken.toString(),r=s+at.convert(e).toArray().join(",")+","+gg+",0/"+Math.min(d(this,Ae)*2,Hn)+"x"+Math.min(d(this,ke)*2,Hn)+"?access_token="+this.accessToken+"&attribution=false&logo=false";return me.autofillSessionEnabled&&(r+=`&sku=${o}`),r}),S(this,Ao,()=>{if(d(this,Ze)){let e=d(this,Ze).geometry.coordinates;A(this,rn,d(this,Wl).call(this,e));let{Image:t}=d(this,st);t.src=d(this,rn)}}),S(this,ko,e=>`url("${rw(e==="default"?"styleToggleDefault":"styleToggleSatellite",this.theme)}")`),S(this,Hl,()=>{let{MapboxAddressMinimap:e,ImageContainer:t,Image:i}=d(this,st),{width:n,height:s}=bg(this.container),[o,r]=[d(this,Ae),d(this,ke)];A(this,Ae,Math.min(n,Hn)),A(this,ke,Math.min(s,Hn)),e.style.setProperty("width",`${d(this,Ae)}px`),e.style.setProperty("height",`${d(this,ke)}px`),t.style.setProperty("height",`${d(this,ke)}px`),t.style.setProperty("width",`${d(this,Ae)}px`);let[a,l]=[i.width,i.height];d(this,Ae)>o&&d(this,Ae)>a/2&&a<Hn||d(this,ke)>r&&d(this,ke)>l/2&&l<Hn?d(this,Ao).call(this):d(this,xt)&&d(this,xt).handleMinimapResize()}),S(this,Ul,()=>{if(this.querySelector(".MinimapFooter"))return;let t=this.prepareTemplate(oS),i=this.querySelector(".MapboxAddressMinimap");if(!i||(i.appendChild(t),this.querySelector(".MinimapEditButtons")))return;let s=this.prepareTemplate(rS);this.querySelector(".MinimapInnerFrame").appendChild(s),A(this,st,Jt(I({},d(this,st)),{EditButtons:this.querySelector(".MinimapEditButtons"),ButtonAdjust:this.querySelector(".MinimapButtonAdjust"),ButtonSave:this.querySelector(".MinimapButtonSave"),ButtonCancel:this.querySelector(".MinimapButtonCancel")}));let{ButtonAdjust:r,ButtonSave:a,ButtonCancel:l}=d(this,st);r.addEventListener("click",d(this,Il)),a.addEventListener("click",d(this,Fl)),l.addEventListener("click",d(this,Bl))}),S(this,ed,()=>{if(!d(this,st))return;let{EditButtons:e,ButtonAdjust:t,ButtonSave:i,ButtonCancel:n}=d(this,st),s=this.querySelector(".MinimapFooter");s?.remove(),e?.remove(),t&&(t.remove(),t.removeEventListener("click",d(this,Il))),i&&(i.remove(),i.removeEventListener("click",d(this,Fl))),n&&(n.remove(),n.removeEventListener("click",d(this,Bl))),delete d(this,st).EditButtons,delete d(this,st).ButtonAdjust,delete d(this,st).ButtonSave,delete d(this,st).ButtonCancel}),S(this,zl,()=>{if(this.querySelector(".MinimapStyleToggle"))return;let t=this.prepareTemplate(sS),i=this.querySelector(".MinimapInnerFrame");i&&(i.appendChild(t),d(this,st).MapStyleToggle=t,t.addEventListener("click",d(this,Nl)),t.style.backgroundImage=d(this,ko).call(this,this.mapStyleMode==="default"?"satellite":"default"),t.setAttribute("title",`Switch to ${this.mapStyleMode==="default"?"Satellite":"Default"}`))}),S(this,id,()=>{if(!d(this,st))return;let{MapStyleToggle:e}=d(this,st);e&&(e.remove(),e.removeEventListener("click",d(this,Nl)),delete d(this,st).MapStyleToggle)})}get canAdjustMarker(){return d(this,Ml)}set canAdjustMarker(e){A(this,Ml,e),e?d(this,Ul).call(this):d(this,ed).call(this)}get accessToken(){return d(this,Cl)||me.accessToken}set accessToken(e){A(this,Cl,e)}get feature(){return d(this,Ze)}set feature(e){A(this,Ze,e),e?this.show():this.hide()}get template(){return nS}get templateStyle(){return cn}get templateUserStyle(){return Yt(".MapboxAddressMinimap",this.theme)}get satelliteToggle(){return d(this,Tl)}set satelliteToggle(e){A(this,Tl,e),e?d(this,zl).call(this):d(this,id).call(this)}get theme(){return d(this,Ll)}set theme(e){if(A(this,Ll,e),!d(this,st)||!e)return;this.updateTemplateUserStyle(Yt(".MapboxAddressMinimap",e));let{Marker:t,MapStyleToggle:i}=d(this,st);t.innerHTML=ae("marker",e),i&&(i.style.backgroundImage=d(this,ko).call(this,this.mapStyleMode==="default"?"satellite":"default"))}get adjustBtnText(){return d(this,Al)||Kh}set adjustBtnText(e){A(this,Al,e);let t=this.querySelector(".MinimapButtonAdjust");t.textContent=e||Kh}get saveBtnText(){return d(this,kl)||Zh}set saveBtnText(e){A(this,kl,e);let t=this.querySelector(".MinimapButtonSave");t.textContent=e||Zh}get cancelBtnText(){return d(this,Pl)||Jh}set cancelBtnText(e){A(this,Pl,e);let t=this.querySelector(".MinimapButtonCancel");t.textContent=e||Jh}get mapStyleMode(){return d(this,is)}set mapStyleMode(e){let t=d(this,is);if(t===e||(A(this,is,e),!d(this,st)))return;let{MapStyleToggle:i}=d(this,st);i&&(i.style.backgroundImage=d(this,ko).call(this,t),i.setAttribute("title",`Switch to ${t==="satellite"?"Satellite":"Default"}`),d(this,Ao).call(this))}get defaultMapStyle(){return d(this,Rl)}set defaultMapStyle(e){A(this,Rl,e),d(this,Ao).call(this)}get footer(){return d(this,Dl)}set footer(e){A(this,Dl,e);let t=this.querySelector(".MinimapFooter");t&&(typeof e=="string"?(t.textContent=e,t.removeAttribute("aria-hidden")):e?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden","true"))}get container(){return d(this,Ol)}set container(e){e&&(e.style.position="relative",A(this,Ol,e))}show(){if(!d(this,Ze))return;let e=d(this,Ze).geometry.coordinates;d(this,xt).coordinate=e,A(this,rn,d(this,Wl).call(this,e));let{MapboxAddressMinimap:t,Image:i}=d(this,st);i.src=d(this,rn),t.removeAttribute("aria-hidden")}hide(){let{MapboxAddressMinimap:e}=d(this,st);e.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),A(this,st,ln(this,{MapboxAddressMinimap:".MapboxAddressMinimap",ImageContainer:".MinimapImageContainer",Image:".MinimapImage",Marker:".MinimapMarker",MapStyleToggle:".MinimapStyleToggle",EditButtons:".MinimapEditButtons",ButtonAdjust:".MinimapButtonAdjust",ButtonSave:".MinimapButtonSave",ButtonCancel:".MinimapButtonCancel"})),this.mapStyleMode=d(this,is),this.theme=I({},this.theme),this.canAdjustMarker&&d(this,Ul).call(this),this.satelliteToggle&&d(this,zl).call(this),this.container=this.parentElement,new ResizeObserver(d(this,Hl)).observe(this.container),d(this,Hl).call(this);let{MapboxAddressMinimap:t,ImageContainer:i,Image:n,Marker:s}=d(this,st);A(this,xt,new eS(i,n,s,this.keepMarkerCentered,gg,this.markerAnchor)),d(this,xt).reCenter(),n.onload=d(this,Qh),n.onerror=d(this,td),n.src=d(this,rn),d(this,Ze)?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden","true")}attributeChangedCallback(e,t,i){if(e==="access-token")this.accessToken=i;else if(e==="can-adjust-marker")this.canAdjustMarker=i==="true";else if(e==="keep-marker-centered")this.keepMarkerCentered=i==="true";else if(e==="marker-anchor"){let n=i;this.markerAnchor=n,d(this,xt)&&(d(this,xt).anchor=n)}else e==="satellite-toggle"&&(this.satelliteToggle=i==="true")}};Ml=new WeakMap;es=new WeakMap;Lo=new WeakMap;Ze=new WeakMap;rn=new WeakMap;Ae=new WeakMap;ke=new WeakMap;st=new WeakMap;xt=new WeakMap;Cl=new WeakMap;Ll=new WeakMap;Tl=new WeakMap;is=new WeakMap;Al=new WeakMap;kl=new WeakMap;Pl=new WeakMap;Rl=new WeakMap;Dl=new WeakMap;Ol=new WeakMap;To=new WeakMap;Il=new WeakMap;Fl=new WeakMap;Bl=new WeakMap;Nl=new WeakMap;Qh=new WeakMap;td=new WeakMap;Wl=new WeakMap;Ao=new WeakMap;ko=new WeakMap;Hl=new WeakMap;Ul=new WeakMap;ed=new WeakMap;zl=new WeakMap;id=new WeakMap;md.observedAttributes=["access-token","can-adjust-marker","keep-marker-centered","marker-anchor","satellite-toggle"];window.MapboxAddressMinimap=md;window.customElements.get("mapbox-address-minimap")||customElements.define("mapbox-address-minimap",md);var aS,lS,cS,uS,hS,dS,fS,pS,mS,gS,bS,yS,vS,xS;aS=new WeakMap;lS=new WeakMap;cS=new WeakMap;uS=new WeakMap;hS=new WeakMap;dS=new WeakMap;fS=new WeakMap;pS=new WeakMap;mS=new WeakMap;gS=new WeakMap;bS=new WeakMap;yS=new WeakMap;vS=new WeakMap;xS=new WeakMap;var _S,wS,SS,ES,MS,CS,LS,TS;_S=new WeakMap;wS=new WeakMap;SS=new WeakMap;ES=new WeakMap;MS=new WeakMap;CS=new WeakMap;LS=new WeakMap;TS=new WeakMap;import"mapbox-gl";import"mapbox-gl";import"mapbox-gl";import"mapbox-gl";import"mapbox-gl";import"mapbox-gl";import"mapbox-gl";import"mapbox-gl";import"mapbox-gl";var Yl=class{static ROUTABLE_CLASSES_BY_MODE={walking:new Set(["trunk","pedestrian","path","track","residential","service","street","tertiary","secondary","unclassified"]),cycling:new Set(["trunk","path","track","residential","service","street","tertiary","secondary","unclassified"]),driving:new Set(["motorway","trunk","primary","secondary","tertiary","street","residential","service","unclassified"]),"driving-traffic":new Set(["motorway","trunk","primary","secondary","tertiary","street","residential","service","unclassified"])};static EXCLUDED_TYPES=new Set(["bridleway","raceway","escape","construction"]);static isRoutable=async({lngLat:t,map:i,accessToken:n,routeType:s,maxGap:o=D.DEFAULT_ROUTABLE_MAX_GAP,debug:r=!1})=>{if(!s)return{found:!1};n||(n=Ft());let a=this._checkRenderedFeatures(t,i.querySourceFeatures("composite",{sourceLayer:"road"}),s,o,r);return a.found?(r&&console.debug("Found routable feature in rendered map",a),a):(a=await this._checkApiFeatures(t,n,s,o,r),r&&console.debug(`${a.found?"Found":"No"} routable feature near waypoint via API`,a),a)};static _checkRenderedFeatures=(t,i,n,s,o)=>{let r=null;for(let a of i)if(this._isFeatureRoutable(a.properties,n)&&a.geometry){let l=this._snapToFeatureGeometry(a.geometry,t,s,o);l&&(r===null||l.properties.dist<r.dist)&&(r={dist:l.properties.dist,point:l,name:a.properties?.name})}return r?{found:!0,lngLat:new zg.LngLat(r.point.geometry.coordinates[0],r.point.geometry.coordinates[1]),name:r.name}:(o&&console.debug(`Failed to find rendered routable line for ${t.toArray()}`),{found:!1})};static _checkApiFeatures=async(t,i,n,s,o)=>{let{x:a,y:l}=this._lngLatToTile(t.lng,t.lat,14),c=this._metresToTileDelta(t.lat,s,14),u=[];for(let p=-c;p<=c;p++)for(let m=-c;m<=c;m++)u.push({x:a+p,y:l+m});let h=fi([t.lng,t.lat]),f=null;for(let{x:p,y:m}of u){let g=await this._fetchVectorTile(14,p,m,i);if(g?.layers.road)for(let b=0;b<g.layers.road.length;b++){let y=g.layers.road.feature(b),v=y.properties;if(!this._isFeatureRoutable(v,n)||y.type!==2)continue;let M=y.toGeoJSON(p,m,14);if(!(M.geometry.type!=="LineString"&&M.geometry.type!=="MultiLineString"))try{let w=$r(M,h,{units:"meters"}),x=w.properties?.dist??1/0;x<=s&&(f===null||x<f.dist)&&(f={dist:x,point:w,name:v.name})}catch(w){o&&console.warn(`isAPIRoutable failed for ${t.toArray()}`,w);continue}}}return f?{found:!0,lngLat:new zg.LngLat(f.point.geometry.coordinates[0],f.point.geometry.coordinates[1]),name:f.name}:(o&&console.debug(`Failed to find routable line for ${t.toArray()} via API`),{found:!1})};static _isFeatureRoutable=(t,i)=>{let n=t?.class,s=t?.type,o=t?.foot,r=t?.bicycle;return this.ROUTABLE_CLASSES_BY_MODE[i].has(n)?this.EXCLUDED_TYPES.has(s)?i==="walking"?["yes","designated","permissive"].includes(o):i==="cycling"?["yes","designated","permissive"].includes(r):!1:!0:!1};static _snapToFeatureGeometry=(t,i,n,s)=>{try{if(t.type==="LineString"){let o=$r({type:"Feature",geometry:t},[i.lng,i.lat],{units:"meters"});if(o.properties.dist<=n)return o}else if(t.type==="MultiLineString")for(let o of t.coordinates){let r=$r({type:"Feature",geometry:{type:"LineString",coordinates:o}},[i.lng,i.lat],{units:"meters"});if(r.properties.dist<=n)return r}}catch(o){s&&console.warn("Snap to feature geometry failed",o)}return null};static _lngLatToTile=(t,i,n)=>{let s=2**n,o=Math.floor((t+180)/360*s),r=i*Math.PI/180,a=Math.floor((1-Math.log(Math.tan(r)+1/Math.cos(r))/Math.PI)/2*s);return{x:o,y:a}};static _metresToTileDelta=(t,i,n)=>{let s=ji.EARTH_CIRCUMFERENCE*Math.cos(t*Math.PI/180)/2**n;return Math.ceil(i/s)};static _fetchVectorTile=async(t,i,n,s)=>{let o=`${D.API_URL}${D.STREETS_TILESET_ID}/${t}/${i}/${n}.mvt`;try{let r=await ci.get(o,{params:{access_token:s},responseType:"arraybuffer"}),a=new Uint8Array(r.data);return new Js(new Zs(a))}catch(r){return console.error(`Failed to fetch vector tile z:${t} x:${i} y:${n}`,r),null}}};var Oo=class extends EventTarget{constructor(i,n,s=!1){super();this.routeForm=i;this.waypoint=n;this.debug=s;this.settings=i.settings.waypointFormSettings,this.elements=this._buildListItem(),this._addEventListeners(),this._getWaypointInfo()}elements;settings;destroy(){this._removeEventListeners(),this.elements.listItem.remove(),this.elements=void 0}updateName=i=>{this.elements.name.value=i,this._nameChangeHandler()};get isRoutable(){return this.waypoint.isRoutable}set isRoutable(i){i.toString()!==this.elements.routableWarning.dataset.isRoutable&&(i?this.elements.routableWarning.innerHTML="":this.elements.routableWarning.append(this._routableWarning),this.elements.routableWarning.dataset.isRoutable=i.toString()),this.waypoint.isRoutable=i}_getWaypointInfo=()=>{this._findWaypointName(this.waypoint).then(i=>(!this.waypoint.name&&i.name&&(this._updateCoordinates(i.lngLat,!1),this.updateName(i.name)),this._checkIsRoutable())).then(i=>{this.isRoutable=i.found,this.isRoutable&&i.lngLat&&this.routeForm.routeType&&this._updateCoordinates(i.lngLat,!1),this.waypoint.name||i.name&&this.updateName(i.name),this.debug&&console.debug("foundRoutableResult:",i),this.routeForm.route.updateWaypointLayerSource(this.routeForm.waypoints),this.elements.listItem.scrollIntoView({behavior:"smooth",block:"end"}),queueMicrotask(()=>{this.debug&&console.debug("Waypoint info loaded, dispatching event",this),this.dispatchEvent(new CustomEvent("waypointInfoLoaded",{detail:this.waypoint}))})}).catch(i=>{this.debug&&console.error("Error getting waypoint info:",i)})};_updateCoordinates=(i,n=!0)=>{this.waypoint.longitude=i.lng,this.waypoint.latitude=i.lat;let s=`${this.waypoint.latitude}, ${this.waypoint.longitude}`,o=`${this.waypoint.latitude.toFixed(5)}, ${this.waypoint.longitude.toFixed(5)}`;this.elements.coordinates.input.value=s,this.elements.coordinates.display.textContent=o,n&&this.routeForm.route.updateWaypointLayerSource(this.routeForm.waypoints)};_swapWithNext=()=>{let i=this.elements.listItem.nextElementSibling;i&&this.elements.listItem.parentNode.insertBefore(this.elements.listItem,i.nextElementSibling)};_swapWithPrevious=()=>{let i=this.elements.listItem.previousElementSibling;i&&this.elements.listItem.parentNode.insertBefore(this.elements.listItem,i)};_delete=()=>{this.routeForm.deleteWaypointItem(this),this.routeForm.waypointItems=this.routeForm.waypointItems.filter(i=>i!==this),this.routeForm.state=this.routeForm.waypointItems.length?"loaded":"empty",queueMicrotask(()=>this.routeForm.route.updateWaypointLayerSource(this.routeForm.waypoints)),this.destroy()};_autoGrowTextarea=()=>{this.elements.name.style.height="auto",this.elements.name.style.height=`${this.elements.name.scrollHeight}px`};_buildListItem=()=>{let i={};i.buttons={},i.coordinates={container:void 0,input:void 0,display:void 0};let n=kf(),s=`${this.waypoint.latitude}, ${this.waypoint.longitude}`,o=`${this.waypoint.latitude.toFixed(5)}, ${this.waypoint.longitude.toFixed(5)}`,r=`${this.waypoint.isRoutable!==!1}`,a=y=>{let v=this.settings.icons[y],M=document.createElement("div");return M.classList.add(...v.containerClassList),y==="grip"&&M.classList.add(Q.MOVE_HANDLE_CLASS),M.title=v.label,M.setAttribute("aria-label",v.label),M.role="button",M.dataset.action=y,M.append(et(v.svgId,[Q.STANDARD_ICON_CLASS])),M};i.listItem=document.createElement("li"),i.listItem.id=n,i.listItem.role="group",i.listItem.dataset.type="waypoint-form-item",i.listItem.classList.add(...this.settings.containerClassList),i.listItem.setAttribute("aria-labelledby",`${n}-name`),i.listItem.setAttribute("aria-grabbed","false");let l=document.createElement("div");l.classList.add(...this.settings.gridClassList);let c=document.createElement("div");c.classList.add(...this.settings.columnClassList.left),i.buttons.moveUp=a("moveUp"),i.buttons.moveDown=a("moveDown"),c.append(i.buttons.moveUp,i.buttons.moveDown);let u=document.createElement("div");u.classList.add(...this.settings.columnClassList.center);let h=document.createElement("div");h.classList.add(...this.settings.controlGroup.classList);let f=document.createElement("span");f.classList.add(...this.settings.controlGroup.gps.labelClassList),f.textContent=this.settings.controlGroup.gps.labelText,i.coordinates.container=document.createElement("div"),i.coordinates.container.classList.add(...this.settings.controlGroup.gps.controlClassList),i.coordinates.display=document.createElement("span"),i.coordinates.display.textContent=o,i.coordinates.container.append(i.coordinates.display,et(this.settings.controlGroup.gps.svgId)),i.coordinates.container.title=this.settings.controlGroup.gps.title,i.coordinates.container.setAttribute("aria-label",this.settings.controlGroup.gps.ariaLabel),i.coordinates.container.dataset.type="gps",i.coordinates.input=document.createElement("input"),i.coordinates.input.id=`${n}--coords`,i.coordinates.input.dataset.field="coordinates",i.coordinates.input.hidden=!0,i.coordinates.input.value=s,h.append(f,i.coordinates.container,i.coordinates.input);let p=document.createElement("div");p.classList.add(...this.settings.controlGroup.classList);let m=document.createElement("span");m.classList.add(...this.settings.controlGroup.waypointName.labelClassList),m.textContent=this.settings.controlGroup.waypointName.labelText,m.id=`${n}-name-label`,i.name=document.createElement("textarea"),i.name.classList.add(...this.settings.controlGroup.waypointName.controlClassList),i.name.id=`${n}-name`,i.name.value=this.waypoint.name||"",i.name.setAttribute("aria-label",this.settings.controlGroup.waypointName.ariaLabel),i.name.setAttribute("aria-describedby",`${n}-name-label`),i.name.dataset.field="name-label",i.name.rows=1,p.append(m,i.name);let g=document.createElement("input");g.id=`${n}--routable`,g.dataset.field="isRoutable",g.hidden=!0,g.value=r,u.append(h,p,g);let b=document.createElement("div");return b.classList.add(...this.settings.columnClassList.right),i.buttons.grip=a("grip"),i.buttons.bin=a("bin"),b.append(i.buttons.grip,i.buttons.bin),i.routableWarning=document.createElement("div"),l.append(c,u,b),i.listItem.append(l,i.routableWarning),i};_findWaypointName=async i=>{if(i.name)return{name:i.name,lngLat:new gd.LngLat(i.longitude,i.latitude)};try{let n=this.routeForm.route.map,s={...i};return await this.routeForm.route.featureLayerManager.findFeatureNameAtCoord([s.longitude,s.latitude])}catch(n){return this.debug&&console.error("Error finding waypoint name:",n),{name:void 0,lngLat:new gd.LngLat(i.longitude,i.latitude)}}};_checkIsRoutable=async()=>this.waypoint.isRoutable===void 0?await Yl.isRoutable({lngLat:new gd.LngLat(this.waypoint.longitude,this.waypoint.latitude),map:this.routeForm.route.map,accessToken:this.routeForm.route.mapOptions.accessToken,routeType:this.routeForm.routeType,maxGap:this.routeForm.route.settings.maxGap,debug:this.debug}):{found:!!this.waypoint.isRoutable};_buttonClickHandler=i=>{switch(i){case"moveUp":this._swapWithPrevious();break;case"moveDown":this._swapWithNext();break;case"bin":this._delete();break;default:break}};_coordsClickHandler=()=>{this.routeForm.route.map.flyTo({center:[this.waypoint.longitude,this.waypoint.latitude]})};_nameChangeHandler=()=>{this.waypoint.name=this.elements.name.value,this.routeForm.route.updateWaypointLayerSource(this.routeForm.waypoints),this._autoGrowTextarea()};_nameKeyDownHandler=i=>{i.key==="Enter"&&(i.preventDefault(),this.elements.name.blur())};_nameFocusHandler=()=>{this.elements.name.select()};_formExpandedHandler=i=>{i.detail&&this._autoGrowTextarea()};_addEventListeners=()=>{this.routeForm.addEventListener("expandEvent",this._formExpandedHandler),this.elements.name.addEventListener("input",this._autoGrowTextarea),this.elements.name.addEventListener("change",this._nameChangeHandler),this.elements.name.addEventListener("keydown",this._nameKeyDownHandler),this.elements.name.addEventListener("focus",this._nameFocusHandler),this.elements.coordinates.container.addEventListener("click",this._coordsClickHandler);for(let i of Object.keys(this.elements.buttons))this.elements.buttons[i].addEventListener("click",()=>this._buttonClickHandler(i))};_removeEventListeners=()=>{this.routeForm.removeEventListener("expandEvent",this._formExpandedHandler),this.elements.name.removeEventListener("input",this._autoGrowTextarea),this.elements.name.removeEventListener("change",this._nameChangeHandler),this.elements.name.removeEventListener("keydown",this._nameKeyDownHandler),this.elements.name.removeEventListener("focus",this._nameFocusHandler),this.elements.coordinates.container.removeEventListener("click",this._coordsClickHandler);for(let i of Object.keys(this.elements.buttons))this.elements.buttons[i].removeEventListener("click",()=>this._buttonClickHandler(i))};get _routableWarning(){let i=document.createElement("div"),n=this.settings.icons.routableWarning;return i.classList.add(...n.containerClassList),i.append(et(n.svgId),n.label),i.setAttribute("role","alert"),i.setAttribute("aria-live","assertive"),i}};var Io=class extends EventTarget{constructor(i,n=!1){super();this.route=i;this.debug=n;this.settings=i.settings.form,this._formElements=this._buildForm(),this.expanded=!!this.settings.initialStateExpanded,(this.route.parameters.waypoints??[]).length>0?queueMicrotask(()=>this._loadForm()):this.state="empty";let s=this.route.mapContainer.querySelector(this.settings.mapboxControlContainer);if(s)s.appendChild(this._formElements.container),this._addEventListeners();else{console.error(`RouteForm: ${this.settings.mapboxControlContainer} is not a valid MapBox control selector, no such element found.`);return}}settings;waypointItems=[];_formElements;_sortableList;_state="initial";_expanded=void 0;_touchTimeout=null;_touchStartPoint=null;destroy(){this._clearList(),this._removeEventListeners(),this._formElements.container.remove(),this._formElements={}}_loadForm=()=>{this.route.parameters.waypoints?.forEach(i=>{let n=new Oo(this,i);this.waypointItems.push(n),this._formElements.waypointList.appendChild(n.elements.listItem)}),this._formElements.routeTypeSelect.value=this.route.parameters.routeType??"",this.state="loaded"};get state(){return this._state}set state(i){if(this.state!==i){this._state=i,this._formElements.form.dataset.state=i;let n=["empty"].includes(i);this._formElements.form.setAttribute("aria-hidden",String(n)),this._formElements.formInstructions.setAttribute("aria-hidden",String(!n)),this.dispatchEvent(new CustomEvent("stateChange",{detail:i}))}this._formElements.clearButton.disabled=this.waypointItems.length<1,this._formElements.submitButton.disabled=this.waypointItems.length<2}_dispatchExpandEvent(i){this.dispatchEvent(new CustomEvent("expandEvent",{detail:i}))}get expanded(){return!!this._expanded}set expanded(i){this._expanded!==i&&(this.debug&&console.debug(`RouteForm: expanded state set from ${this._expanded} to ${i}`),this._expanded=i,this._formElements.container.setAttribute("aria-expanded",i.toString()),this._formElements.headerButton.setAttribute("aria-expanded",i.toString()),this._dispatchExpandEvent(i))}get routeType(){return this._formElements.routeTypeSelect.value}get waypoints(){return this.waypointItems.map(i=>i.waypoint)}_getListItem(i){return this.waypointItems.find(n=>n.elements.listItem===i)}_addWaypoint(i){if(this.expanded=!0,this.waypointItems.length>=D.MAX_DIRECTIONS_WAYPOINTS&&this._formElements.routeTypeSelect.value){this.settings.waypointCountWarning.duration&&(Ue.show(this.route.mapContainer,this.settings.waypointCountWarning.message,this.settings.waypointCountWarning.duration),this._formElements.container.classList.add(this.settings.waypointCountWarning.className),setTimeout(()=>{this._formElements.container.classList.remove(this.settings.waypointCountWarning.className)},this.settings.waypointCountWarning.duration)),console.warn(`Route: More than ${D.MAX_DIRECTIONS_WAYPOINTS} waypoints is not supported by Mapbox Directions API.`);return}let n;i instanceof bd.LngLat?n={latitude:i.lat,longitude:i.lng,name:void 0,showPin:!0}:n={...i,showPin:!0},this.state="loading";let s=new Oo(this,n,this.debug);s.addEventListener("waypointInfoLoaded",this._waypointInfoLoadedHandler,{once:!0}),this.debug&&console.debug("RouteForm:_addWaypoint: waypointInfoLoaded listener added",s),this.waypointItems.push(s),this._formElements.waypointList.appendChild(s.elements.listItem),queueMicrotask(()=>this.route.updateWaypointLayerSource(this.waypoints));let o=this.expanded?0:Q.EXPAND_SCROLL_DELAY;setTimeout(()=>{s.elements.listItem.scrollIntoView({behavior:"smooth",block:"end"})},o)}_waypointInfoLoadedHandler=i=>{this.state="loaded";let n=i.detail;this.debug&&console.debug("RouteForm:_waypointInfoLoadedHandler",n)};deleteWaypointItem=i=>{this.waypointItems=this.waypointItems.filter(n=>n!==i),this.state=this.waypointItems.length?"loaded":"empty",queueMicrotask(()=>this.route.updateWaypointLayerSource(this.waypoints))};_showRoute=i=>{if(i.preventDefault(),this.state!=="loaded"){this.addEventListener("stateChange",r=>{r.detail==="loaded"&&this._showRoute(r)},{once:!0}),this.debug&&console.debug("RouteForm:_showRoute: form not yet ready, waiting for stateChange event.");return}this._formElements.submitButton.blur();let n=this._formElements.waypointList.querySelectorAll(`li[data-type="${Q.WAYPOINT_ITEM_DATA_TYPE}"]`);this.waypointItems.sort((r,a)=>{let l=Array.from(n).indexOf(r.elements.listItem),c=Array.from(n).indexOf(a.elements.listItem);return l-c}),this.debug&&console.debug("RouteForm:_showRoute",this.waypointItems);let s=Array.from(n).map(r=>this._getListItem(r)?.waypoint).filter(r=>r!==void 0);s.forEach(r=>{r.name?.startsWith(`${this.route.settings.pins.defaultLabel} #`)&&(r.name="")}),this.route.parameters.waypoints=s,this.route.parameters.routeType=this._formElements.routeTypeSelect.value,this.settings.summary.show&&(this.route.parameters.showSummary=this.settings.summary.type),this.debug&&console.debug("RouteForm:_showRoute parameters",this.route.parameters),this.route.addToMap(),this.expanded=!1;let o=()=>{this.debug&&console.debug("RouteForm._showRoute: waypointsUpdated event detected.",this.route.waypoints),this.route.waypoints.forEach((r,a)=>{let l=this.waypointItems[a];l&&r.name&&l.updateName(r.name)})};this.route.addEventListener("waypointsUpdated",o,{once:!0})};_clearList=()=>{this._clearPopups(),this._formElements.clearButton.blur(),this.expanded=!1,this.waypointItems.forEach(i=>{i.destroy()}),queueMicrotask(()=>this.route.clear()),this.waypointItems=[],this.state="empty"};_headerClickHandler=()=>{this.expanded=!this.expanded};_clearPopups=()=>{this.route.mapContainer.querySelectorAll(`${D.MARKER_SELECTOR}, ${D.POPUP_SELECTOR}`).forEach(i=>{i.remove()})};_contextClickHandler=async i=>{if(this.route.map.isMoving()||this.route.map.isRotating()||this.route.map.isZooming())return;let n=i.lngLat;this._clearPopups();let s=document.createElement("div");s.className=Q.CONTEXT_MENU_BODY_CLASS,s.setAttribute("role","menu");let o=document.createElement("a");o.role="button",o.append(et(this.settings.contextMenu.iconSvgId),this.settings.contextMenu.label),s.append(o);let r={...this.settings.contextMenu.popUpOptions},a=null,l=!1,c=m=>{m.preventDefault(),m.stopImmediatePropagation(),m.stopPropagation(),this._addWaypoint(n),l=!0,a?.remove(),a=null};s.addEventListener("click",c);let u=new bd.Popup(r).setLngLat(n).setDOMContent(s).addTo(this.route.map);a=u,await new Promise(requestAnimationFrame);let h=u.getElement();if(!h||l||r.anchor)return;let f=Array.from(h.classList).find(m=>m.startsWith("mapboxgl-popup-anchor-")),p=f?f.replace("mapboxgl-popup-anchor-",""):void 0;!p||l||(u.remove(),a=new bd.Popup({...r,anchor:p}).setLngLat(n).setDOMContent(s).addTo(this.route.map))};_clearLongPress=()=>{this._touchTimeout!==null&&(clearTimeout(this._touchTimeout),this._touchTimeout=null),this._touchStartPoint=null};_handleTouchStart=i=>{i.originalEvent.touches.length===1?(this._touchStartPoint=i.point,this._touchTimeout=window.setTimeout(()=>{this._contextClickHandler(i)},this.settings.contextMenu.longPressDuration)):this._clearLongPress()};_handleTouchMove=i=>{if(!this._touchStartPoint)return;let n=i.point.x-this._touchStartPoint.x,s=i.point.y-this._touchStartPoint.y;Math.sqrt(n*n+s*s)>this.settings.contextMenu.moveTolerancePx&&this._clearLongPress()};_addRightClickMenuListeners=()=>{this.route.map.on("contextmenu",this._contextClickHandler),this.route.map.on("touchstart",this._handleTouchStart),this.route.map.on("touchmove",this._handleTouchMove),this.route.map.on("touchend",this._clearLongPress),this.route.map.on("touchcancel",this._clearLongPress),this.route.map.on("dragstart",this._clearLongPress),this.route.map.on("rotatestart",this._clearLongPress),this.route.map.on("pitchstart",this._clearLongPress)};_destroyRightClickMenu=()=>{this.route.mapContainer.querySelectorAll(`${D.POPUP_SELECTOR}:has(div.${Q.CONTEXT_MENU_BODY_CLASS})`).forEach(i=>i.remove()),this.route.map.off("contextmenu",this._contextClickHandler),this.route.map.off("touchstart",this._handleTouchStart),this.route.map.off("touchmove",this._handleTouchMove),this.route.map.off("touchend",this._clearLongPress),this.route.map.off("touchcancel",this._clearLongPress),this.route.map.off("dragstart",this._clearLongPress),this.route.map.off("rotatestart",this._clearLongPress),this.route.map.off("pitchstart",this._clearLongPress)};_addEventListeners=()=>{this._addRightClickMenuListeners(),this._formElements.headerButton.addEventListener("click",this._headerClickHandler),this._formElements.submitButton.addEventListener("click",this._showRoute),this._formElements.clearButton.addEventListener("click",this._clearList),this._sortableList=Vp.create(this._formElements.waypointList,{handle:`.${Q.MOVE_HANDLE_CLASS}`,swapThreshold:.5,onChoose:i=>{this._formElements.waypointList.style.cursor="grabbing",i.item.setAttribute("aria-grabbed","true")},onUnchoose:i=>{this._formElements.waypointList.style.removeProperty("cursor"),i.item.setAttribute("aria-grabbed","false")}})};_removeEventListeners=()=>{this._destroyRightClickMenu(),this._formElements.headerButton.removeEventListener("click",this._headerClickHandler),this._formElements.submitButton.removeEventListener("click",this._showRoute),this._formElements.clearButton.removeEventListener("click",this._clearList),this._sortableList?.destroy()};_buildForm=()=>{let i=document.createElement("div");i.classList.add("mapboxgl-ctrl",...this.settings.formContainerClassList);let n=document.createElement("button");n.id="waypointFormHeader",n.type="button",n.classList.add(...this.settings.headerButtonClasslist),n.setAttribute("aria-controls","waypointForm"),n.append(this.settings.headerButtonText,et(Q.EXPAND_ICON_ID,[Q.STANDARD_ICON_CLASS]));let s=document.createElement("form");s.id="waypointForm",s.classList.add(...this.settings.formClasslist),s.setAttribute("aria-hidden",(!this.settings.initialStateExpanded).toString()),s.setAttribute("aria-labelledby","waypointFormHeader");let o=document.createElement("ul");o.role="list",o.classList.add(...this.settings.waypointListClassList);let r=document.createElement("div");r.classList.add(...this.settings.buttonRowClassList);let a=document.createElement("button");a.type="reset",a.textContent=this.settings.clearButtonText,a.disabled=!0;let l=document.createElement("select");l.setAttribute("aria-label",this.settings.routeTypeAriaLabel),l.id="route-type-select";let c=document.createDocumentFragment(),u=this.settings.routeTypeOptions;u.forEach(({value:p,text:m})=>{let g=document.createElement("option");g.value=p??"",g.textContent=m,c.appendChild(g)}),l.appendChild(c),u.length<2&&(l.hidden=!0),(this.route.parameters.routeType||this.route.parameters.waypoints?.length)&&(this.debug&&console.debug("Route form select",this.route.parameters.routeType),l.value=this.route.parameters.routeType??"");let h=document.createElement("button");h.type="submit",h.disabled=!0,h.textContent=this.settings.submitButtonText;let f=document.createElement("div");return f.classList.add(...this.settings.routeInstructionsClassList),this.settings.routeInstructions.forEach(p=>{let m=document.createElement("p");m.textContent=p,f.appendChild(m)}),r.append(a,l,h),s.append(f,o,r),i.append(n,s),{container:i,form:s,headerButton:n,waypointList:o,routeTypeSelect:l,submitButton:h,clearButton:a,formInstructions:f}}};import By from"mapbox-gl";function No(e){return e+.5|0}var Li=(e,t,i)=>Math.max(Math.min(e,i),t);function Fo(e){return Li(No(e*2.55),0,255)}function Ti(e){return Li(No(e*255),0,255)}function Je(e){return Li(No(e/2.55)/100,0,1)}function jg(e){return Li(No(e*100),0,100)}var le={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vd=[..."0123456789ABCDEF"],AS=e=>vd[e&15],kS=e=>vd[(e&240)>>4]+vd[e&15],ql=e=>(e&240)>>4===(e&15),PS=e=>ql(e.r)&&ql(e.g)&&ql(e.b)&&ql(e.a);function RS(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&le[e[1]]*17,g:255&le[e[2]]*17,b:255&le[e[3]]*17,a:t===5?le[e[4]]*17:255}:(t===7||t===9)&&(i={r:le[e[1]]<<4|le[e[2]],g:le[e[3]]<<4|le[e[4]],b:le[e[5]]<<4|le[e[6]],a:t===9?le[e[7]]<<4|le[e[8]]:255})),i}var DS=(e,t)=>e<255?t(e):"";function OS(e){var t=PS(e)?AS:kS;return e?"#"+t(e.r)+t(e.g)+t(e.b)+DS(e.a,t):void 0}var IS=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qg(e,t,i){let n=t*Math.min(i,1-i),s=(o,r=(o+e/30)%12)=>i-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function FS(e,t,i){let n=(s,o=(s+e/60)%6)=>i-i*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function BS(e,t,i){let n=qg(e,1,.5),s;for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)n[s]*=1-t-i,n[s]+=t;return n}function NS(e,t,i,n,s){return e===s?(t-i)/n+(t<i?6:0):t===s?(i-e)/n+2:(e-t)/n+4}function xd(e){let i=e.r/255,n=e.g/255,s=e.b/255,o=Math.max(i,n,s),r=Math.min(i,n,s),a=(o+r)/2,l,c,u;return o!==r&&(u=o-r,c=a>.5?u/(2-o-r):u/(o+r),l=NS(i,n,s,u,o),l=l*60+.5),[l|0,c||0,a]}function _d(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(Ti)}function wd(e,t,i){return _d(qg,e,t,i)}function WS(e,t,i){return _d(BS,e,t,i)}function HS(e,t,i){return _d(FS,e,t,i)}function Xg(e){return(e%360+360)%360}function US(e){let t=IS.exec(e),i=255,n;if(!t)return;t[5]!==n&&(i=t[6]?Fo(+t[5]):Ti(+t[5]));let s=Xg(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?n=WS(s,o,r):t[1]==="hsv"?n=HS(s,o,r):n=wd(s,o,r),{r:n[0],g:n[1],b:n[2],a:i}}function zS(e,t){var i=xd(e);i[0]=Xg(i[0]+t),i=wd(i),e.r=i[0],e.g=i[1],e.b=i[2]}function jS(e){if(!e)return;let t=xd(e),i=t[0],n=jg(t[1]),s=jg(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${s}%, ${Je(e.a)})`:`hsl(${i}, ${n}%, ${s}%)`}var Vg={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Gg={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function VS(){let e={},t=Object.keys(Gg),i=Object.keys(Vg),n,s,o,r,a;for(n=0;n<t.length;n++){for(r=a=t[n],s=0;s<i.length;s++)o=i[s],a=a.replace(o,Vg[o]);o=parseInt(Gg[r],16),e[a]=[o>>16&255,o>>8&255,o&255]}return e}var Xl;function GS(e){Xl||(Xl=VS(),Xl.transparent=[0,0,0,0]);let t=Xl[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var YS=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function qS(e){let t=YS.exec(e),i=255,n,s,o;if(t){if(t[7]!==n){let r=+t[7];i=t[8]?Fo(r):Li(r*255,0,255)}return n=+t[1],s=+t[3],o=+t[5],n=255&(t[2]?Fo(n):Li(n,0,255)),s=255&(t[4]?Fo(s):Li(s,0,255)),o=255&(t[6]?Fo(o):Li(o,0,255)),{r:n,g:s,b:o,a:i}}}function XS(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Je(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}var yd=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,rs=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function $S(e,t,i){let n=rs(Je(e.r)),s=rs(Je(e.g)),o=rs(Je(e.b));return{r:Ti(yd(n+i*(rs(Je(t.r))-n))),g:Ti(yd(s+i*(rs(Je(t.g))-s))),b:Ti(yd(o+i*(rs(Je(t.b))-o))),a:e.a+i*(t.a-e.a)}}function $l(e,t,i){if(e){let n=xd(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,t===0?360:1)),n=wd(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function $g(e,t){return e&&Object.assign(t||{},e)}function Yg(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ti(e[3]))):(t=$g(e,{r:0,g:0,b:0,a:1}),t.a=Ti(t.a)),t}function KS(e){return e.charAt(0)==="r"?qS(e):US(e)}var Bo=class e{constructor(t){if(t instanceof e)return t;let i=typeof t,n;i==="object"?n=Yg(t):i==="string"&&(n=RS(t)||GS(t)||KS(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=$g(this._rgb);return t&&(t.a=Je(t.a)),t}set rgb(t){this._rgb=Yg(t)}rgbString(){return this._valid?XS(this._rgb):void 0}hexString(){return this._valid?OS(this._rgb):void 0}hslString(){return this._valid?jS(this._rgb):void 0}mix(t,i){if(t){let n=this.rgb,s=t.rgb,o,r=i===o?.5:i,a=2*r-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*s.r+.5,n.g=255&c*n.g+o*s.g+.5,n.b=255&c*n.b+o*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(t,i){return t&&(this._rgb=$S(this._rgb,t._rgb,i)),this}clone(){return new e(this.rgb)}alpha(t){return this._rgb.a=Ti(t),this}clearer(t){let i=this._rgb;return i.a*=1-t,this}greyscale(){let t=this._rgb,i=No(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){let i=this._rgb;return i.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return $l(this._rgb,2,t),this}darken(t){return $l(this._rgb,2,-t),this}saturate(t){return $l(this._rgb,1,t),this}desaturate(t){return $l(this._rgb,1,-t),this}rotate(t){return zS(this._rgb,t),this}};function be(){}var Cd=(()=>{let e=0;return()=>e++})();function J(e){return e==null}function ot(e){if(Array.isArray&&Array.isArray(e))return!0;let t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function j(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function lt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Dt(e,t){return lt(e)?e:t}function U(e,t){return typeof e>"u"?t:e}var Ld=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function nt(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function X(e,t,i,n){let s,o,r;if(ot(e))if(o=e.length,n)for(s=o-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<o;s++)t.call(i,e[s],s);else if(j(e))for(r=Object.keys(e),o=r.length,s=0;s<o;s++)t.call(i,e[r[s]],r[s])}function cs(e,t){let i,n,s,o;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(s=e[i],o=t[i],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Ho(e){if(ot(e))return e.map(Ho);if(j(e)){let t=Object.create(null),i=Object.keys(e),n=i.length,s=0;for(;s<n;++s)t[i[s]]=Ho(e[i[s]]);return t}return e}function ob(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function rb(e,t,i,n){if(!ob(e))return;let s=t[e],o=i[e];j(s)&&j(o)?dn(s,o,n):t[e]=Ho(o)}function dn(e,t,i){let n=ot(t)?t:[t],s=n.length;if(!j(e))return e;i=i||{};let o=i.merger||rb,r;for(let a=0;a<s;++a){if(r=n[a],!j(r))continue;let l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],e,r,i)}return e}function fn(e,t){return dn(e,t,{merger:ab})}function ab(e,t,i){if(!ob(e))return;let n=t[e],s=i[e];j(n)&&j(s)?fn(n,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Ho(s))}var Kg={"":e=>e,x:e=>e.x,y:e=>e.y};function lb(e){let t=e.split("."),i=[],n="";for(let s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function ZS(e){let t=lb(e);return i=>{for(let n of t){if(n==="")break;i=i&&i[n]}return i}}function us(e,t){return(Kg[t]||(Kg[t]=ZS(t)))(e)}function jo(e){return e.charAt(0).toUpperCase()+e.slice(1)}var hs=e=>typeof e<"u",Re=e=>typeof e=="function",ic=(e,t)=>{if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0};function Td(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}var bt=Math.PI,Rt=2*bt,cb=Rt+bt,Uo=Number.POSITIVE_INFINITY,ub=bt/180,Pt=bt/2,Ai=bt/4,Ed=bt*2/3,De=Math.log10,ki=Math.sign;function pn(e,t,i){return Math.abs(e-t)<i}function nc(e){let t=Math.round(e);e=pn(e,t,e/1e3)?t:e;let i=Math.pow(10,Math.floor(De(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function Ad(e){let t=[],i=Math.sqrt(e),n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(i|0)&&t.push(i),t.sort((s,o)=>s-o).pop(),t}function JS(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function mn(e){return!JS(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function kd(e,t){let i=Math.round(e);return i-t<=e&&i+t>=e}function sc(e,t,i){let n,s,o;for(n=0,s=e.length;n<s;n++)o=e[n][i],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Oe(e){return e*(bt/180)}function Vo(e){return e*(180/bt)}function oc(e){if(!lt(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function Pd(e,t){let i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n),o=Math.atan2(n,i);return o<-.5*bt&&(o+=Rt),{angle:o,distance:s}}function zo(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function hb(e,t){return(e-t+cb)%Rt-bt}function kt(e){return(e%Rt+Rt)%Rt}function rc(e,t,i,n){let s=kt(e),o=kt(t),r=kt(i),a=kt(o-s),l=kt(r-s),c=kt(s-o),u=kt(s-r);return s===o||s===r||n&&o===r||a>l&&c<u}function te(e,t,i){return Math.max(t,Math.min(i,e))}function Rd(e){return te(e,-32768,32767)}function Ri(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function Go(e,t,i){i=i||(r=>e[r]<t);let n=e.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,i(o)?s=o:n=o;return{lo:s,hi:n}}var ti=(e,t,i,n)=>Go(e,i,n?s=>{let o=e[s][t];return o<i||o===i&&e[s+1][t]===i}:s=>e[s][t]<i),Dd=(e,t,i)=>Go(e,i,n=>e[n][t]>=i);function Od(e,t,i){let n=0,s=e.length;for(;n<s&&e[n]<t;)n++;for(;s>n&&e[s-1]>i;)s--;return n>0||s<e.length?e.slice(n,s):e}var db=["push","pop","shift","splice","unshift"];function Id(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),db.forEach(i=>{let n="_onData"+jo(i),s=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...o){let r=s.apply(this,o);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function ac(e,t){let i=e._chartjs;if(!i)return;let n=i.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(db.forEach(o=>{delete e[o]}),delete e._chartjs)}function Fd(e){let t=new Set(e);return t.size===e.length?e:Array.from(t)}var lc=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function cc(e,t){let i=[],n=!1;return function(...s){i=s,n||(n=!0,lc.call(window,()=>{n=!1,e.apply(t,i)}))}}function Bd(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}var uc=e=>e==="start"?"left":e==="end"?"right":"center",Ot=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,Nd=(e,t,i,n)=>e===(n?"left":"right")?i:e==="center"?(t+i)/2:t;function Wd(e,t,i){let n=t.length,s=0,o=n;if(e._sorted){let{iScale:r,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=r.axis,{min:h,max:f,minDefined:p,maxDefined:m}=r.getUserBounds();if(p){if(s=Math.min(ti(l,u,h).lo,i?n:ti(t,u,r.getPixelForValue(h)).lo),c){let g=l.slice(0,s+1).reverse().findIndex(b=>!J(b[a.axis]));s-=Math.max(0,g)}s=te(s,0,n-1)}if(m){let g=Math.max(ti(l,r.axis,f,!0).hi+1,i?0:ti(t,u,r.getPixelForValue(f),!0).hi+1);if(c){let b=l.slice(g-1).findIndex(y=>!J(y[a.axis]));g+=Math.max(0,b)}o=te(g,s,n)-s}else o=n-s}return{start:s,count:o}}function Hd(e){let{xScale:t,yScale:i,_scaleRanges:n}=e,s={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=s,!0;let o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),o}var Kl=e=>e===0||e===1,Zg=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Rt/i)),Jg=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*Rt/i)+1,un={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Pt)+1,easeOutSine:e=>Math.sin(e*Pt),easeInOutSine:e=>-.5*(Math.cos(bt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Kl(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Kl(e)?e:Zg(e,.075,.3),easeOutElastic:e=>Kl(e)?e:Jg(e,.075,.3),easeInOutElastic(e){return Kl(e)?e:e<.5?.5*Zg(e*2,.1125,.45):.5+.5*Jg(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-un.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?un.easeInBounce(e*2)*.5:un.easeOutBounce(e*2-1)*.5+.5};function hc(e){if(e&&typeof e=="object"){let t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function dc(e){return hc(e)?e:new Bo(e)}function tc(e){return hc(e)?e:new Bo(e).saturate(.5).darken(.1).hexString()}var QS=["x","y","borderWidth","radius","tension"],tE=["color","borderColor","backgroundColor"];function eE(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:tE},numbers:{type:"number",properties:QS}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function iE(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var Qg=new Map;function nE(e,t){t=t||{};let i=e+JSON.stringify(t),n=Qg.get(i);return n||(n=new Intl.NumberFormat(e,t),Qg.set(i,n)),n}function Yo(e,t,i){return nE(t,i).format(e)}var fb={values(e){return ot(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";let n=this.chart.options.locale,s,o=e;if(i.length>1){let c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=sE(e,i)}let r=De(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Yo(e,n,l)},logarithmic(e,t,i){if(e===0)return"0";let n=i[t].significand||e/Math.pow(10,Math.floor(De(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?fb.numeric.call(this,e,t,i):""}};function sE(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var qo={formatters:fb};function oE(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:qo.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var Di=Object.create(null),fc=Object.create(null);function Wo(e,t){if(!t)return e;let i=t.split(".");for(let n=0,s=i.length;n<s;++n){let o=i[n];e=e[o]||(e[o]=Object.create(null))}return e}function Sd(e,t,i){return typeof t=="string"?dn(Wo(e,t),i):dn(Wo(e,""),t)}var Md=class{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>tc(s.backgroundColor),this.hoverBorderColor=(n,s)=>tc(s.borderColor),this.hoverColor=(n,s)=>tc(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return Sd(this,t,i)}get(t){return Wo(this,t)}describe(t,i){return Sd(fc,t,i)}override(t,i){return Sd(Di,t,i)}route(t,i,n,s){let o=Wo(this,t),r=Wo(this,n),a="_"+i;Object.defineProperties(o,{[a]:{value:o[i],writable:!0},[i]:{enumerable:!0,get(){let l=this[a],c=r[s];return j(l)?Object.assign({},c,l):U(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}},ht=new Md({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[eE,iE,oE]);function pb(e){return!e||J(e.size)||J(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function as(e,t,i,n,s){let o=t[s];return o||(o=t[s]=e.measureText(s).width,i.push(s)),o>n&&(n=o),n}function Ud(e,t,i,n){n=n||{};let s=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},o=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let r=0,a=i.length,l,c,u,h,f;for(l=0;l<a;l++)if(h=i[l],h!=null&&!ot(h))r=as(e,s,o,r,h);else if(ot(h))for(c=0,u=h.length;c<u;c++)f=h[c],f!=null&&!ot(f)&&(r=as(e,s,o,r,f));e.restore();let p=o.length/2;if(p>i.length){for(l=0;l<p;l++)delete s[o[l]];o.splice(0,p)}return r}function ei(e,t,i){let n=e.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((t-s)*n)/n+s}function pc(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Xo(e,t,i,n){mc(e,t,i,n,null)}function mc(e,t,i,n,s){let o,r,a,l,c,u,h,f,p=t.pointStyle,m=t.rotation,g=t.radius,b=(m||0)*ub;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(i,n),e.rotate(b),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),p){default:s?e.ellipse(i,n,s/2,g,0,0,Rt):e.arc(i,n,g,0,Rt),e.closePath();break;case"triangle":u=s?s/2:g,e.moveTo(i+Math.sin(b)*u,n-Math.cos(b)*g),b+=Ed,e.lineTo(i+Math.sin(b)*u,n-Math.cos(b)*g),b+=Ed,e.lineTo(i+Math.sin(b)*u,n-Math.cos(b)*g),e.closePath();break;case"rectRounded":c=g*.516,l=g-c,r=Math.cos(b+Ai)*l,h=Math.cos(b+Ai)*(s?s/2-c:l),a=Math.sin(b+Ai)*l,f=Math.sin(b+Ai)*(s?s/2-c:l),e.arc(i-h,n-a,c,b-bt,b-Pt),e.arc(i+f,n-r,c,b-Pt,b),e.arc(i+h,n+a,c,b,b+Pt),e.arc(i-f,n+r,c,b+Pt,b+bt),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,u=s?s/2:l,e.rect(i-u,n-l,2*u,2*l);break}b+=Ai;case"rectRot":h=Math.cos(b)*(s?s/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(s?s/2:g),e.moveTo(i-h,n-a),e.lineTo(i+f,n-r),e.lineTo(i+h,n+a),e.lineTo(i-f,n+r),e.closePath();break;case"crossRot":b+=Ai;case"cross":h=Math.cos(b)*(s?s/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(s?s/2:g),e.moveTo(i-h,n-a),e.lineTo(i+h,n+a),e.moveTo(i+f,n-r),e.lineTo(i-f,n+r);break;case"star":h=Math.cos(b)*(s?s/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(s?s/2:g),e.moveTo(i-h,n-a),e.lineTo(i+h,n+a),e.moveTo(i+f,n-r),e.lineTo(i-f,n+r),b+=Ai,h=Math.cos(b)*(s?s/2:g),r=Math.cos(b)*g,a=Math.sin(b)*g,f=Math.sin(b)*(s?s/2:g),e.moveTo(i-h,n-a),e.lineTo(i+h,n+a),e.moveTo(i+f,n-r),e.lineTo(i-f,n+r);break;case"line":r=s?s/2:Math.cos(b)*g,a=Math.sin(b)*g,e.moveTo(i-r,n-a),e.lineTo(i+r,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(b)*(s?s/2:g),n+Math.sin(b)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function ge(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function ds(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function fs(e){e.restore()}function zd(e,t,i,n,s){if(!t)return e.lineTo(i.x,i.y);if(s==="middle"){let o=(t.x+i.x)/2;e.lineTo(o,t.y),e.lineTo(o,i.y)}else s==="after"!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function jd(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function rE(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),J(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function aE(e,t,i,n,s){if(s.strikethrough||s.underline){let o=e.measureText(n),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,c=i+o.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(r,u),e.lineTo(a,u),e.stroke()}}function lE(e,t){let i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Oi(e,t,i,n,s,o={}){let r=ot(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="",l,c;for(e.save(),e.font=s.string,rE(e,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&lE(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),J(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,i,n,o.maxWidth)),e.fillText(c,i,n,o.maxWidth),aE(e,i,n,c,o),n+=Number(s.lineHeight);e.restore()}function ps(e,t){let{x:i,y:n,w:s,h:o,radius:r}=t;e.arc(i+r.topLeft,n+r.topLeft,r.topLeft,1.5*bt,bt,!0),e.lineTo(i,n+o-r.bottomLeft),e.arc(i+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,bt,Pt,!0),e.lineTo(i+s-r.bottomRight,n+o),e.arc(i+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,Pt,0,!0),e.lineTo(i+s,n+r.topRight),e.arc(i+s-r.topRight,n+r.topRight,r.topRight,0,-Pt,!0),e.lineTo(i+r.topLeft,n)}var cE=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,uE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mb(e,t){let i=(""+e).match(cE);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}var hE=e=>+e||0;function gc(e,t){let i={},n=j(t),s=n?Object.keys(t):t,o=j(e)?n?r=>U(e[r],e[t[r]]):r=>e[r]:()=>e;for(let r of s)i[r]=hE(o(r));return i}function Vd(e){return gc(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ii(e){return gc(e,["topLeft","topRight","bottomLeft","bottomRight"])}function St(e){let t=Vd(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function vt(e,t){e=e||{},t=t||ht.font;let i=U(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let n=U(e.style,t.style);n&&!(""+n).match(uE)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let s={family:U(e.family,t.family),lineHeight:mb(U(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:U(e.weight,t.weight),string:""};return s.string=pb(s),s}function ms(e,t,i,n){let s=!0,o,r,a;for(o=0,r=e.length;o<r;++o)if(a=e[o],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),i!==void 0&&ot(a)&&(a=a[i%a.length],s=!1),a!==void 0))return n&&!s&&(n.cacheable=!1),a}function Gd(e,t,i){let{min:n,max:s}=e,o=Ld(t,(s-n)/2),r=(a,l)=>i&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function Ie(e,t){return Object.assign(Object.create(e),t)}function $o(e,t=[""],i,n,s=()=>e[0]){let o=i||e;typeof n>"u"&&(n=yb("_fallback",e));let r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:n,_getTarget:s,override:a=>$o([a,...e],t,o,n)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return gb(a,l,()=>vE(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return eb(a).includes(l)},ownKeys(a){return eb(a)},set(a,l,c){let u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Pi(e,t,i,n){let s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:bc(e,n),setContext:o=>Pi(e,o,i,n),override:o=>Pi(e.override(o),t,i,n)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete e[r],!0},get(o,r,a){return gb(o,r,()=>fE(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,r){return Reflect.has(e,r)},ownKeys(){return Reflect.ownKeys(e)},set(o,r,a){return e[r]=a,delete o[r],!0}})}function bc(e,t={scriptable:!0,indexable:!0}){let{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:i,indexable:n,isScriptable:Re(i)?i:()=>i,isIndexable:Re(n)?n:()=>n}}var dE=(e,t)=>e?e+jo(t):t,Yd=(e,t)=>j(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function gb(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];let n=i();return e[t]=n,n}function fE(e,t,i){let{_proxy:n,_context:s,_subProxy:o,_descriptors:r}=e,a=n[t];return Re(a)&&r.isScriptable(t)&&(a=pE(t,a,e,i)),ot(a)&&a.length&&(a=mE(t,a,e,r.isIndexable)),Yd(t,a)&&(a=Pi(a,s,o&&o[t],r)),a}function pE(e,t,i,n){let{_proxy:s,_context:o,_subProxy:r,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(o,r||n);return a.delete(e),Yd(e,l)&&(l=qd(s._scopes,s,e,l)),l}function mE(e,t,i,n){let{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=i;if(typeof o.index<"u"&&n(e))return t[o.index%t.length];if(j(t[0])){let l=t,c=s._scopes.filter(u=>u!==l);t=[];for(let u of l){let h=qd(c,s,e,u);t.push(Pi(h,o,r&&r[e],a))}}return t}function bb(e,t,i){return Re(e)?e(t,i):e}var gE=(e,t)=>e===!0?t:typeof e=="string"?us(t,e):void 0;function bE(e,t,i,n,s){for(let o of t){let r=gE(i,o);if(r){e.add(r);let a=bb(r._fallback,i,s);if(typeof a<"u"&&a!==i&&a!==n)return a}else if(r===!1&&typeof n<"u"&&i!==n)return null}return!1}function qd(e,t,i,n){let s=t._rootScopes,o=bb(t._fallback,i,n),r=[...e,...s],a=new Set;a.add(n);let l=tb(a,r,i,o||i,n);return l===null||typeof o<"u"&&o!==i&&(l=tb(a,r,o,l,n),l===null)?!1:$o(Array.from(a),[""],s,o,()=>yE(t,i,n))}function tb(e,t,i,n,s){for(;i;)i=bE(e,t,i,n,s);return i}function yE(e,t,i){let n=e._getTarget();t in n||(n[t]={});let s=n[t];return ot(s)&&j(i)?i:s||{}}function vE(e,t,i,n){let s;for(let o of t)if(s=yb(dE(o,e),i),typeof s<"u")return Yd(e,s)?qd(i,n,e,s):s}function yb(e,t){for(let i of t){if(!i)continue;let n=i[e];if(typeof n<"u")return n}}function eb(e){let t=e._keys;return t||(t=e._keys=xE(e._scopes)),t}function xE(e){let t=new Set;for(let i of e)for(let n of Object.keys(i).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}var _E=Number.EPSILON||1e-14,ls=(e,t)=>t<e.length&&!e[t].skip&&e[t],vb=e=>e==="x"?"y":"x";function xb(e,t,i,n){let s=e.skip?t:e,o=t,r=i.skip?t:i,a=zo(o,s),l=zo(r,o),c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;let h=n*c,f=n*u;return{previous:{x:o.x-h*(r.x-s.x),y:o.y-h*(r.y-s.y)},next:{x:o.x+f*(r.x-s.x),y:o.y+f*(r.y-s.y)}}}function wE(e,t,i){let n=e.length,s,o,r,a,l,c=ls(e,0);for(let u=0;u<n-1;++u)if(l=c,c=ls(e,u+1),!(!l||!c)){if(pn(t[u],0,_E)){i[u]=i[u+1]=0;continue}s=i[u]/t[u],o=i[u+1]/t[u],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),i[u]=s*r*t[u],i[u+1]=o*r*t[u])}}function SE(e,t,i="x"){let n=vb(i),s=e.length,o,r,a,l=ls(e,0);for(let c=0;c<s;++c){if(r=a,a=l,l=ls(e,c+1),!a)continue;let u=a[i],h=a[n];r&&(o=(u-r[i])/3,a[`cp1${i}`]=u-o,a[`cp1${n}`]=h-o*t[c]),l&&(o=(l[i]-u)/3,a[`cp2${i}`]=u+o,a[`cp2${n}`]=h+o*t[c])}}function _b(e,t="x"){let i=vb(t),n=e.length,s=Array(n).fill(0),o=Array(n),r,a,l,c=ls(e,0);for(r=0;r<n;++r)if(a=l,l=c,c=ls(e,r+1),!!l){if(c){let u=c[t]-l[t];s[r]=u!==0?(c[i]-l[i])/u:0}o[r]=a?c?ki(s[r-1])!==ki(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}wE(e,s,o),SE(e,o,t)}function Zl(e,t,i){return Math.max(Math.min(e,i),t)}function EE(e,t){let i,n,s,o,r,a=ge(e[0],t);for(i=0,n=e.length;i<n;++i)r=o,o=a,a=i<n-1&&ge(e[i+1],t),o&&(s=e[i],r&&(s.cp1x=Zl(s.cp1x,t.left,t.right),s.cp1y=Zl(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=Zl(s.cp2x,t.left,t.right),s.cp2y=Zl(s.cp2y,t.top,t.bottom)))}function Xd(e,t,i,n,s){let o,r,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")_b(e,s);else{let c=n?e[e.length-1]:e[0];for(o=0,r=e.length;o<r;++o)a=e[o],l=xb(c,a,e[Math.min(o+1,r-(n?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&EE(e,i)}function Ko(){return typeof window<"u"&&typeof document<"u"}function Zo(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ec(e,t,i){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[i])):n=e,n}var yc=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function wb(e,t){return yc(e).getPropertyValue(t)}var ME=["top","right","bottom","left"];function hn(e,t,i){let n={};i=i?"-"+i:"";for(let s=0;s<4;s++){let o=ME[s];n[o]=parseFloat(e[t+"-"+o+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var CE=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function LE(e,t){let i=e.touches,n=i&&i.length?i[0]:e,{offsetX:s,offsetY:o}=n,r=!1,a,l;if(CE(s,o,e.target))a=s,l=o;else{let c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function ye(e,t){if("native"in e)return e;let{canvas:i,currentDevicePixelRatio:n}=t,s=yc(i),o=s.boxSizing==="border-box",r=hn(s,"padding"),a=hn(s,"border","width"),{x:l,y:c,box:u}=LE(e,i),h=r.left+(u&&a.left),f=r.top+(u&&a.top),{width:p,height:m}=t;return o&&(p-=r.width+a.width,m-=r.height+a.height),{x:Math.round((l-h)/p*i.width/n),y:Math.round((c-f)/m*i.height/n)}}function TE(e,t,i){let n,s;if(t===void 0||i===void 0){let o=e&&Zo(e);if(!o)t=e.clientWidth,i=e.clientHeight;else{let r=o.getBoundingClientRect(),a=yc(o),l=hn(a,"border","width"),c=hn(a,"padding");t=r.width-c.width-l.width,i=r.height-c.height-l.height,n=ec(a.maxWidth,o,"clientWidth"),s=ec(a.maxHeight,o,"clientHeight")}}return{width:t,height:i,maxWidth:n||Uo,maxHeight:s||Uo}}var Jl=e=>Math.round(e*10)/10;function $d(e,t,i,n){let s=yc(e),o=hn(s,"margin"),r=ec(s.maxWidth,e,"clientWidth")||Uo,a=ec(s.maxHeight,e,"clientHeight")||Uo,l=TE(e,t,i),{width:c,height:u}=l;if(s.boxSizing==="content-box"){let f=hn(s,"border","width"),p=hn(s,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-o.width),u=Math.max(0,n?c/n:u-o.height),c=Jl(Math.min(c,r,l.maxWidth)),u=Jl(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Jl(c/2)),(t!==void 0||i!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=Jl(Math.floor(u*n))),{width:c,height:u}}function vc(e,t,i){let n=t||1,s=Math.floor(e.height*n),o=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);let r=e.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||r.height!==s||r.width!==o?(e.currentDevicePixelRatio=n,r.height=s,r.width=o,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}var Kd=function(){let e=!1;try{let t={get passive(){return e=!0,!1}};Ko()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function xc(e,t){let i=wb(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Qe(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function Zd(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:n==="middle"?i<.5?e.y:t.y:n==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function Jd(e,t,i,n){let s={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},r=Qe(e,s,i),a=Qe(s,o,i),l=Qe(o,t,i),c=Qe(r,a,i),u=Qe(a,l,i);return Qe(c,u,i)}var AE=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},kE=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Fi(e,t,i){return e?AE(t,i):kE()}function _c(e,t){let i,n;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function wc(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Sb(e){return e==="angle"?{between:rc,compare:hb,normalize:kt}:{between:Ri,compare:(t,i)=>t-i,normalize:t=>t}}function ib({start:e,end:t,count:i,loop:n,style:s}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i===0,style:s}}function PE(e,t,i){let{property:n,start:s,end:o}=i,{between:r,normalize:a}=Sb(n),l=t.length,{start:c,end:u,loop:h}=e,f,p;if(h){for(c+=l,u+=l,f=0,p=l;f<p&&r(a(t[c%l][n]),s,o);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:e.style}}function Sc(e,t,i){if(!i)return[e];let{property:n,start:s,end:o}=i,r=t.length,{compare:a,between:l,normalize:c}=Sb(n),{start:u,end:h,loop:f,style:p}=PE(e,t,i),m=[],g=!1,b=null,y,v,M,w=()=>l(s,M,y)&&a(s,M)!==0,x=()=>a(o,y)===0||l(o,M,y),E=()=>g||w(),_=()=>!g||x();for(let L=u,T=u;L<=h;++L)v=t[L%r],!v.skip&&(y=c(v[n]),y!==M&&(g=l(y,s,o),b===null&&E()&&(b=a(y,s)===0?L:T),b!==null&&_()&&(m.push(ib({start:b,end:L,loop:f,count:r,style:p})),b=null),T=L,M=y));return b!==null&&m.push(ib({start:b,end:h,loop:f,count:r,style:p})),m}function Ec(e,t){let i=[],n=e.segments;for(let s=0;s<n.length;s++){let o=Sc(n[s],e.points,t);o.length&&i.push(...o)}return i}function RE(e,t,i,n){let s=0,o=t-1;if(i&&!n)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,i&&(o+=s);o>s&&e[o%t].skip;)o--;return o%=t,{start:s,end:o}}function DE(e,t,i,n){let s=e.length,o=[],r=t,a=e[t],l;for(l=t+1;l<=i;++l){let c=e[l%s];c.skip||c.stop?a.skip||(n=!1,o.push({start:t%s,end:(l-1)%s,loop:n}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%s,end:r%s,loop:n}),o}function Qd(e,t){let i=e.points,n=e.options.spanGaps,s=i.length;if(!s)return[];let o=!!e._loop,{start:r,end:a}=RE(i,s,o,n);if(n===!0)return nb(e,[{start:r,end:a,loop:o}],i,t);let l=a<r?a+s:a,c=!!e._fullLoop&&r===0&&a===s-1;return nb(e,DE(i,r,l,c),i,t)}function nb(e,t,i,n){return!n||!n.setContext||!i?t:OE(e,t,i,n)}function OE(e,t,i,n){let s=e._chart.getContext(),o=sb(e.options),{_datasetIndex:r,options:{spanGaps:a}}=e,l=i.length,c=[],u=o,h=t[0].start,f=h;function p(m,g,b,y){let v=a?-1:1;if(m!==g){for(m+=l;i[m%l].skip;)m-=v;for(;i[g%l].skip;)g+=v;m%l!==g%l&&(c.push({start:m%l,end:g%l,loop:b,style:y}),u=y,h=g%l)}}for(let m of t){h=a?h:m.start;let g=i[h%l],b;for(f=h+1;f<=m.end;f++){let y=i[f%l];b=sb(n.setContext(Ie(s,{type:"segment",p0:g,p1:y,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),IE(b,u)&&p(h,f-1,m.loop,u),g=y,u=b}h<f-1&&p(h,f-1,m.loop,u)}return c}function sb(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function IE(e,t){if(!t)return!1;let i=[],n=function(s,o){return hc(o)?(i.includes(o)||i.push(o),i.indexOf(o)):o};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function Ql(e,t,i){return e.options.clip?e[i]:t[i]}function FE(e,t){let{xScale:i,yScale:n}=e;return i&&n?{left:Ql(i,t,"left"),right:Ql(i,t,"right"),top:Ql(n,t,"top"),bottom:Ql(n,t,"bottom")}:t}function Mc(e,t){let i=t._clip;if(i.disabled)return!1;let n=FE(t,e.chartArea);return{left:i.left===!1?0:n.left-(i.left===!0?0:i.left),right:i.right===!1?e.width:n.right+(i.right===!0?0:i.right),top:i.top===!1?0:n.top-(i.top===!0?0:i.top),bottom:i.bottom===!1?e.height:n.bottom+(i.bottom===!0?0:i.bottom)}}var cf=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,n,s){let o=i.listeners[s],r=i.duration;o.forEach(a=>a({chart:t,initial:i.initial,numSteps:r,currentStep:Math.min(n-i.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=lc.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;let o=n.items,r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,n,t,"progress")),o.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),i+=o.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){let i=this._charts,n=i.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,n)),n}listen(t,i,n){this._getAnims(t).listeners[i].push(n)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){let i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;let i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){let i=this._charts.get(t);if(!i||!i.items.length)return;let n=i.items,s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},ii=new cf,Eb="transparent",WE={boolean(e,t,i){return i>.5?t:e},color(e,t,i){let n=dc(e||Eb),s=n.valid&&dc(t||Eb);return s&&s.valid?s.mix(n,i).hexString():t},number(e,t,i){return e+(t-e)*i}},uf=class{constructor(t,i,n,s){let o=i[n];s=ms([t.to,s,o,t.from]);let r=ms([t.from,o,s]);this._active=!0,this._fn=t.fn||WE[t.type||typeof r],this._easing=un[t.easing]||un.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(t,i,n){if(this._active){this._notify(!1);let s=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=ms([t.to,i,s,t.from]),this._from=ms([t.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let i=t-this._start,n=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to,l;if(this._active=o!==a&&(r||i<n),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=o;return}l=i/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((i,n)=>{t.push({res:i,rej:n})})}_notify(t){let i=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}},Dc=class{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!j(t))return;let i=Object.keys(ht.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{let o=t[s];if(!j(o))return;let r={};for(let a of i)r[a]=o[a];(ot(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,r)})})}_animateOptions(t,i){let n=i.options,s=UE(t,n);if(!s)return[];let o=this._createAnimations(s,n);return n.$shared&&HE(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,i){let n=this._properties,s=[],o=t.$animations||(t.$animations={}),r=Object.keys(i),a=Date.now(),l;for(l=r.length-1;l>=0;--l){let c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,i));continue}let u=i[c],h=o[c],f=n.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){t[c]=u;continue}o[c]=h=new uf(f,t,c,u),s.push(h)}return s}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}let n=this._createAnimations(t,i);if(n.length)return ii.add(this._chart,n),!0}};function HE(e,t){let i=[],n=Object.keys(t);for(let s=0;s<n.length;s++){let o=e[n[s]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}function UE(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function Mb(e,t){let i=e&&e.options||{},n=i.reverse,s=i.min===void 0?t:0,o=i.max===void 0?t:0;return{start:n?o:s,end:n?s:o}}function zE(e,t,i){if(i===!1)return!1;let n=Mb(e,i),s=Mb(t,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function jE(e){let t,i,n,s;return j(e)?(t=e.top,i=e.right,n=e.bottom,s=e.left):t=i=n=s=e,{top:t,right:i,bottom:n,left:s,disabled:e===!1}}function vy(e,t){let i=[],n=e._getSortedDatasetMetas(t),s,o;for(s=0,o=n.length;s<o;++s)i.push(n[s].index);return i}function Cb(e,t,i,n={}){let s=e.keys,o=n.mode==="single",r,a,l,c;if(t===null)return;let u=!1;for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===i){if(u=!0,n.all)continue;break}c=e.values[l],lt(c)&&(o||t===0||ki(t)===ki(c))&&(t+=c)}return!u&&!n.all?0:t}function VE(e,t){let{iScale:i,vScale:n}=t,s=i.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",r=Object.keys(e),a=new Array(r.length),l,c,u;for(l=0,c=r.length;l<c;++l)u=r[l],a[l]={[s]:u,[o]:e[u]};return a}function tf(e,t){let i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function GE(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function YE(e){let{min:t,max:i,minDefined:n,maxDefined:s}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function qE(e,t,i){let n=e[t]||(e[t]={});return n[i]||(n[i]={})}function Lb(e,t,i,n){for(let s of t.getMatchingVisibleMetas(n).reverse()){let o=e[s.index];if(i&&o>0||!i&&o<0)return s.index}return null}function Tb(e,t){let{chart:i,_cachedMeta:n}=e,s=i._stacks||(i._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,u=GE(o,r,n),h=t.length,f;for(let p=0;p<h;++p){let m=t[p],{[l]:g,[c]:b}=m,y=m._stacks||(m._stacks={});f=y[c]=qE(s,u,g),f[a]=b,f._top=Lb(f,r,!0,n.type),f._bottom=Lb(f,r,!1,n.type);let v=f._visualValues||(f._visualValues={});v[a]=b}}function ef(e,t){let i=e.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function XE(e,t){return Ie(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function $E(e,t,i){return Ie(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function Jo(e,t){let i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(let s of t){let o=s._stacks;if(!o||o[n]===void 0||o[n][i]===void 0)return;delete o[n][i],o[n]._visualValues!==void 0&&o[n]._visualValues[i]!==void 0&&delete o[n]._visualValues[i]}}}var nf=e=>e==="reset"||e==="none",Ab=(e,t)=>t?e:Object.assign({},e),KE=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:vy(i,!0),values:null},Oc=class{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=tf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Jo(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,n=this.getDataset(),s=(h,f,p,m)=>h==="x"?f:h==="r"?m:p,o=i.xAxisID=U(n.xAxisID,ef(t,"x")),r=i.yAxisID=U(n.yAxisID,ef(t,"y")),a=i.rAxisID=U(n.rAxisID,ef(t,"r")),l=i.indexAxis,c=i.iAxisID=s(l,o,r,a),u=i.vAxisID=s(l,r,o,a);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(r),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(c),i.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&ac(this._data,this),t._stacked&&Jo(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),n=this._data;if(j(i)){let s=this._cachedMeta;this._data=VE(i,s)}else if(n!==i){if(n){ac(n,this);let s=this._cachedMeta;Jo(s),s._parsed=[]}i&&Object.isExtensible(i)&&Id(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,n=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=tf(i.vScale,i),i.stack!==n.stack&&(s=!0,Jo(i),i.stack=n.stack),this._resyncElements(t),(s||o!==i._stacked)&&(Tb(this,i._parsed),i._stacked=tf(i.vScale,i))}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:r}=n,a=o.axis,l=t===0&&i===s.length?!0:n._sorted,c=t>0&&n._parsed[t-1],u,h,f;if(this._parsing===!1)n._parsed=s,n._sorted=!0,f=s;else{ot(s[t])?f=this.parseArrayData(n,s,t,i):j(s[t])?f=this.parseObjectData(n,s,t,i):f=this.parsePrimitiveData(n,s,t,i);let p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<i;++u)n._parsed[u+t]=h=f[u],l&&(p()&&(l=!1),c=h);n._sorted=l}r&&Tb(this,f)}parsePrimitiveData(t,i,n,s){let{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,h=new Array(s),f,p,m;for(f=0,p=s;f<p;++f)m=f+n,h[f]={[a]:u||o.parse(c[m],m),[l]:r.parse(i[m],m)};return h}parseArrayData(t,i,n,s){let{xScale:o,yScale:r}=t,a=new Array(s),l,c,u,h;for(l=0,c=s;l<c;++l)u=l+n,h=i[u],a[l]={x:o.parse(h[0],u),y:r.parse(h[1],u)};return a}parseObjectData(t,i,n,s){let{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s),u,h,f,p;for(u=0,h=s;u<h;++u)f=u+n,p=i[f],c[u]={x:o.parse(us(p,a),f),y:r.parse(us(p,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,n){let s=this.chart,o=this._cachedMeta,r=i[t.axis],a={keys:vy(s,!0),values:i._stacks[t.axis]._visualValues};return Cb(a,r,o.index,{mode:n})}updateRangeFromParsed(t,i,n,s){let o=n[i.axis],r=o===null?NaN:o,a=s&&n._stacks[i.axis];s&&a&&(s.values=a,r=Cb(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,i){let n=this._cachedMeta,s=n._parsed,o=n._sorted&&t===n.iScale,r=s.length,a=this._getOtherScale(t),l=KE(i,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=YE(a),f,p;function m(){p=s[f];let g=p[a.axis];return!lt(p[t.axis])||u>g||h<g}for(f=0;f<r&&!(!m()&&(this.updateRangeFromParsed(c,t,p,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){let i=this._cachedMeta._parsed,n=[],s,o,r;for(s=0,o=i.length;s<o;++s)r=i[s][t.axis],lt(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,n=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=jE(U(this.options.clip,zE(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,n=this._cachedMeta,s=n.data||[],o=i.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop,u;for(n.dataset&&n.dataset.draw(t,o,a,l),u=a;u<a+l;++u){let h=s[u];h.hidden||(h.active&&c?r.push(h):h.draw(t,o))}for(u=0;u<r.length;++u)r[u].draw(t,o)}getStyle(t,i){let n=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,i,n){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let r=this._cachedMeta.data[t];o=r.$context||(r.$context=$E(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=XE(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",n){let s=i==="active",o=this._cachedDataOpts,r=t+"-"+i,a=o[r],l=this.enableOptionSharing&&hs(n);if(a)return Ab(a,l);let c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(ht.elements[t]),m=()=>this.getContext(n,s,i),g=c.resolveNamedOptions(f,p,m,h);return g.$shared&&(g.$shared=l,o[r]=Object.freeze(Ab(g,l))),g}_resolveAnimations(t,i,n){let s=this.chart,o=this._cachedDataOpts,r=`animation-${i}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){let u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,i),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(t,n,i))}let c=new Dc(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||nf(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let n=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,n),{sharedOptions:o,includeOptions:r}}updateElement(t,i,n,s){nf(s)?Object.assign(t,n):this._resolveAnimations(i,s).update(t,n)}updateSharedOptions(t,i,n){t&&!nf(i)&&this._resolveAnimations(void 0,i).update(t,n)}_setStyle(t,i,n,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,n,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,i,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,n=this._cachedMeta.data;for(let[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];let s=n.length,o=i.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,n=!0){let s=this._cachedMeta,o=s.data,r=t+i,a,l=c=>{for(c.length+=i,a=c.length-1;a>=r;a--)c[a]=c[a-i]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),n&&this.updateElements(o,t,i,"reset")}updateElements(t,i,n,s){}_removeElements(t,i){let n=this._cachedMeta;if(this._parsing){let s=n._parsed.splice(t,i);n._stacked&&Jo(n,s)}n.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,n,s]=t;this[i](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};var Ic=class extends Oc{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=i,r=this.chart._animationsDisabled,{start:a,count:l}=Wd(i,s,r);this._drawStart=a,this._drawCount=l,Hd(i)&&(a=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;let c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},t),this.updateElements(s,a,l,t)}updateElements(t,i,n,s){let o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(i,s),f=r.axis,p=a.axis,{spanGaps:m,segment:g}=this.options,b=mn(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||s==="none",v=i+n,M=t.length,w=i>0&&this.getParsed(i-1);for(let x=0;x<M;++x){let E=t[x],_=y?E:{};if(x<i||x>=v){_.skip=!0;continue}let L=this.getParsed(x),T=J(L[p]),k=_[f]=r.getPixelForValue(L[f],x),R=_[p]=o||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,L,l):L[p],x);_.skip=isNaN(k)||isNaN(R)||T,_.stop=x>0&&Math.abs(L[f]-w[f])>b,g&&(_.parsed=L,_.raw=c.data[x]),h&&(_.options=u||this.resolveDataElementOptions(x,E.active?"active":s)),y||this.updateElement(E,x,_,s),w=L}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,n=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return n;let o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,r)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}};function gn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var hf=class e{static override(t){Object.assign(e.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return gn()}parse(){return gn()}format(){return gn()}add(){return gn()}diff(){return gn()}startOf(){return gn()}endOf(){return gn()}},ZE={_date:hf};function JE(e,t,i,n){let{controller:s,data:o,_sorted:r}=e,a=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&r&&o.length){let c=a._reversePixels?Dd:ti;if(n){if(s._sharedOptions){let u=o[0],h=typeof u.getRange=="function"&&u.getRange(t);if(h){let f=c(o,t,i-h),p=c(o,t,i+h);return{lo:f.lo,hi:p.hi}}}}else{let u=c(o,t,i);if(l){let{vScale:h}=s._cachedMeta,{_parsed:f}=e,p=f.slice(0,u.lo+1).reverse().findIndex(g=>!J(g[h.axis]));u.lo-=Math.max(0,p);let m=f.slice(u.hi).findIndex(g=>!J(g[h.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:o.length-1}}function ar(e,t,i,n,s){let o=e.getSortedVisibleDatasetMetas(),r=i[t];for(let a=0,l=o.length;a<l;++a){let{index:c,data:u}=o[a],{lo:h,hi:f}=JE(o[a],t,r,s);for(let p=h;p<=f;++p){let m=u[p];m.skip||n(m,c,p)}}}function QE(e){let t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(n,s){let o=t?Math.abs(n.x-s.x):0,r=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function sf(e,t,i,n,s){let o=[];return!s&&!e.isPointInArea(t)||ar(e,i,t,function(a,l,c){!s&&!ge(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function tM(e,t,i,n){let s=[];function o(r,a,l){let{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],n),{angle:h}=Pd(r,{x:t.x,y:t.y});rc(h,c,u)&&s.push({element:r,datasetIndex:a,index:l})}return ar(e,i,t,o),s}function eM(e,t,i,n,s,o){let r=[],a=QE(i),l=Number.POSITIVE_INFINITY;function c(u,h,f){let p=u.inRange(t.x,t.y,s);if(n&&!p)return;let m=u.getCenterPoint(s);if(!(!!o||e.isPointInArea(m))&&!p)return;let b=a(t,m);b<l?(r=[{element:u,datasetIndex:h,index:f}],l=b):b===l&&r.push({element:u,datasetIndex:h,index:f})}return ar(e,i,t,c),r}function of(e,t,i,n,s,o){return!o&&!e.isPointInArea(t)?[]:i==="r"&&!n?tM(e,t,i,s):eM(e,t,i,n,s,o)}function kb(e,t,i,n,s){let o=[],r=i==="x"?"inXRange":"inYRange",a=!1;return ar(e,i,t,(l,c,u)=>{l[r]&&l[r](t[i],s)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,s))}),n&&!a?[]:o}var wf={evaluateInteractionItems:ar,modes:{index(e,t,i,n){let s=ye(t,e),o=i.axis||"x",r=i.includeInvisible||!1,a=i.intersect?sf(e,s,o,n,r):of(e,s,o,!1,n,r),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{let u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,i,n){let s=ye(t,e),o=i.axis||"xy",r=i.includeInvisible||!1,a=i.intersect?sf(e,s,o,n,r):of(e,s,o,!1,n,r);if(a.length>0){let l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,i,n){let s=ye(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;return sf(e,s,o,n,r)},nearest(e,t,i,n){let s=ye(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;return of(e,s,o,i.intersect,n,r)},x(e,t,i,n){let s=ye(t,e);return kb(e,s,"x",i.intersect,n)},y(e,t,i,n){let s=ye(t,e);return kb(e,s,"y",i.intersect,n)}}},xy=["left","top","right","bottom"];function Qo(e,t){return e.filter(i=>i.pos===t)}function Pb(e,t){return e.filter(i=>xy.indexOf(i.pos)===-1&&i.box.axis===t)}function tr(e,t){return e.sort((i,n)=>{let s=t?n:i,o=t?i:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function iM(e){let t=[],i,n,s,o,r,a;for(i=0,n=(e||[]).length;i<n;++i)s=e[i],{position:o,options:{stack:r,stackWeight:a=1}}=s,t.push({index:i,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return t}function nM(e){let t={};for(let i of e){let{stack:n,pos:s,stackWeight:o}=i;if(!n||!xy.includes(s))continue;let r=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function sM(e,t){let i=nM(e),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t,o,r,a;for(o=0,r=e.length;o<r;++o){a=e[o];let{fullSize:l}=a.box,c=i[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&t.availableWidth,a.height=s):(a.width=n,a.height=u?u*s:l&&t.availableHeight)}return i}function oM(e){let t=iM(e),i=tr(t.filter(c=>c.box.fullSize),!0),n=tr(Qo(t,"left"),!0),s=tr(Qo(t,"right")),o=tr(Qo(t,"top"),!0),r=tr(Qo(t,"bottom")),a=Pb(t,"x"),l=Pb(t,"y");return{fullSize:i,leftAndTop:n.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:Qo(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function Rb(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function _y(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function rM(e,t,i,n){let{pos:s,box:o}=i,r=e.maxPadding;if(!j(s)){i.size&&(e[s]-=i.size);let h=n[i.stack]||{size:0,count:1};h.size=Math.max(h.size,i.horizontal?o.height:o.width),i.size=h.size/h.count,e[s]+=i.size}o.getPadding&&_y(r,o.getPadding());let a=Math.max(0,t.outerWidth-Rb(r,e,"left","right")),l=Math.max(0,t.outerHeight-Rb(r,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:u}:{same:u,other:c}}function aM(e){let t=e.maxPadding;function i(n){let s=Math.max(t[n]-e[n],0);return e[n]+=s,s}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function lM(e,t){let i=t.maxPadding;function n(s){let o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(t[r],i[r])}),o}return n(e?["left","right"]:["top","bottom"])}function nr(e,t,i,n){let s=[],o,r,a,l,c,u;for(o=0,r=e.length,c=0;o<r;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,lM(a.horizontal,t));let{same:h,other:f}=rM(t,i,a,n);c|=h&&s.length,u=u||f,l.fullSize||s.push(a)}return c&&nr(s,t,i,n)||u}function Cc(e,t,i,n,s){e.top=i,e.left=t,e.right=t+n,e.bottom=i+s,e.width=n,e.height=s}function Db(e,t,i,n){let s=i.padding,{x:o,y:r}=t;for(let a of e){let l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){let h=t.w*u,f=c.size||l.height;hs(c.start)&&(r=c.start),l.fullSize?Cc(l,s.left,r,i.outerWidth-s.right-s.left,f):Cc(l,t.left+c.placed,r,h,f),c.start=r,c.placed+=h,r=l.bottom}else{let h=t.h*u,f=c.size||l.width;hs(c.start)&&(o=c.start),l.fullSize?Cc(l,o,s.top,f,i.outerHeight-s.bottom-s.top):Cc(l,o,t.top+c.placed,f,h),c.start=o,c.placed+=h,o=l.right}}t.x=o,t.y=r}var Bi={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){let i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;let s=St(e.options.layout.padding),o=Math.max(t-s.width,0),r=Math.max(i-s.height,0),a=oM(e.boxes),l=a.vertical,c=a.horizontal;X(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let u=l.reduce((g,b)=>b.box.options&&b.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:i,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),f=Object.assign({},s);_y(f,St(n));let p=Object.assign({maxPadding:f,w:o,h:r,x:s.left,y:s.top},s),m=sM(l.concat(c),h);nr(a.fullSize,p,h,m),nr(l,p,h,m),nr(c,p,h,m)&&nr(l,p,h,m),aM(p),Db(a.leftAndTop,p,h,m),p.x+=p.w,p.y+=p.h,Db(a.rightAndBottom,p,h,m),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},X(a.chartArea,g=>{let b=g.box;Object.assign(b,e.chartArea),b.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},Fc=class{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,n){}removeEventListener(t,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,n,s){return i=Math.max(0,i||t.width),n=n||t.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(t){return!0}updateConfig(t){}},df=class extends Fc{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},Pc="$chartjs",cM={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ob=e=>e===null||e==="";function uM(e,t){let i=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e[Pc]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Ob(s)){let o=xc(e,"width");o!==void 0&&(e.width=o)}if(Ob(n))if(e.style.height==="")e.height=e.width/(t||2);else{let o=xc(e,"height");o!==void 0&&(e.height=o)}return e}var wy=Kd?{passive:!0}:!1;function hM(e,t,i){e&&e.addEventListener(t,i,wy)}function dM(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,wy)}function fM(e,t){let i=cM[e.type]||e.type,{x:n,y:s}=ye(e,t);return{type:i,chart:t,native:e,x:n!==void 0?n:null,y:s!==void 0?s:null}}function Bc(e,t){for(let i of e)if(i===t||i.contains(t))return!0}function pM(e,t,i){let n=e.canvas,s=new MutationObserver(o=>{let r=!1;for(let a of o)r=r||Bc(a.addedNodes,n),r=r&&!Bc(a.removedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function mM(e,t,i){let n=e.canvas,s=new MutationObserver(o=>{let r=!1;for(let a of o)r=r||Bc(a.removedNodes,n),r=r&&!Bc(a.addedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}var or=new Map,Ib=0;function Sy(){let e=window.devicePixelRatio;e!==Ib&&(Ib=e,or.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function gM(e,t){or.size||window.addEventListener("resize",Sy),or.set(e,t)}function bM(e){or.delete(e),or.size||window.removeEventListener("resize",Sy)}function yM(e,t,i){let n=e.canvas,s=n&&Zo(n);if(!s)return;let o=cc((a,l)=>{let c=s.clientWidth;i(a,l),c<s.clientWidth&&i()},window),r=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(s),gM(e,o),r}function rf(e,t,i){i&&i.disconnect(),t==="resize"&&bM(e)}function vM(e,t,i){let n=e.canvas,s=cc(o=>{e.ctx!==null&&i(fM(o,e))},e);return hM(n,t,s),s}var ff=class extends Fc{acquireContext(t,i){let n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(uM(t,i),n):null}releaseContext(t){let i=t.canvas;if(!i[Pc])return!1;let n=i[Pc].initial;["height","width"].forEach(o=>{let r=n[o];J(r)?i.removeAttribute(o):i.setAttribute(o,r)});let s=n.style||{};return Object.keys(s).forEach(o=>{i.style[o]=s[o]}),i.width=i.width,delete i[Pc],!0}addEventListener(t,i,n){this.removeEventListener(t,i);let s=t.$proxies||(t.$proxies={}),r={attach:pM,detach:mM,resize:yM}[i]||vM;s[i]=r(t,i,n)}removeEventListener(t,i){let n=t.$proxies||(t.$proxies={}),s=n[i];if(!s)return;({attach:rf,detach:rf,resize:rf}[i]||dM)(t,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,n,s){return $d(t,i,n,s)}isAttached(t){let i=t&&Zo(t);return!!(i&&i.isConnected)}};function xM(e){return!Ko()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?df:ff}var Ni=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}hasValue(){return mn(this.x)&&mn(this.y)}getProps(t,i){let n=this.$animations;if(!i||!n)return this;let s={};return t.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}};function _M(e,t){let i=e.options.ticks,n=wM(e),s=Math.min(i.maxTicksLimit||n,n),o=i.major.enabled?EM(t):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>s)return MM(t,c,o,r/s),c;let u=SM(o,t,s);if(r>0){let h,f,p=r>1?Math.round((l-a)/(r-1)):null;for(Lc(t,c,u,J(p)?0:a-p,a),h=0,f=r-1;h<f;h++)Lc(t,c,u,o[h],o[h+1]);return Lc(t,c,u,l,J(p)?t.length:l+p),c}return Lc(t,c,u),c}function wM(e){let t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),s=e._maxLength/i;return Math.floor(Math.min(n,s))}function SM(e,t,i){let n=CM(e),s=t.length/i;if(!n)return Math.max(s,1);let o=Ad(n);for(let r=0,a=o.length-1;r<a;r++){let l=o[r];if(l>s)return l}return Math.max(s,1)}function EM(e){let t=[],i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}function MM(e,t,i,n){let s=0,o=i[0],r;for(n=Math.ceil(n),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=i[s*n])}function Lc(e,t,i,n,s){let o=U(n,0),r=Math.min(U(s,e.length),e.length),a=0,l,c,u;for(i=Math.ceil(i),s&&(l=s-n,i=l/Math.floor(l/i)),u=o;u<0;)a++,u=Math.round(o+a*i);for(c=Math.max(o,0);c<r;c++)c===u&&(t.push(e[c]),a++,u=Math.round(o+a*i))}function CM(e){let t=e.length,i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}var LM=e=>e==="left"?"right":e==="right"?"left":e,Fb=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,Bb=(e,t)=>Math.min(t||e,e);function Nb(e,t){let i=[],n=e.length/t,s=e.length,o=0;for(;o<s;o+=n)i.push(e[Math.floor(o)]);return i}function TM(e,t,i){let n=e.ticks.length,s=Math.min(t,n-1),o=e._startPixel,r=e._endPixel,a=1e-6,l=e.getPixelForTick(s),c;if(!(i&&(n===1?c=Math.max(l-o,r-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<o-a||l>r+a)))return l}function AM(e,t){X(e,i=>{let n=i.gc,s=n.length/2,o;if(s>t){for(o=0;o<s;++o)delete i.data[n[o]];n.splice(0,s)}})}function er(e){return e.drawTicks?e.tickLength:0}function Wb(e,t){if(!e.display)return 0;let i=vt(e.font,t),n=St(e.padding);return(ot(e.text)?e.text.length:1)*i.lineHeight+n.height}function kM(e,t){return Ie(e,{scale:t,type:"scale"})}function PM(e,t,i){return Ie(e,{tick:i,index:t,type:"tick"})}function RM(e,t,i){let n=uc(e);return(i&&t!=="right"||!i&&t==="right")&&(n=LM(n)),n}function DM(e,t,i,n){let{top:s,left:o,bottom:r,right:a,chart:l}=e,{chartArea:c,scales:u}=l,h=0,f,p,m,g=r-s,b=a-o;if(e.isHorizontal()){if(p=Ot(n,o,a),j(i)){let y=Object.keys(i)[0],v=i[y];m=u[y].getPixelForValue(v)+g-t}else i==="center"?m=(c.bottom+c.top)/2+g-t:m=Fb(e,i,t);f=a-o}else{if(j(i)){let y=Object.keys(i)[0],v=i[y];p=u[y].getPixelForValue(v)-b+t}else i==="center"?p=(c.left+c.right)/2-b+t:p=Fb(e,i,t);m=Ot(n,r,s),h=i==="left"?-Pt:Pt}return{titleX:p,titleY:m,maxWidth:f,rotation:h}}var bs=class e extends Ni{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return t=Dt(t,Number.POSITIVE_INFINITY),i=Dt(i,Number.NEGATIVE_INFINITY),n=Dt(n,Number.POSITIVE_INFINITY),s=Dt(s,Number.NEGATIVE_INFINITY),{min:Dt(t,n),max:Dt(i,s),minDefined:lt(t),maxDefined:lt(i)}}getMinMax(t){let{min:i,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:i,max:n};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),s||(i=Math.min(i,r.min)),o||(n=Math.max(n,r.max));return i=o&&i>n?n:i,n=s&&i>n?i:n,{min:Dt(i,Dt(n,i)),max:Dt(n,Dt(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){nt(this.options.beforeUpdate,[this])}update(t,i,n){let{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Gd(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?Nb(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=_M(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,t=!t),this._startPixel=i,this._endPixel=n,this._reversePixels=t,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){nt(this.options.afterUpdate,[this])}beforeSetDimensions(){nt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){nt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),nt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){nt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let i=this.options.ticks,n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n],o.label=nt(i.callback,[o.value,n,t],this)}afterTickToLabelConversion(){nt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){nt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,i=t.ticks,n=Bb(this.ticks.length,t.ticks.maxTicksLimit),s=i.minRotation||0,o=i.maxRotation,r=s,a,l,c;if(!this._isVisible()||!i.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}let u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=te(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/n:p/(n-1),h+6>a&&(a=p/(n-(t.offset?.5:1)),l=this.maxHeight-er(t.grid)-i.padding-Wb(t.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),r=Vo(Math.min(Math.asin(te((u.highest.height+6)/a,-1,1)),Math.asin(te(l/c,-1,1))-Math.asin(te(f/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){nt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){nt(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){let l=Wb(s,i.options.font);if(a?(t.width=this.maxWidth,t.height=er(o)+l):(t.height=this.maxHeight,t.width=er(o)+l),n.display&&this.ticks.length){let{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),p=n.padding*2,m=Oe(this.labelRotation),g=Math.cos(m),b=Math.sin(m);if(a){let y=n.mirror?0:b*h.width+g*f.height;t.height=Math.min(this.maxHeight,t.height+y+p)}else{let y=n.mirror?0:g*h.width+b*f.height;t.width=Math.min(this.maxWidth,t.width+y+p)}this._calculatePadding(c,u,b,g)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,n,s){let{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),f=0,p=0;l?c?(f=s*t.width,p=n*i.height):(f=n*t.height,p=s*i.width):o==="start"?p=i.width:o==="end"?f=t.width:o!=="inner"&&(f=t.width/2,p=i.width/2),this.paddingLeft=Math.max((f-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+r)*this.width/(this.width-h),0)}else{let u=i.height/2,h=t.height/2;o==="start"?(u=0,h=t.height):o==="end"&&(u=i.height,h=0),this.paddingTop=u+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){nt(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,n;for(i=0,n=t.length;i<n;i++)J(t[i].label)&&(t.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let i=this.options.ticks.sampleSize,n=this.ticks;i<n.length&&(n=Nb(n,i)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,n){let{ctx:s,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(i/Bb(i,n)),c=0,u=0,h,f,p,m,g,b,y,v,M,w,x;for(h=0;h<i;h+=l){if(m=t[h].label,g=this._resolveTickFontOptions(h),s.font=b=g.string,y=o[b]=o[b]||{data:{},gc:[]},v=g.lineHeight,M=w=0,!J(m)&&!ot(m))M=as(s,y.data,y.gc,M,m),w=v;else if(ot(m))for(f=0,p=m.length;f<p;++f)x=m[f],!J(x)&&!ot(x)&&(M=as(s,y.data,y.gc,M,x),w+=v);r.push(M),a.push(w),c=Math.max(M,c),u=Math.max(w,u)}AM(o,i);let E=r.indexOf(c),_=a.indexOf(u),L=T=>({width:r[T]||0,height:a[T]||0});return{first:L(0),last:L(i-1),widest:L(E),highest:L(_),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let i=this._startPixel+t*this._length;return Rd(this._alignToPixels?ei(this.chart,i,0):i)}getDecimalForPixel(t){let i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){let i=this.ticks||[];if(t>=0&&t<i.length){let n=i[t];return n.$context||(n.$context=PM(this.getContext(),t,n))}return this.$context||(this.$context=kM(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,i=Oe(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let i=this.axis,n=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=er(o),p=[],m=a.setContext(this.getContext()),g=m.display?m.width:0,b=g/2,y=function(q){return ei(n,q,g)},v,M,w,x,E,_,L,T,k,R,O,H;if(r==="top")v=y(this.bottom),_=this.bottom-f,T=v-b,R=y(t.top)+b,H=t.bottom;else if(r==="bottom")v=y(this.top),R=t.top,H=y(t.bottom)-b,_=v+b,T=this.top+f;else if(r==="left")v=y(this.right),E=this.right-f,L=v-b,k=y(t.left)+b,O=t.right;else if(r==="right")v=y(this.left),k=t.left,O=y(t.right)-b,E=v+b,L=this.left+f;else if(i==="x"){if(r==="center")v=y((t.top+t.bottom)/2+.5);else if(j(r)){let q=Object.keys(r)[0],ft=r[q];v=y(this.chart.scales[q].getPixelForValue(ft))}R=t.top,H=t.bottom,_=v+b,T=_+f}else if(i==="y"){if(r==="center")v=y((t.left+t.right)/2);else if(j(r)){let q=Object.keys(r)[0],ft=r[q];v=y(this.chart.scales[q].getPixelForValue(ft))}E=v-b,L=E-f,k=t.left,O=t.right}let Y=U(s.ticks.maxTicksLimit,h),G=Math.max(1,Math.ceil(h/Y));for(M=0;M<h;M+=G){let q=this.getContext(M),ft=o.setContext(q),It=a.setContext(q),wn=ft.lineWidth,Wi=ft.color,Hi=It.dash||[],oi=It.dashOffset,xs=ft.tickWidth,Ui=ft.tickColor,_s=ft.tickBorderDash||[],zi=ft.tickBorderDashOffset;w=TM(this,M,l),w!==void 0&&(x=ei(n,w,wn),c?E=L=k=O=x:_=T=R=H=x,p.push({tx1:E,ty1:_,tx2:L,ty2:T,x1:k,y1:R,x2:O,y2:H,width:wn,color:Wi,borderDash:Hi,borderDashOffset:oi,tickWidth:xs,tickColor:Ui,tickBorderDash:_s,tickBorderDashOffset:zi}))}return this._ticksLength=h,this._borderValue=v,p}_computeLabelItems(t){let i=this.axis,n=this.options,{position:s,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=o,f=er(n.grid),p=f+u,m=h?-u:p,g=-Oe(this.labelRotation),b=[],y,v,M,w,x,E,_,L,T,k,R,O,H="middle";if(s==="top")E=this.bottom-m,_=this._getXAxisLabelAlignment();else if(s==="bottom")E=this.top+m,_=this._getXAxisLabelAlignment();else if(s==="left"){let G=this._getYAxisLabelAlignment(f);_=G.textAlign,x=G.x}else if(s==="right"){let G=this._getYAxisLabelAlignment(f);_=G.textAlign,x=G.x}else if(i==="x"){if(s==="center")E=(t.top+t.bottom)/2+p;else if(j(s)){let G=Object.keys(s)[0],q=s[G];E=this.chart.scales[G].getPixelForValue(q)+p}_=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")x=(t.left+t.right)/2-p;else if(j(s)){let G=Object.keys(s)[0],q=s[G];x=this.chart.scales[G].getPixelForValue(q)}_=this._getYAxisLabelAlignment(f).textAlign}i==="y"&&(l==="start"?H="top":l==="end"&&(H="bottom"));let Y=this._getLabelSizes();for(y=0,v=a.length;y<v;++y){M=a[y],w=M.label;let G=o.setContext(this.getContext(y));L=this.getPixelForTick(y)+o.labelOffset,T=this._resolveTickFontOptions(y),k=T.lineHeight,R=ot(w)?w.length:1;let q=R/2,ft=G.color,It=G.textStrokeColor,wn=G.textStrokeWidth,Wi=_;r?(x=L,_==="inner"&&(y===v-1?Wi=this.options.reverse?"left":"right":y===0?Wi=this.options.reverse?"right":"left":Wi="center"),s==="top"?c==="near"||g!==0?O=-R*k+k/2:c==="center"?O=-Y.highest.height/2-q*k+k:O=-Y.highest.height+k/2:c==="near"||g!==0?O=k/2:c==="center"?O=Y.highest.height/2-q*k:O=Y.highest.height-R*k,h&&(O*=-1),g!==0&&!G.showLabelBackdrop&&(x+=k/2*Math.sin(g))):(E=L,O=(1-R)*k/2);let Hi;if(G.showLabelBackdrop){let oi=St(G.backdropPadding),xs=Y.heights[y],Ui=Y.widths[y],_s=O-oi.top,zi=0-oi.left;switch(H){case"middle":_s-=xs/2;break;case"bottom":_s-=xs;break}switch(_){case"center":zi-=Ui/2;break;case"right":zi-=Ui;break;case"inner":y===v-1?zi-=Ui:y>0&&(zi-=Ui/2);break}Hi={left:zi,top:_s,width:Ui+oi.width,height:xs+oi.height,color:G.backdropColor}}b.push({label:w,font:T,textOffset:O,options:{rotation:g,color:ft,strokeColor:It,strokeWidth:wn,textAlign:Wi,textBaseline:H,translation:[x,E],backdrop:Hi}})}return b}_getXAxisLabelAlignment(){let{position:t,ticks:i}=this.options;if(-Oe(this.labelRotation))return t==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){let{position:i,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width,c,u;return i==="left"?s?(u=this.right+o,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):i==="right"?s?(u=this.left+o,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:i},left:n,top:s,width:o,height:r}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(n,s,o,r),t.restore())}getLineWidthForValue(t){let i=this.options.grid;if(!this._isVisible()||!i.display)return 0;let s=this.ticks.findIndex(o=>o.value===t);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){let i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),o,r,a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(i.display)for(o=0,r=s.length;o<r;++o){let l=s[o];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:i,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;let a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,u,h,f;this.isHorizontal()?(c=ei(t,this.left,r)-r/2,u=ei(t,this.right,a)+a/2,h=f=l):(h=ei(t,this.top,r)-r/2,f=ei(t,this.bottom,a)+a/2,c=u=l),i.save(),i.lineWidth=o.width,i.strokeStyle=o.color,i.beginPath(),i.moveTo(c,h),i.lineTo(u,f),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;let n=this.ctx,s=this._computeLabelArea();s&&ds(n,s);let o=this.getLabelItems(t);for(let r of o){let a=r.options,l=r.font,c=r.label,u=r.textOffset;Oi(n,c,0,u,l,a)}s&&fs(n)}drawTitle(){let{ctx:t,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;let o=vt(n.font),r=St(n.padding),a=n.align,l=o.lineHeight/2;i==="bottom"||i==="center"||j(i)?(l+=r.bottom,ot(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;let{titleX:c,titleY:u,maxWidth:h,rotation:f}=DM(this,l,i,a);Oi(t,n.text,0,0,o,{color:n.color,maxWidth:h,rotation:f,textAlign:RM(a,i,s),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,i=t.ticks&&t.ticks.z||0,n=U(t.grid&&t.grid.z,-1),s=U(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==e.prototype.draw?[{z:i,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){let i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[],o,r;for(o=0,r=i.length;o<r;++o){let a=i[o];a[n]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){let i=this.options.ticks.setContext(this.getContext(t));return vt(i.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},gs=class{constructor(t,i,n){this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let i=Object.getPrototypeOf(t),n;FM(i)&&(n=this.register(i));let s=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,OM(t,r,n),this.override&&ht.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){let i=this.items,n=t.id,s=this.scope;n in i&&delete i[n],s&&n in ht[s]&&(delete ht[s][n],this.override&&delete Di[n])}};function OM(e,t,i){let n=dn(Object.create(null),[i?ht.get(i):{},ht.get(t),e.defaults]);ht.set(t,n),e.defaultRoutes&&IM(t,e.defaultRoutes),e.descriptors&&ht.describe(t,e.descriptors)}function IM(e,t){Object.keys(t).forEach(i=>{let n=i.split("."),s=n.pop(),o=[e].concat(n).join("."),r=t[i].split("."),a=r.pop(),l=r.join(".");ht.route(o,s,l,a)})}function FM(e){return"id"in e&&"defaults"in e}var pf=class{constructor(){this.controllers=new gs(Oc,"datasets",!0),this.elements=new gs(Ni,"elements"),this.plugins=new gs(Object,"plugins"),this.scales=new gs(bs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,n){[...i].forEach(s=>{let o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):X(s,r=>{let a=n||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,i,n){let s=jo(t);nt(n["before"+s],[],n),i[t](n),nt(n["after"+s],[],n)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){let n=this._typedRegistries[i];if(n.isForType(t))return n}return this.plugins}_get(t,i,n){let s=i.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}},Be=new pf,mf=class{constructor(){this._init=[]}notify(t,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let o=s?this._descriptors(t).filter(s):this._descriptors(t),r=this._notify(o,t,i,n);return i==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,i,n,s){s=s||{};for(let o of t){let r=o.plugin,a=r[n],l=[i,s,o.options];if(nt(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){J(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){let n=t&&t.config,s=U(n.options&&n.options.plugins,{}),o=BM(n);return s===!1&&!i?[]:WM(t,o,s,i)}_notifyStateChanges(t){let i=this._oldCache||[],n=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(i,n),t,"stop"),this._notify(s(n,i),t,"start")}};function BM(e){let t={},i=[],n=Object.keys(Be.plugins.items);for(let o=0;o<n.length;o++)i.push(Be.getPlugin(n[o]));let s=e.plugins||[];for(let o=0;o<s.length;o++){let r=s[o];i.indexOf(r)===-1&&(i.push(r),t[r.id]=!0)}return{plugins:i,localIds:t}}function NM(e,t){return!t&&e===!1?null:e===!0?{}:e}function WM(e,{plugins:t,localIds:i},n,s){let o=[],r=e.getContext();for(let a of t){let l=a.id,c=NM(n[l],s);c!==null&&o.push({plugin:a,options:HM(e.config,{plugin:a,local:i[l]},c,r)})}return o}function HM(e,{plugin:t,local:i},n,s){let o=e.pluginScopeKeys(t),r=e.getOptionScopes(n,o);return i&&t.defaults&&r.push(t.defaults),e.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gf(e,t){let i=ht.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function UM(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function zM(e,t){return e===t?"_index_":"_value_"}function Hb(e){if(e==="x"||e==="y"||e==="r")return e}function jM(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function bf(e,...t){if(Hb(e))return e;for(let i of t){let n=i.axis||jM(i.position)||e.length>1&&Hb(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Ub(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function VM(e,t){if(t.data&&t.data.datasets){let i=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(i.length)return Ub(e,"x",i[0])||Ub(e,"y",i[0])}return{}}function GM(e,t){let i=Di[e.type]||{scales:{}},n=t.scales||{},s=gf(e.type,t),o=Object.create(null);return Object.keys(n).forEach(r=>{let a=n[r];if(!j(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);let l=bf(r,a,VM(r,e),ht.scales[a.type]),c=zM(l,s),u=i.scales||{};o[r]=fn(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(r=>{let a=r.type||e.type,l=r.indexAxis||gf(a,t),u=(Di[a]||{}).scales||{};Object.keys(u).forEach(h=>{let f=UM(h,l),p=r[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),fn(o[p],[{axis:f},n[p],u[h]])})}),Object.keys(o).forEach(r=>{let a=o[r];fn(a,[ht.scales[a.type],ht.scale])}),o}function Ey(e){let t=e.options||(e.options={});t.plugins=U(t.plugins,{}),t.scales=GM(e,t)}function My(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function YM(e){return e=e||{},e.data=My(e.data),Ey(e),e}var zb=new Map,Cy=new Set;function Tc(e,t){let i=zb.get(e);return i||(i=t(),zb.set(e,i),Cy.add(i)),i}var ir=(e,t,i)=>{let n=us(t,i);n!==void 0&&e.add(n)},yf=class{constructor(t){this._config=YM(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=My(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),Ey(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Tc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return Tc(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return Tc(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){let i=t.id,n=this.type;return Tc(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){let n=this._scopeCache,s=n.get(t);return(!s||i)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,i,n){let{options:s,type:o}=this,r=this._cachedScopes(t,n),a=r.get(i);if(a)return a;let l=new Set;i.forEach(u=>{t&&(l.add(t),u.forEach(h=>ir(l,t,h))),u.forEach(h=>ir(l,s,h)),u.forEach(h=>ir(l,Di[o]||{},h)),u.forEach(h=>ir(l,ht,h)),u.forEach(h=>ir(l,fc,h))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Cy.has(i)&&r.set(i,c),c}chartOptionScopes(){let{options:t,type:i}=this;return[t,Di[i]||{},ht.datasets[i]||{},{type:i},ht,fc]}resolveNamedOptions(t,i,n,s=[""]){let o={$shared:!0},{resolver:r,subPrefixes:a}=jb(this._resolverCache,t,s),l=r;if(XM(r,i)){o.$shared=!1,n=Re(n)?n():n;let c=this.createResolver(t,n,a);l=Pi(r,n,c)}for(let c of i)o[c]=l[c];return o}createResolver(t,i,n=[""],s){let{resolver:o}=jb(this._resolverCache,t,n);return j(i)?Pi(o,i,void 0,s):o}};function jb(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));let s=i.join(),o=n.get(s);return o||(o={resolver:$o(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,o)),o}var qM=e=>j(e)&&Object.getOwnPropertyNames(e).some(t=>Re(e[t]));function XM(e,t){let{isScriptable:i,isIndexable:n}=bc(e);for(let s of t){let o=i(s),r=n(s),a=(r||o)&&e[s];if(o&&(Re(a)||qM(a))||r&&ot(a))return!0}return!1}var $M="4.5.0",KM=["top","bottom","left","right","chartArea"];function Vb(e,t){return e==="top"||e==="bottom"||KM.indexOf(e)===-1&&t==="x"}function Gb(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function Yb(e){let t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),nt(i&&i.onComplete,[e],t)}function ZM(e){let t=e.chart,i=t.options.animation;nt(i&&i.onProgress,[e],t)}function Ly(e){return Ko()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var Rc={},qb=e=>{let t=Ly(e);return Object.values(Rc).filter(i=>i.canvas===t).pop()};function JM(e,t,i){let n=Object.keys(e);for(let s of n){let o=+s;if(o>=t){let r=e[s];delete e[s],(i>0||o>t)&&(e[o+i]=r)}}}function QM(e,t,i,n){return!i||e.type==="mouseout"?null:n?t:e}var yn=class{static defaults=ht;static instances=Rc;static overrides=Di;static registry=Be;static version=$M;static getChart=qb;static register(...t){Be.add(...t),Xb()}static unregister(...t){Be.remove(...t),Xb()}constructor(t,i){let n=this.config=new yf(i),s=Ly(t),o=qb(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||xM(s)),this.platform.updateConfig(n);let a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Cd(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new mf,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Bd(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],Rc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ii.listen(this,"complete",Yb),ii.listen(this,"progress",ZM),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:n,height:s,_aspectRatio:o}=this;return J(t)?i&&o?o:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Be}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vc(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return pc(this.canvas,this.ctx),this}stop(){return ii.stop(this),this}resize(t,i){ii.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,i,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,vc(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),nt(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};X(i,(n,s)=>{n.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,n=this.scales,s=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{}),o=[];i&&(o=o.concat(Object.keys(i).map(r=>{let a=i[r],l=bf(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),X(o,r=>{let a=r.options,l=a.id,c=bf(l,a),u=U(a.type,r.dtype);(a.position===void 0||Vb(a.position,c)!==Vb(r.dposition))&&(a.position=r.dposition),s[l]=!0;let h=null;if(l in n&&n[l].type===u)h=n[l];else{let f=Be.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(a,t)}),X(s,(r,a)=>{r||delete n[a]}),X(n,r=>{Bi.configure(this,r,r.options),Bi.addBox(this,r)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,n=t.length;if(t.sort((s,o)=>s.index-o.index),n>i){for(let s=i;s<n;++s)this._destroyDatasetMeta(s);t.splice(i,n-i)}this._sortedMetasets=t.slice(0).sort(Gb("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((n,s)=>{i.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,n,s;for(this._removeUnreferencedMetasets(),n=0,s=i.length;n<s;n++){let o=i[n],r=this.getDatasetMeta(n),a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||gf(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{let l=Be.getController(a),{datasetElementType:c,dataElementType:u}=ht.datasets[a];Object.assign(l,{dataElementType:Be.getElement(u),datasetElementType:c&&Be.getElement(c)}),r.controller=new l(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){X(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){let{controller:h}=this.getDatasetMeta(c),f=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),s||X(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Gb("z","_idx"));let{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){X(this.scales,t=>{Bi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!ic(i,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:n,start:s,count:o}of i){let r=n==="_removeElements"?-o:o;JM(t,s,r)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,n=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=n(0);for(let o=1;o<i;o++)if(!ic(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bi.update(this,this.width,this.height,t);let i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],X(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,Re(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let n=this.getDatasetMeta(t),s={meta:n,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ii.has(this)?this.attached&&!ii.running(this)&&ii.start(this):(this.draw(),Yb({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,n=[],s,o;for(s=0,o=i.length;s<o;++s){let r=i[s];(!t||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,n={meta:t,index:t.index,cancelable:!0},s=Mc(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(s&&ds(i,s),t.controller.draw(),s&&fs(i),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return ge(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,n,s){let o=wf.modes[i];return typeof o=="function"?o(this,t,n,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],n=this._metasets,s=n.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=Ie(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(t,i){let n=this.getDatasetMeta(t);n.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,n){let s=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,s);hs(i)?(o.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),ii.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),pc(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Rc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,n=(o,r)=>{i.addEventListener(this,o,r),t[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};X(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,n=(l,c)=>{i.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(i.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)},r,a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():r()}unbindEvents(){X(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},X(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,n){let s=n?"set":"remove",o,r,a,l;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];let c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],n=t.map(({datasetIndex:o,index:r})=>{let a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!cs(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(t,i,n){return this._plugins.notify(this,t,i,n)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,n){let s=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),r=o(i,t),a=n?t:o(t,i);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,i){let n={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;let o=this._handleEvent(t,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(t,i,n){let{_active:s=[],options:o}=this,r=i,a=this._getActiveElements(t,s,n,r),l=Td(t),c=QM(t,this._lastEvent,n,l);n&&(this._lastEvent=null,nt(o.onHover,[t,a,this],this),l&&nt(o.onClick,[t,a,this],this));let u=!cs(a,s);return(u||i)&&(this._active=a,this._updateHoverStyles(a,s,i)),this._lastEvent=c,u}_getActiveElements(t,i,n,s){if(t.type==="mouseout")return[];if(!n)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}};function Xb(){return X(yn.instances,e=>e._plugins.invalidate())}function Ty(e,t,i=t){e.lineCap=U(i.borderCapStyle,t.borderCapStyle),e.setLineDash(U(i.borderDash,t.borderDash)),e.lineDashOffset=U(i.borderDashOffset,t.borderDashOffset),e.lineJoin=U(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=U(i.borderWidth,t.borderWidth),e.strokeStyle=U(i.borderColor,t.borderColor)}function tC(e,t,i){e.lineTo(i.x,i.y)}function eC(e){return e.stepped?zd:e.tension||e.cubicInterpolationMode==="monotone"?jd:tC}function Ay(e,t,i={}){let n=e.length,{start:s=0,end:o=n-1}=i,{start:r,end:a}=t,l=Math.max(s,r),c=Math.min(o,a),u=s<r&&o<r||s>a&&o>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!u?n+c-l:c-l}}function iC(e,t,i,n){let{points:s,options:o}=t,{count:r,start:a,loop:l,ilen:c}=Ay(s,i,n),u=eC(o),{move:h=!0,reverse:f}=n||{},p,m,g;for(p=0;p<=c;++p)m=s[(a+(f?c-p:p))%r],!m.skip&&(h?(e.moveTo(m.x,m.y),h=!1):u(e,g,m,f,o.stepped),g=m);return l&&(m=s[(a+(f?c:0))%r],u(e,g,m,f,o.stepped)),!!l}function nC(e,t,i,n){let s=t.points,{count:o,start:r,ilen:a}=Ay(s,i,n),{move:l=!0,reverse:c}=n||{},u=0,h=0,f,p,m,g,b,y,v=w=>(r+(c?a-w:w))%o,M=()=>{g!==b&&(e.lineTo(u,b),e.lineTo(u,g),e.lineTo(u,y))};for(l&&(p=s[v(0)],e.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=s[v(f)],p.skip)continue;let w=p.x,x=p.y,E=w|0;E===m?(x<g?g=x:x>b&&(b=x),u=(h*u+w)/++h):(M(),e.lineTo(w,x),m=E,h=0,g=b=x),y=x}M()}function vf(e){let t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?nC:iC}function sC(e){return e.stepped?Zd:e.tension||e.cubicInterpolationMode==="monotone"?Jd:Qe}function oC(e,t,i,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,i,n)&&s.closePath()),Ty(e,t.options),e.stroke(s)}function rC(e,t,i,n){let{segments:s,options:o}=t,r=vf(t);for(let a of s)Ty(e,o,a.style),e.beginPath(),r(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}var aC=typeof Path2D=="function";function lC(e,t,i,n){aC&&!t.options.segment?oC(e,t,i,n):rC(e,t,i,n)}var vn=class extends Ni{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){let s=n.spanGaps?this._loop:this._fullLoop;Xd(this._points,n,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Qd(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,n=t.length;return n&&i[t[n-1].end]}interpolate(t,i){let n=this.options,s=t[i],o=this.points,r=Ec(this,{property:i,start:s,end:s});if(!r.length)return;let a=[],l=sC(n),c,u;for(c=0,u=r.length;c<u;++c){let{start:h,end:f}=r[c],p=o[h],m=o[f];if(p===m){a.push(p);continue}let g=Math.abs((s-p[i])/(m[i]-p[i])),b=l(p,m,g,n.stepped);b[i]=t[i],a.push(b)}return a.length===1?a[0]:a}pathSegment(t,i,n){return vf(this)(t,this,i,n)}path(t,i,n){let s=this.segments,o=vf(this),r=this._loop;i=i||0,n=n||this.points.length-i;for(let a of s)r&=o(t,this,a,{start:i,end:i+n-1});return!!r}draw(t,i,n,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),lC(t,this,n,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};function $b(e,t,i,n){let s=e.options,{[i]:o}=e.getProps([i],n);return Math.abs(t-o)<s.radius+s.hitRadius}var Nc=class extends Ni{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,n){let s=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(t-o,2)+Math.pow(i-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return $b(this,t,"x",i)}inYRange(t,i){return $b(this,t,"y",i)}getCenterPoint(t){let{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let n=i&&t.borderWidth||0;return(i+n)*2}draw(t,i){let n=this.options;this.skip||n.radius<.1||!ge(this,i,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Xo(t,n,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}};function cC(e,t,i){let n=e.segments,s=e.points,o=t.points,r=[];for(let a of n){let{start:l,end:c}=a;c=Vc(l,c,s);let u=xf(i,s[l],s[c],a.loop);if(!t.segments){r.push({source:a,target:u,start:s[l],end:s[c]});continue}let h=Ec(t,u);for(let f of h){let p=xf(i,o[f.start],o[f.end],f.loop),m=Sc(a,s,p);for(let g of m)r.push({source:g,target:f,start:{[i]:Kb(u,p,"start",Math.max)},end:{[i]:Kb(u,p,"end",Math.min)}})}}return r}function xf(e,t,i,n){if(n)return;let s=t[e],o=i[e];return e==="angle"&&(s=kt(s),o=kt(o)),{property:e,start:s,end:o}}function uC(e,t){let{x:i=null,y:n=null}=e||{},s=t.points,o=[];return t.segments.forEach(({start:r,end:a})=>{a=Vc(r,a,s);let l=s[r],c=s[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):i!==null&&(o.push({x:i,y:l.y}),o.push({x:i,y:c.y}))}),o}function Vc(e,t,i){for(;t>e;t--){let n=i[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function Kb(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function ky(e,t){let i=[],n=!1;return ot(e)?(n=!0,i=e):i=uC(e,t),i.length?new vn({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function Zb(e){return e&&e.fill!==!1}function hC(e,t,i){let s=e[t].fill,o=[t],r;if(!i)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!lt(s))return s;if(r=e[s],!r)return!1;if(r.visible)return s;o.push(s),s=r.fill}return!1}function dC(e,t,i){let n=gC(e);if(j(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return lt(s)&&Math.floor(s)===s?fC(n[0],t,s,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function fC(e,t,i,n){return(e==="-"||e==="+")&&(i=t+i),i===t||i<0||i>=n?!1:i}function pC(e,t){let i=null;return e==="start"?i=t.bottom:e==="end"?i=t.top:j(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}function mC(e,t,i){let n;return e==="start"?n=i:e==="end"?n=t.options.reverse?t.min:t.max:j(e)?n=e.value:n=t.getBaseValue(),n}function gC(e){let t=e.options,i=t.fill,n=U(i&&i.target,i);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function bC(e){let{scale:t,index:i,line:n}=e,s=[],o=n.segments,r=n.points,a=yC(t,i);a.push(ky({x:null,y:t.bottom},n));for(let l=0;l<o.length;l++){let c=o[l];for(let u=c.start;u<=c.end;u++)vC(s,r[u],a)}return new vn({points:s,options:{}})}function yC(e,t){let i=[],n=e.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){let o=n[s];if(o.index===t)break;o.hidden||i.unshift(o.dataset)}return i}function vC(e,t,i){let n=[];for(let s=0;s<i.length;s++){let o=i[s],{first:r,last:a,point:l}=xC(o,t,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function xC(e,t,i){let n=e.interpolate(t,i);if(!n)return{};let s=n[i],o=e.segments,r=e.points,a=!1,l=!1;for(let c=0;c<o.length;c++){let u=o[c],h=r[u.start][i],f=r[u.end][i];if(Ri(s,h,f)){a=s===h,l=s===f;break}}return{first:a,last:l,point:n}}var Wc=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,n){let{x:s,y:o,radius:r}=this;return i=i||{start:0,end:Rt},t.arc(s,o,r,i.end,i.start,!0),!n.bounds}interpolate(t){let{x:i,y:n,radius:s}=this,o=t.angle;return{x:i+Math.cos(o)*s,y:n+Math.sin(o)*s,angle:o}}};function _C(e){let{chart:t,fill:i,line:n}=e;if(lt(i))return wC(t,i);if(i==="stack")return bC(e);if(i==="shape")return!0;let s=SC(e);return s instanceof Wc?s:ky(s,n)}function wC(e,t){let i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}function SC(e){return(e.scale||{}).getPointPositionForValue?MC(e):EC(e)}function EC(e){let{scale:t={},fill:i}=e,n=pC(i,t);if(lt(n)){let s=t.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function MC(e){let{scale:t,fill:i}=e,n=t.options,s=t.getLabels().length,o=n.reverse?t.max:t.min,r=mC(i,t,o),a=[];if(n.grid.circular){let l=t.getPointPositionForValue(0,o);return new Wc({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(r)})}for(let l=0;l<s;++l)a.push(t.getPointPositionForValue(l,r));return a}function af(e,t,i){let n=_C(t),{chart:s,index:o,line:r,scale:a,axis:l}=t,c=r.options,u=c.fill,h=c.backgroundColor,{above:f=h,below:p=h}=u||{},m=s.getDatasetMeta(o),g=Mc(s,m);n&&r.points.length&&(ds(e,i),CC(e,{line:r,target:n,above:f,below:p,area:i,scale:a,axis:l,clip:g}),fs(e))}function CC(e,t){let{line:i,target:n,above:s,below:o,area:r,scale:a,clip:l}=t,c=i._loop?"angle":t.axis;e.save();let u=o;o!==s&&(c==="x"?(Jb(e,n,r.top),lf(e,{line:i,target:n,color:s,scale:a,property:c,clip:l}),e.restore(),e.save(),Jb(e,n,r.bottom)):c==="y"&&(Qb(e,n,r.left),lf(e,{line:i,target:n,color:o,scale:a,property:c,clip:l}),e.restore(),e.save(),Qb(e,n,r.right),u=s)),lf(e,{line:i,target:n,color:u,scale:a,property:c,clip:l}),e.restore()}function Jb(e,t,i){let{segments:n,points:s}=t,o=!0,r=!1;e.beginPath();for(let a of n){let{start:l,end:c}=a,u=s[l],h=s[Vc(l,c,s)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(u.x,i),e.lineTo(u.x,u.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(h.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function Qb(e,t,i){let{segments:n,points:s}=t,o=!0,r=!1;e.beginPath();for(let a of n){let{start:l,end:c}=a,u=s[l],h=s[Vc(l,c,s)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(i,u.y),e.lineTo(u.x,u.y)),r=!!t.pathSegment(e,a,{move:r}),r?e.closePath():e.lineTo(i,h.y)}e.lineTo(i,t.first().y),e.closePath(),e.clip()}function lf(e,t){let{line:i,target:n,property:s,color:o,scale:r,clip:a}=t,l=cC(i,n,s);for(let{source:c,target:u,start:h,end:f}of l){let{style:{backgroundColor:p=o}={}}=c,m=n!==!0;e.save(),e.fillStyle=p,LC(e,r,a,m&&xf(s,h,f)),e.beginPath();let g=!!i.pathSegment(e,c),b;if(m){g?e.closePath():ty(e,n,f,s);let y=!!n.pathSegment(e,u,{move:g,reverse:!0});b=g&&y,b||ty(e,n,h,s)}e.closePath(),e.fill(b?"evenodd":"nonzero"),e.restore()}}function LC(e,t,i,n){let s=t.chart.chartArea,{property:o,start:r,end:a}=n||{};if(o==="x"||o==="y"){let l,c,u,h;o==="x"?(l=r,c=s.top,u=a,h=s.bottom):(l=s.left,c=r,u=s.right,h=a),e.beginPath(),i&&(l=Math.max(l,i.left),u=Math.min(u,i.right),c=Math.max(c,i.top),h=Math.min(h,i.bottom)),e.rect(l,c,u-l,h-c),e.clip()}}function ty(e,t,i,n){let s=t.interpolate(i,n);s&&e.lineTo(s.x,s.y)}var Py={id:"filler",afterDatasetsUpdate(e,t,i){let n=(e.data.datasets||[]).length,s=[],o,r,a,l;for(r=0;r<n;++r)o=e.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof vn&&(l={visible:e.isDatasetVisible(r),index:r,fill:dC(a,r,n),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,s.push(l);for(r=0;r<n;++r)l=s[r],!(!l||l.fill===!1)&&(l.fill=hC(s,r,i.propagate))},beforeDraw(e,t,i){let n=i.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let r=s.length-1;r>=0;--r){let a=s[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&af(e.ctx,a,o))}},beforeDatasetsDraw(e,t,i){if(i.drawTime!=="beforeDatasetsDraw")return;let n=e.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){let o=n[s].$filler;Zb(o)&&af(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,t,i){let n=t.meta.$filler;!Zb(n)||i.drawTime!=="beforeDatasetDraw"||af(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},ey=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}},TC=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index,Hc=class extends Ni{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,n){this.maxWidth=t,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},i=nt(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(n=>t.filter(n,this.chart.data))),t.sort&&(i=i.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){let{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}let n=t.labels,s=vt(n.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ey(n,o),c,u;i.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,i,n,s){let{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a,h=t;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,g)=>{let b=n+i/2+o.measureText(m.text).width;(g===0||c[c.length-1]+b+2*a>r)&&(h+=u,c[c.length-(g>0?0:1)]=0,p+=u,f++),l[g]={left:0,top:p,row:f,width:b,height:s},c[c.length-1]+=b+a}),h}_fitCols(t,i,n,s){let{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-t,h=a,f=0,p=0,m=0,g=0;return this.legendItems.forEach((b,y)=>{let{itemWidth:v,itemHeight:M}=AC(n,i,o,b,s);y>0&&p+M+2*a>u&&(h+=f+a,c.push({width:f,height:p}),m+=f+a,g++,f=p=0),l[y]={left:m,top:p,col:g,width:v,height:M},f=Math.max(f,v),p+=M+a}),h+=f,c.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:o}}=this,r=Fi(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ot(n,this.left+s,this.right-this.lineWidths[a]);for(let c of i)a!==c.row&&(a=c.row,l=Ot(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+s}else{let a=0,l=Ot(n,this.top+t+s,this.bottom-this.columnSizes[a].height);for(let c of i)c.col!==a&&(a=c.col,l=Ot(n,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;ds(t,this),this._draw(),fs(t)}}_draw(){let{options:t,columnSizes:i,lineWidths:n,ctx:s}=this,{align:o,labels:r}=t,a=ht.color,l=Fi(t.rtl,this.left,this.width),c=vt(r.font),{padding:u}=r,h=c.size,f=h/2,p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;let{boxWidth:m,boxHeight:g,itemHeight:b}=ey(r,h),y=function(E,_,L){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;s.save();let T=U(L.lineWidth,1);if(s.fillStyle=U(L.fillStyle,a),s.lineCap=U(L.lineCap,"butt"),s.lineDashOffset=U(L.lineDashOffset,0),s.lineJoin=U(L.lineJoin,"miter"),s.lineWidth=T,s.strokeStyle=U(L.strokeStyle,a),s.setLineDash(U(L.lineDash,[])),r.usePointStyle){let k={radius:g*Math.SQRT2/2,pointStyle:L.pointStyle,rotation:L.rotation,borderWidth:T},R=l.xPlus(E,m/2),O=_+f;mc(s,k,R,O,r.pointStyleWidth&&m)}else{let k=_+Math.max((h-g)/2,0),R=l.leftForLtr(E,m),O=Ii(L.borderRadius);s.beginPath(),Object.values(O).some(H=>H!==0)?ps(s,{x:R,y:k,w:m,h:g,radius:O}):s.rect(R,k,m,g),s.fill(),T!==0&&s.stroke()}s.restore()},v=function(E,_,L){Oi(s,L.text,E,_+b/2,c,{strikethrough:L.hidden,textAlign:l.textAlign(L.textAlign)})},M=this.isHorizontal(),w=this._computeTitleHeight();M?p={x:Ot(o,this.left+u,this.right-n[0]),y:this.top+u+w,line:0}:p={x:this.left+u,y:Ot(o,this.top+w+u,this.bottom-i[0].height),line:0},_c(this.ctx,t.textDirection);let x=b+u;this.legendItems.forEach((E,_)=>{s.strokeStyle=E.fontColor,s.fillStyle=E.fontColor;let L=s.measureText(E.text).width,T=l.textAlign(E.textAlign||(E.textAlign=r.textAlign)),k=m+f+L,R=p.x,O=p.y;l.setWidth(this.width),M?_>0&&R+k+u>this.right&&(O=p.y+=x,p.line++,R=p.x=Ot(o,this.left+u,this.right-n[p.line])):_>0&&O+x>this.bottom&&(R=p.x=R+i[p.line].width+u,p.line++,O=p.y=Ot(o,this.top+w+u,this.bottom-i[p.line].height));let H=l.x(R);if(y(H,O,E),R=Nd(T,R+m+f,M?R+k:this.right,t.rtl),v(l.x(R),O,E),M)p.x+=k+u;else if(typeof E.text!="string"){let Y=c.lineHeight;p.y+=Ry(E,Y)+u}else p.y+=x}),wc(this.ctx,t.textDirection)}drawTitle(){let t=this.options,i=t.title,n=vt(i.font),s=St(i.padding);if(!i.display)return;let o=Fi(t.rtl,this.left,this.width),r=this.ctx,a=i.position,l=n.size/2,c=s.top+l,u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=Ot(t.align,h,this.right-f);else{let m=this.columnSizes.reduce((g,b)=>Math.max(g,b.height),0);u=c+Ot(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}let p=Ot(a,h,h+f);r.textAlign=o.textAlign(uc(a)),r.textBaseline="middle",r.strokeStyle=i.color,r.fillStyle=i.color,r.font=n.string,Oi(r,i.text,p,u,n)}_computeTitleHeight(){let t=this.options.title,i=vt(t.font),n=St(t.padding);return t.display?i.lineHeight+n.height:0}_getLegendItemAt(t,i){let n,s,o;if(Ri(t,this.left,this.right)&&Ri(i,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],Ri(t,s.left,s.left+s.width)&&Ri(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){let i=this.options;if(!RC(t.type,i))return;let n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let s=this._hoveredItem,o=TC(s,n);s&&!o&&nt(i.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!o&&nt(i.onHover,[t,n,this],this)}else n&&nt(i.onClick,[t,n,this],this)}};function AC(e,t,i,n,s){let o=kC(n,e,t,i),r=PC(s,n,t.lineHeight);return{itemWidth:o,itemHeight:r}}function kC(e,t,i,n){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),t+i.size/2+n.measureText(s).width}function PC(e,t,i){let n=e;return typeof t.text!="string"&&(n=Ry(t,i)),n}function Ry(e,t){let i=e.text?e.text.length:0;return t*i}function RC(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Dy={id:"legend",_element:Hc,start(e,t,i){let n=e.legend=new Hc({ctx:e.ctx,options:i,chart:e});Bi.configure(e,n,i),Bi.addBox(e,n)},stop(e){Bi.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){let n=e.legend;Bi.configure(e,n,i),n.options=i},afterUpdate(e){let t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){let n=t.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){let t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(i?0:void 0),u=St(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};var sr={average(e){if(!e.length)return!1;let t,i,n=new Set,s=0,o=0;for(t=0,i=e.length;t<i;++t){let a=e[t].element;if(a&&a.hasValue()){let l=a.tooltipPosition();n.add(l.x),s+=l.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:s/o}},nearest(e,t){if(!e.length)return!1;let i=t.x,n=t.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=e.length;o<r;++o){let l=e[o].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),u=zo(t,c);u<s&&(s=u,a=l)}}if(a){let l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function Fe(e,t){return t&&(ot(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ni(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function DC(e,t){let{element:i,datasetIndex:n,index:s}=t,o=e.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:e,label:r,parsed:o.getParsed(s),raw:e.data.datasets[n].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function iy(e,t){let i=e.chart.ctx,{body:n,footer:s,title:o}=e,{boxWidth:r,boxHeight:a}=t,l=vt(t.bodyFont),c=vt(t.titleFont),u=vt(t.footerFont),h=o.length,f=s.length,p=n.length,m=St(t.padding),g=m.height,b=0,y=n.reduce((w,x)=>w+x.before.length+x.lines.length+x.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){let w=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=p*w+(y-p)*l.lineHeight+(y-1)*t.bodySpacing}f&&(g+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let v=0,M=function(w){b=Math.max(b,i.measureText(w).width+v)};return i.save(),i.font=c.string,X(e.title,M),i.font=l.string,X(e.beforeBody.concat(e.afterBody),M),v=t.displayColors?r+2+t.boxPadding:0,X(n,w=>{X(w.before,M),X(w.lines,M),X(w.after,M)}),v=0,i.font=u.string,X(e.footer,M),i.restore(),b+=m.width,{width:b,height:g}}function OC(e,t){let{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}function IC(e,t,i,n){let{x:s,width:o}=n,r=i.caretSize+i.caretPadding;if(e==="left"&&s+o+r>t.width||e==="right"&&s-o-r<0)return!0}function FC(e,t,i,n){let{x:s,width:o}=i,{width:r,chartArea:{left:a,right:l}}=e,c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),IC(c,e,t,i)&&(c="center"),c}function ny(e,t,i){let n=i.yAlign||t.yAlign||OC(e,i);return{xAlign:i.xAlign||t.xAlign||FC(e,t,i,n),yAlign:n}}function BC(e,t){let{x:i,width:n}=e;return t==="right"?i-=n:t==="center"&&(i-=n/2),i}function NC(e,t,i){let{y:n,height:s}=e;return t==="top"?n+=i:t==="bottom"?n-=s+i:n-=s/2,n}function sy(e,t,i,n){let{caretSize:s,caretPadding:o,cornerRadius:r}=e,{xAlign:a,yAlign:l}=i,c=s+o,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=Ii(r),m=BC(t,a),g=NC(t,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,f)+s:a==="right"&&(m+=Math.max(h,p)+s),{x:te(m,0,n.width-t.width),y:te(g,0,n.height-t.height)}}function Ac(e,t,i){let n=St(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function oy(e){return Fe([],ni(e))}function WC(e,t,i){return Ie(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function ry(e,t){let i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}var Oy={beforeTitle:be,title(e){if(e.length>0){let t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:be,beforeBody:be,beforeLabel:be,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");let i=e.formattedValue;return J(i)||(t+=i),t},labelColor(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:be,afterBody:be,beforeFooter:be,footer:be,afterFooter:be};function qt(e,t,i,n){let s=e[t].call(i,n);return typeof s>"u"?Oy[t].call(i,n):s}var Uc=class extends Ni{static positioners=sr;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&i.options.animation&&n.animations,o=new Dc(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=WC(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:n}=i,s=qt(n,"beforeTitle",this,t),o=qt(n,"title",this,t),r=qt(n,"afterTitle",this,t),a=[];return a=Fe(a,ni(s)),a=Fe(a,ni(o)),a=Fe(a,ni(r)),a}getBeforeBody(t,i){return oy(qt(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:n}=i,s=[];return X(t,o=>{let r={before:[],lines:[],after:[]},a=ry(n,o);Fe(r.before,ni(qt(a,"beforeLabel",this,o))),Fe(r.lines,qt(a,"label",this,o)),Fe(r.after,ni(qt(a,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(t,i){return oy(qt(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:n}=i,s=qt(n,"beforeFooter",this,t),o=qt(n,"footer",this,t),r=qt(n,"afterFooter",this,t),a=[];return a=Fe(a,ni(s)),a=Fe(a,ni(o)),a=Fe(a,ni(r)),a}_createItems(t){let i=this._active,n=this.chart.data,s=[],o=[],r=[],a=[],l,c;for(l=0,c=i.length;l<c;++l)a.push(DC(this.chart,i[l]));return t.filter&&(a=a.filter((u,h,f)=>t.filter(u,h,f,n))),t.itemSort&&(a=a.sort((u,h)=>t.itemSort(u,h,n))),X(a,u=>{let h=ry(t.callbacks,u);s.push(qt(h,"labelColor",this,u)),o.push(qt(h,"labelPointStyle",this,u)),r.push(qt(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,i){let n=this.options.setContext(this.getContext()),s=this._active,o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let a=sr[n.position].call(this,s,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);let l=this._size=iy(this,n),c=Object.assign({},a,l),u=ny(this.chart,n,c),h=sy(n,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,n,s){let o=this.getCaretPosition(t,n,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,n){let{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Ii(a),{x:f,y:p}=t,{width:m,height:g}=i,b,y,v,M,w,x;return o==="center"?(w=p+g/2,s==="left"?(b=f,y=b-r,M=w+r,x=w-r):(b=f+m,y=b+r,M=w-r,x=w+r),v=b):(s==="left"?y=f+Math.max(l,u)+r:s==="right"?y=f+m-Math.max(c,h)-r:y=this.caretX,o==="top"?(M=p,w=M-r,b=y-r,v=y+r):(M=p+g,w=M+r,b=y+r,v=y-r),x=M),{x1:b,x2:y,x3:v,y1:M,y2:w,y3:x}}drawTitle(t,i,n){let s=this.title,o=s.length,r,a,l;if(o){let c=Fi(n.rtl,this.x,this.width);for(t.x=Ac(this,n.titleAlign,n),i.textAlign=c.textAlign(n.titleAlign),i.textBaseline="middle",r=vt(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=r.string,l=0;l<o;++l)i.fillText(s[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,i,n,s,o){let r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=o,u=vt(o.bodyFont),h=Ac(this,"left",o),f=s.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=i.y+p;if(o.usePointStyle){let g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=s.leftForLtr(f,c)+c/2,y=m+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Xo(t,g,b,y),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,Xo(t,g,b,y)}else{t.lineWidth=j(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;let g=s.leftForLtr(f,c),b=s.leftForLtr(s.xPlus(f,1),c-2),y=Ii(r.borderRadius);Object.values(y).some(v=>v!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ps(t,{x:g,y:m,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),ps(t,{x:b,y:m+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(g,m,c,l),t.strokeRect(g,m,c,l),t.fillStyle=r.backgroundColor,t.fillRect(b,m+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,i,n){let{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=n,h=vt(n.bodyFont),f=h.lineHeight,p=0,m=Fi(n.rtl,this.x,this.width),g=function(L){i.fillText(L,m.x(t.x+p),t.y+f/2),t.y+=f+o},b=m.textAlign(r),y,v,M,w,x,E,_;for(i.textAlign=r,i.textBaseline="middle",i.font=h.string,t.x=Ac(this,b,n),i.fillStyle=n.bodyColor,X(this.beforeBody,g),p=a&&b!=="right"?r==="center"?c/2+u:c+2+u:0,w=0,E=s.length;w<E;++w){for(y=s[w],v=this.labelTextColors[w],i.fillStyle=v,X(y.before,g),M=y.lines,a&&M.length&&(this._drawColorBox(i,t,w,m,n),f=Math.max(h.lineHeight,l)),x=0,_=M.length;x<_;++x)g(M[x]),f=h.lineHeight;X(y.after,g)}p=0,f=h.lineHeight,X(this.afterBody,g),t.y-=o}drawFooter(t,i,n){let s=this.footer,o=s.length,r,a;if(o){let l=Fi(n.rtl,this.x,this.width);for(t.x=Ac(this,n.footerAlign,n),t.y+=n.footerMarginTop,i.textAlign=l.textAlign(n.footerAlign),i.textBaseline="middle",r=vt(n.footerFont),i.fillStyle=n.footerColor,i.font=r.string,a=0;a<o;++a)i.fillText(s[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,i,n,s){let{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:u}=n,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:m}=Ii(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(a+h,l),r==="top"&&this.drawCaret(t,i,n,s),i.lineTo(a+c-f,l),i.quadraticCurveTo(a+c,l,a+c,l+f),r==="center"&&o==="right"&&this.drawCaret(t,i,n,s),i.lineTo(a+c,l+u-m),i.quadraticCurveTo(a+c,l+u,a+c-m,l+u),r==="bottom"&&this.drawCaret(t,i,n,s),i.lineTo(a+p,l+u),i.quadraticCurveTo(a,l+u,a,l+u-p),r==="center"&&o==="left"&&this.drawCaret(t,i,n,s),i.lineTo(a,l+h),i.quadraticCurveTo(a,l,a+h,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){let r=sr[t.position].call(this,this._active,this._eventPosition);if(!r)return;let a=this._size=iy(this,t),l=Object.assign({},r,this._size),c=ny(i,t,l),u=sy(t,l,c,i);(s._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),n=this.opacity;if(!n)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;let r=St(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,s,i),_c(t,i.textDirection),o.y+=r.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),wc(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let n=this._active,s=t.map(({datasetIndex:a,index:l})=>{let c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!cs(n,s),r=this._positionChanged(s,i);(o||r)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],r=this._getActiveElements(t,o,i,n),a=this._positionChanged(r,t),l=i||!cs(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,n,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);let r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,i){let{caretX:n,caretY:s,options:o}=this,r=sr[o.position].call(this,t,i);return r!==!1&&(n!==r.x||s!==r.y)}},Iy={id:"tooltip",_element:Uc,positioners:sr,afterInit(e,t,i){i&&(e.tooltip=new Uc({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){let t=e.tooltip;if(t&&t._willRender()){let i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){let i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Oy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function HC(e,t){let i=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=e,p=o||1,m=u-1,{min:g,max:b}=t,y=!J(r),v=!J(a),M=!J(c),w=(b-g)/(h+1),x=nc((b-g)/m/p)*p,E,_,L,T;if(x<1e-14&&!y&&!v)return[{value:g},{value:b}];T=Math.ceil(b/x)-Math.floor(g/x),T>m&&(x=nc(T*x/m/p)*p),J(l)||(E=Math.pow(10,l),x=Math.ceil(x*E)/E),s==="ticks"?(_=Math.floor(g/x)*x,L=Math.ceil(b/x)*x):(_=g,L=b),y&&v&&o&&kd((a-r)/o,x/1e3)?(T=Math.round(Math.min((a-r)/x,u)),x=(a-r)/T,_=r,L=a):M?(_=y?r:_,L=v?a:L,T=c-1,x=(L-_)/T):(T=(L-_)/x,pn(T,Math.round(T),x/1e3)?T=Math.round(T):T=Math.ceil(T));let k=Math.max(oc(x),oc(_));E=Math.pow(10,J(l)?k:l),_=Math.round(_*E)/E,L=Math.round(L*E)/E;let R=0;for(y&&(f&&_!==r?(i.push({value:r}),_<r&&R++,pn(Math.round((_+R*x)*E)/E,r,ay(r,w,e))&&R++):_<r&&R++);R<T;++R){let O=Math.round((_+R*x)*E)/E;if(v&&O>a)break;i.push({value:O})}return v&&f&&L!==a?i.length&&pn(i[i.length-1].value,a,ay(a,w,e))?i[i.length-1].value=a:i.push({value:a}):(!v||L===a)&&i.push({value:L}),i}function ay(e,t,{horizontal:i,minRotation:n}){let s=Oe(n),o=(i?Math.sin(s):Math.cos(s))||.001,r=.75*t*(""+e).length;return Math.min(t/o,r)}var ys=class extends bs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return J(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds(),{min:s,max:o}=this,r=l=>s=i?s:l,a=l=>o=n?o:l;if(t){let l=ki(s),c=ki(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(s-l)}this.min=s,this.max=o}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:i,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,i=t.ticks,n=this.getTickLimit();n=Math.max(2,n);let s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},o=this._range||this,r=HC(s,o);return t.bounds==="ticks"&&sc(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){let t=this.ticks,i=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){let s=(n-i)/Math.max(t.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(t){return Yo(t,this.chart.options.locale,this.options.ticks.format)}},zc=class extends ys{static id="linear";static defaults={ticks:{callback:qo.formatters.numeric}};determineDataLimits(){let{min:t,max:i}=this.getMinMax(!0);this.min=lt(t)?t:0,this.max=lt(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),i=t?this.width:this.height,n=Oe(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},rr=e=>Math.floor(De(e)),bn=(e,t)=>Math.pow(10,rr(e)+t);function ly(e){return e/Math.pow(10,rr(e))===1}function cy(e,t,i){let n=Math.pow(10,i),s=Math.floor(e/n);return Math.ceil(t/n)-s}function UC(e,t){let i=t-e,n=rr(i);for(;cy(e,t,n)>10;)n++;for(;cy(e,t,n)<10;)n--;return Math.min(n,rr(e))}function zC(e,{min:t,max:i}){t=Dt(e.min,t);let n=[],s=rr(t),o=UC(t,i),r=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),l=s>o?Math.pow(10,s):0,c=Math.round((t-l)*r)/r,u=Math.floor((t-l)/a/10)*a*10,h=Math.floor((c-u)/Math.pow(10,o)),f=Dt(e.min,Math.round((l+u+h*Math.pow(10,o))*r)/r);for(;f<i;)n.push({value:f,major:ly(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),f=Math.round((l+u+h*Math.pow(10,o))*r)/r;let p=Dt(e.max,f);return n.push({value:p,major:ly(p),significand:h}),n}var uy=class extends bs{static id="logarithmic";static defaults={ticks:{callback:qo.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,i){let n=ys.prototype.parse.apply(this,[t,i]);if(n===0){this._zero=!0;return}return lt(n)&&n>0?n:null}determineDataLimits(){let{min:t,max:i}=this.getMinMax(!0);this.min=lt(t)?Math.max(0,t):null,this.max=lt(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!lt(this._userMin)&&(this.min=t===bn(this.min,0)?bn(this.min,-1):bn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),n=this.min,s=this.max,o=a=>n=t?n:a,r=a=>s=i?s:a;n===s&&(n<=0?(o(1),r(10)):(o(bn(n,-1)),r(bn(s,1)))),n<=0&&o(bn(s,-1)),s<=0&&r(bn(n,1)),this.min=n,this.max=s}buildTicks(){let t=this.options,i={min:this._userMin,max:this._userMax},n=zC(i,this);return t.bounds==="ticks"&&sc(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":Yo(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=De(t),this._valueRange=De(this.max)-De(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(De(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let i=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+i*this._valueRange)}};function _f(e){let t=e.ticks;if(t.display&&e.display){let i=St(t.backdropPadding);return U(t.font&&t.font.size,ht.font.size)+i.height}return 0}function jC(e,t,i){return i=ot(i)?i:[i],{w:Ud(e,t.string,i),h:i.length*t.lineHeight}}function hy(e,t,i,n,s){return e===n||e===s?{start:t-i/2,end:t+i/2}:e<n||e>s?{start:t-i,end:t}:{start:t,end:t+i}}function VC(e){let t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),n=[],s=[],o=e._pointLabels.length,r=e.options.pointLabels,a=r.centerPointLabels?bt/o:0;for(let l=0;l<o;l++){let c=r.setContext(e.getPointLabelContext(l));s[l]=c.padding;let u=e.getPointPosition(l,e.drawingArea+s[l],a),h=vt(c.font),f=jC(e.ctx,h,e._pointLabels[l]);n[l]=f;let p=kt(e.getIndexAngle(l)+a),m=Math.round(Vo(p)),g=hy(m,u.x,f.w,0,180),b=hy(m,u.y,f.h,90,270);GC(i,t,p,g,b)}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=XC(e,n,s)}function GC(e,t,i,n,s){let o=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i)),a=0,l=0;n.start<t.l?(a=(t.l-n.start)/o,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/r,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/r,e.b=Math.max(e.b,t.b+l))}function YC(e,t,i){let n=e.drawingArea,{extra:s,additionalAngle:o,padding:r,size:a}=i,l=e.getPointPosition(t,n+s+r,o),c=Math.round(Vo(kt(l.angle+Pt))),u=ZC(l.y,a.h,c),h=$C(c),f=KC(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function qC(e,t){if(!t)return!0;let{left:i,top:n,right:s,bottom:o}=e;return!(ge({x:i,y:n},t)||ge({x:i,y:o},t)||ge({x:s,y:n},t)||ge({x:s,y:o},t))}function XC(e,t,i){let n=[],s=e._pointLabels.length,o=e.options,{centerPointLabels:r,display:a}=o.pointLabels,l={extra:_f(o)/2,additionalAngle:r?bt/s:0},c;for(let u=0;u<s;u++){l.padding=i[u],l.size=t[u];let h=YC(e,u,l);n.push(h),a==="auto"&&(h.visible=qC(h,c),h.visible&&(c=h))}return n}function $C(e){return e===0||e===180?"center":e<180?"left":"right"}function KC(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function ZC(e,t,i){return i===90||i===270?e-=t/2:(i>270||i<90)&&(e-=t),e}function JC(e,t,i){let{left:n,top:s,right:o,bottom:r}=i,{backdropColor:a}=t;if(!J(a)){let l=Ii(t.borderRadius),c=St(t.backdropPadding);e.fillStyle=a;let u=n-c.left,h=s-c.top,f=o-n+c.width,p=r-s+c.height;Object.values(l).some(m=>m!==0)?(e.beginPath(),ps(e,{x:u,y:h,w:f,h:p,radius:l}),e.fill()):e.fillRect(u,h,f,p)}}function QC(e,t){let{ctx:i,options:{pointLabels:n}}=e;for(let s=t-1;s>=0;s--){let o=e._pointLabelItems[s];if(!o.visible)continue;let r=n.setContext(e.getPointLabelContext(s));JC(i,r,o);let a=vt(r.font),{x:l,y:c,textAlign:u}=o;Oi(i,e._pointLabels[s],l,c+a.lineHeight/2,a,{color:r.color,textAlign:u,textBaseline:"middle"})}}function Fy(e,t,i,n){let{ctx:s}=e;if(i)s.arc(e.xCenter,e.yCenter,t,0,Rt);else{let o=e.getPointPosition(0,t);s.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=e.getPointPosition(r,t),s.lineTo(o.x,o.y)}}function tL(e,t,i,n,s){let o=e.ctx,r=t.circular,{color:a,lineWidth:l}=t;!r&&!n||!a||!l||i<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(s.dash||[]),o.lineDashOffset=s.dashOffset,o.beginPath(),Fy(e,i,r,n),o.closePath(),o.stroke(),o.restore())}function eL(e,t,i){return Ie(e,{label:i,index:t,type:"pointLabel"})}var dy=class extends ys{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:qo.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=St(_f(this.options)/2),i=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+i/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){let{min:t,max:i}=this.getMinMax(!1);this.min=lt(t)&&!isNaN(t)?t:0,this.max=lt(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/_f(this.options))}generateTickLabels(t){ys.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((i,n)=>{let s=nt(this.options.pointLabels.callback,[i,n],this);return s||s===0?s:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){let t=this.options;t.display&&t.pointLabels.display?VC(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,i,n,s){this.xCenter+=Math.floor((t-i)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,i,n,s))}getIndexAngle(t){let i=Rt/(this._pointLabels.length||1),n=this.options.startAngle||0;return kt(t*i+Oe(n))}getDistanceFromCenterForValue(t){if(J(t))return NaN;let i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*i:(t-this.min)*i}getValueForDistanceFromCenter(t){if(J(t))return NaN;let i=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(t){let i=this._pointLabels||[];if(t>=0&&t<i.length){let n=i[t];return eL(this.getContext(),t,n)}}getPointPosition(t,i,n=0){let s=this.getIndexAngle(t)-Pt+n;return{x:Math.cos(s)*i+this.xCenter,y:Math.sin(s)*i+this.yCenter,angle:s}}getPointPositionForValue(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:i,top:n,right:s,bottom:o}=this._pointLabelItems[t];return{left:i,top:n,right:s,bottom:o}}drawBackground(){let{backgroundColor:t,grid:{circular:i}}=this.options;if(t){let n=this.ctx;n.save(),n.beginPath(),Fy(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){let t=this.ctx,i=this.options,{angleLines:n,grid:s,border:o}=i,r=this._pointLabels.length,a,l,c;if(i.pointLabels.display&&QC(this,r),s.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);let f=this.getContext(h),p=s.setContext(f),m=o.setContext(f);tL(this,p,l,r,m)}}),n.display){for(t.save(),a=r-1;a>=0;a--){let u=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(t.lineWidth=f,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(i.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;let s=this.getIndexAngle(0),o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!i.reverse)return;let c=n.setContext(this.getContext(l)),u=vt(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,r=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let h=St(c.backdropPadding);t.fillRect(-r/2-h.left,-o-u.size/2-h.top,r+h.width,u.size+h.height)}Oi(t,a.label,0,-o,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},Gc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xt=Object.keys(Gc);function fy(e,t){return e-t}function py(e,t){if(J(t))return null;let i=e._adapter,{parser:n,round:s,isoWeekday:o}=e._parseOpts,r=t;return typeof n=="function"&&(r=n(r)),lt(r)||(r=typeof n=="string"?i.parse(r,n):i.parse(r)),r===null?null:(s&&(r=s==="week"&&(mn(o)||o===!0)?i.startOf(r,"isoWeek",o):i.startOf(r,s)),+r)}function my(e,t,i,n){let s=Xt.length;for(let o=Xt.indexOf(e);o<s-1;++o){let r=Gc[Xt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((i-t)/(a*r.size))<=n)return Xt[o]}return Xt[s-1]}function iL(e,t,i,n,s){for(let o=Xt.length-1;o>=Xt.indexOf(i);o--){let r=Xt[o];if(Gc[r].common&&e._adapter.diff(s,n,r)>=t-1)return r}return Xt[i?Xt.indexOf(i):0]}function nL(e){for(let t=Xt.indexOf(e)+1,i=Xt.length;t<i;++t)if(Gc[Xt[t]].common)return Xt[t]}function gy(e,t,i){if(!i)e[t]=!0;else if(i.length){let{lo:n,hi:s}=Go(i,t),o=i[n]>=t?i[n]:i[s];e[o]=!0}}function sL(e,t,i,n){let s=e._adapter,o=+s.startOf(t[0].value,n),r=t[t.length-1].value,a,l;for(a=o;a<=r;a=+s.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}function by(e,t,i){let n=[],s={},o=t.length,r,a;for(r=0;r<o;++r)a=t[r],s[a]=r,n.push({value:a,major:!1});return o===0||!i?n:sL(e,n,s,i)}var jc=class extends bs{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let n=t.time||(t.time={}),s=this._adapter=new ZE._date(t.adapters.date);s.init(i),fn(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:py(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,n=t.time.unit||"day",{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=lt(s)&&!isNaN(s)?s:+i.startOf(Date.now(),n),o=lt(o)&&!isNaN(o)?o:+i.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],n=t[t.length-1]),{min:i,max:n}}buildTicks(){let t=this.options,i=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,r=this.max,a=Od(s,o,r);return this._unit=i.unit||(n.autoSkip?my(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):iL(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:nL(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),by(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,n=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);let r=t.length<3?.5:.25;i=te(i,0,r),n=te(n,0,r),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){let t=this._adapter,i=this.min,n=this.max,s=this.options,o=s.time,r=o.unit||my(o.minUnit,i,n,this._getLabelCapacity(i)),a=U(s.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=mn(l)||l===!0,u={},h=i,f,p;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":r),t.diff(n,i,r)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+r);let m=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<n;f=+t.add(f,a,r),p++)gy(u,f,m);return(f===n||s.bounds==="ticks"||p===1)&&gy(u,f,m),Object.keys(u).sort(fy).map(g=>+g)}getLabelForValue(t){let i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(t,n.tooltipFormat):i.format(t,n.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,r=i||s[o];return this._adapter.format(t,r)}_tickFormatFunction(t,i,n,s){let o=this.options,r=o.ticks.callback;if(r)return nt(r,[t,i,n],this);let a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=n[i],p=c&&h&&f&&f.major;return this._adapter.format(t,s||(p?h:u))}generateTickLabels(t){let i,n,s;for(i=0,n=t.length;i<n;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){let i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,n=this.ctx.measureText(t).width,s=Oe(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(t){let i=this.options.time,n=i.displayFormats,s=n[i.unit]||n.millisecond,o=this._tickFormatFunction(t,0,by(this,[t],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,n;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,n=s.length;i<n;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,n;if(t.length)return t;let s=this.getLabels();for(i=0,n=s.length;i<n;++i)t.push(py(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Fd(t.sort(fy))}};function kc(e,t,i){let n=0,s=e.length-1,o,r,a,l;i?(t>=e[n].pos&&t<=e[s].pos&&({lo:n,hi:s}=ti(e,"pos",t)),{pos:o,time:a}=e[n],{pos:r,time:l}=e[s]):(t>=e[n].time&&t<=e[s].time&&({lo:n,hi:s}=ti(e,"time",t)),{time:o,pos:a}=e[n],{time:r,pos:l}=e[s]);let c=r-o;return c?a+(l-a)*(t-o)/c:a}var yy=class extends jc{static id="timeseries";static defaults=jc.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=kc(i,this.min),this._tableRange=kc(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:i,max:n}=this,s=[],o=[],r,a,l,c,u;for(r=0,a=t.length;r<a;++r)c=t[r],c>=i&&c<=n&&s.push(c);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(r=0,a=s.length;r<a;++r)u=s[r+1],l=s[r-1],c=s[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){let t=this.min,i=this.max,n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(i)||n.length===1)&&n.push(i),n.sort((s,o)=>s-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?t=this.normalize(i.concat(n)):t=i.length?i:n,t=this._cache.all=t,t}getDecimalForValue(t){return(kc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return kc(this._table,n*this._tableRange+this._minPos,!0)}};yn.register(Py,zc,Ic,Nc,vn,Iy,Dy);wf.modes.tooltipMode=function(e,t,i,n){e._interpolatedPoint=void 0;let s=t.native??t,o=ye(s,e),r=e.scales.x,a=r.getValueForPixel(o.x);if(!a)return[];let l=r.max-r.min,c=e.data.datasets[0],u=e.data.datasets[1],f=((typeof c.pointHoverRadius=="number"?c.pointHoverRadius:ri.DEFAULT_FEATURE_HOVER_RADIUS)??ri.DEFAULT_FEATURE_HOVER_RADIUS)/r.width*l,p=u.data,m=[],g=p.filter(k=>Math.abs(k.x-a)<=f);if(g.length>0){let k=g[0];if(g.length>1){let Y=g.find(G=>!!G.label);Y?k=Y:k=g.reduce((G,q)=>Math.abs(q.x-a)<Math.abs(G.x-a)?q:G)}let R=k.label?0:1,H=e.data.datasets[R].data.findIndex(Y=>Y.x===k.x&&Y.y===k.y);if(H!==-1)return[{element:e.getDatasetMeta(R).data[H],datasetIndex:R,index:H}]}let b=p.findIndex((k,R)=>R<p.length-1&&k.x<=a&&p[R+1].x>=a);if(b===-1||b===p.length-1)return[];let y=p[b],v=p[b+1],M=(a-y.x)/(v.x-y.x),w=y.y+M*(v.y-y.y),x={x:a,y:w,label:""},E=e.getDatasetMeta(1),_=e.scales.x.getPixelForValue(a),L=e.scales.y.getPixelForValue(w),T={x:_,y:L,hasValue:()=>!0,getProps:()=>({x:_,y:w}),tooltipPosition:()=>({x:_,y:L}),inXRange:()=>!0,inYRange:()=>!0,inRange:()=>!0,getCenterPoint:()=>({x:o.x,y:e.scales.y.getPixelForValue(w)}),skip:!1,options:{},draw:()=>{},raw:x,__interpolated:!0};return m.push({element:T,datasetIndex:1,index:b}),e._interpolatedPoint={x:a,y:w},m};var lr=class{constructor(t,i,n=!1){this.settings=t;this.chartContainer=i;this.debug=n;this.chartContainer.style.position="relative",this.chartContainer.innerHTML="",this.chartContainer.classList.add(...this.settings.containerClassList),this.settings.chartMaxHeight&&(this.chartContainer.style.maxHeight=this.settings.chartMaxHeight),this.settings.chartMinAspectRatio&&(this.chartContainer.style.aspectRatio=this.settings.chartMinAspectRatio.toString()),this._placeholder=document.createElement("div"),this._placeholder.classList=this.settings.placeholder.classList;let s=document.createElement("span");s.textContent=this.settings.placeholder.label,this._placeholder.append(s),this.chartContainer.appendChild(this._placeholder),this._chartCanvas=document.createElement("canvas"),this._chartCanvas.style.top="0",this._chartCanvas.style.position="absolute",this.chartContainer.appendChild(this._chartCanvas)}chart;_placeholder;_chartCanvas;destroy(){if(this._chartCanvas){let t=yn.getChart(this._chartCanvas);t&&t.destroy(),this._chartCanvas.remove()}this._placeholder?.remove(),this.chartContainer?.remove(),this.debug&&console.debug("ElevationChart: destroyed")}drawElevationProfile(t){if(!t.length){console.error("ElevationChart: empty dataset supplied");return}try{let i=t.filter(s=>!!s.label),n=Array.from(t.reduce((s,o)=>{let r=s.get(o.x);return(!r||!r.label&&o.label)&&s.set(o.x,o),s},new Map).values());this.chart=new yn(this._chartCanvas,{type:"line",data:{datasets:this._datasets(i,n)},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"linear",title:{display:!0,text:`${this.settings.labels.distance} (${this.settings.labels.distanceUnits})`,font:{family:this.settings.styles.title.fontFamily,weight:this.settings.styles.title.weight,size:this.settings.styles.title.size},padding:this.settings.styles.title.padding},bounds:"data",offset:!1,grace:0,min:0,max:i.at(-1).x,ticks:{maxTicksLimit:this.settings.axes.x.ticks?.maxTicks??ri.DEFAULT_MAX_X_TICKS,autoSkip:!1,align:"center",includeBounds:!1,font:{family:this.settings.styles.bodyFontFamily,weight:this.settings.styles.title.weight},padding:this.settings.axes.x.ticks?.padding??ri.DEFAULT_TICK_PADDING,major:{enabled:!0},callback:function(s,o,r){let a=r[o];return a.value<=this.min||a.value>=this.max?"":s}}},y:{title:{display:!0,text:`${this.settings.labels.elevation} (${this.settings.labels.elevationUnits})`,font:{family:this.settings.styles.title.fontFamily,weight:this.settings.styles.title.weight,size:this.settings.styles.title.size}},ticks:{maxTicksLimit:this.settings.axes.y.ticks?.maxTicks??ri.DEFAULT_MAX_Y_TICKS,font:{family:this.settings.styles.bodyFontFamily,weight:this.settings.styles.title.weight},padding:this.settings.axes.x.ticks?.padding??ri.DEFAULT_TICK_PADDING}}},interaction:{mode:"nearest",intersect:!1},hover:{mode:"nearest",intersect:!0},plugins:{legend:{display:!1},tooltip:{...this.settings.tooltip?.options,mode:"tooltipMode",intersect:!1,displayColors:!1,backgroundColor:s=>s.chart._interpolatedPoint?this.settings.tooltip.interpolated.backgroundColor:this.settings.tooltip.standard.backgroundColor,borderColor:s=>s.chart._interpolatedPoint?this.settings.tooltip.interpolated.borderColor:this.settings.tooltip.standard.borderColor,borderWidth:s=>s.chart._interpolatedPoint?this.settings.tooltip.interpolated.borderWidth:this.settings.tooltip.standard.borderWidth,callbacks:{label:s=>{if(!s.chart.tooltip)return"";let a=s.chart._interpolatedPoint;if(a&&s.dataset.label!=="Waypoints"){let h=a.x.toFixed(1),f=a.y.toFixed(0);return[`${this.settings.labels.distance}: ${h}${this.settings.labels.distanceUnits}`,`${this.settings.labels.elevation}: ${f}${this.settings.labels.elevationUnits}`]}let l=s.raw,c=Number(l.x).toFixed(1),u=Number(l.y).toFixed(0);return[`${this.settings.labels.distance}: ${c}${this.settings.labels.distanceUnits}`,`${this.settings.labels.elevation}: ${u}${this.settings.labels.elevationUnits}`]},labelTextColor:s=>s.chart._interpolatedPoint&&s.dataset.label!=="Waypoints"?this.settings.tooltip.interpolated.textColor:this.settings.tooltip.standard.textColor,title:s=>!s[0]?.chart.tooltip||s[0].chart._interpolatedPoint&&s[0].dataset.label!=="Waypoints"?"":s[0].raw.label||""}}},elements:{line:{tension:this.settings.line.tension*i.at(-1).x/100}}},plugins:[this._droplinesPlugin(i)]})}catch(i){console.error("ElevationChart.drawElevationProfile(): An error occurred",i),this._placeholder.innerHTML=this.settings.placeholder.errorMessage,this._placeholder.classList.add("error"),this._chartCanvas.remove();return}this.debug&&console.debug("Elevation chart",this.chart),setTimeout(()=>{this.chart.resize(),this._placeholder.remove()},ri.PLACEHOLDER_REMOVE_DELAY)}_droplinesPlugin=t=>({id:"droplines",beforeDatasetDraw:(i,n)=>{let{ctx:s,scales:o}=i,{index:r}=n,a=o.x,l=o.y;t.forEach(c=>{let u=a.getPixelForValue(c.x),h=l.getPixelForValue(c.y),f=i.data.datasets.findIndex(p=>p.label==="Waypoints");r===f&&(s.save(),s.strokeStyle=this.settings.styles.dropLineColour,s.lineWidth=this.settings.styles.dropLineWidth,s.beginPath(),s.moveTo(u,h),s.lineTo(u,l.getPixelForValue(l.min)),s.stroke(),s.restore())})}});_datasets=(t,i)=>[{label:"Waypoints",data:t,borderColor:"transparent",backgroundColor:this.settings.styles.featureColor,pointRadius:this.settings.styles.featureRadius,pointHoverRadius:this.settings.styles.featureHoverRadius,showLine:!1,clip:!1},{label:"Elevation Profile",data:i,borderColor:this.settings.styles.profileBorderColor,backgroundColor:this.settings.styles.profileBackgroundColor,borderWidth:this.settings.line.width,fill:"start",pointRadius:this.settings.styles.stepPointRadius,pointHoverRadius:this.settings.styles.stepPointHoverRadius}]};var Yc=class e{_tileCache=new Map;_cachePurgeInterval;static NO_DATA=0;static BYTE_SIZE=256;static TILE_SIZE=256;static SCALE_FACTOR=.1;static BASE_ELEVATION=-1e4;static DEFAULTS={CACHE_TTL_MS:1e3*60*60,COORDINATE_MAX_DP:5,MAX_CACHE_ENTRIES:80,ZOOM:14,CONCURRENCY:6,MAX_RETRIES:2,TILE_TIMEOUT_MS:5e3};settings;debug;constructor({settings:t,debug:i=!1}){this.settings={...e.DEFAULTS,...t},this.debug=i}getElevationsFromTerrainRGB=async t=>{let n=t.map(([l,c])=>[+l.toFixed(this.settings.COORDINATE_MAX_DP),+c.toFixed(this.settings.COORDINATE_MAX_DP)]).map(([l,c],u)=>this._pointsToTilesIndices(l,c,u)),s=Array.from(new Set(n.map(l=>l.key))),o=0,r=s.map(l=>async()=>{if(this._tileCache.has(l))return;o++;let c=await this._decodeRemoteTile(l);this._tileCache.set(l,{timestamp:Date.now(),data:c})});for(let l=0;l<r.length;l+=this.settings.CONCURRENCY)await Promise.all(r.slice(l,l+this.settings.CONCURRENCY).map(c=>c().catch(u=>console.error(u))));let a=new Array(t.length);for(let{key:l,idx:c,px:u,py:h}of n){let f=this._tileCache.get(l);f.timestamp=Date.now(),a[c]=f.data[h*e.TILE_SIZE+u]/100}if(a.includes(e.NO_DATA))for(let l=1;l<a.length-1;l++)a[l]===e.NO_DATA&&a[l-1]!==e.NO_DATA&&a[l+1]!==e.NO_DATA&&(a[l]=(a[l-1]+a[l+1])/2,this.debug&&console.debug(`ElevationRGB: Data for point index ${l} not found and was interpolated to ${a[l]}m.`));return queueMicrotask(()=>{this._purgeStaleCacheItems(),this._trimCache(),this._startPeriodicCachePurge()}),this.debug&&console.debug("ElevationRGB:",`Returned elevation data for ${a.length} coordinates.`,`${r.length} terrain tiles read (${o} fetched, ${r.length-o} cached).`,`Cache contains ${this._tileCache.size} tiles after operation (${this._getCacheSize().toFixed(2)}MB).`),a};_trimCache=()=>{let t=this.settings.MAX_CACHE_ENTRIES;if(this._tileCache.size<=t)return;let i=Array.from(this._tileCache.entries());i.sort((s,o)=>s[1].timestamp-o[1].timestamp);let n=i.length-t;for(let s=0;s<n;s++)this._tileCache.delete(i[s][0]);this.debug&&console.debug(`ElevationRGB._trimCache: reduced cache by ${n} entries.`,`Cache size ${this._getCacheSize().toFixed(2)}MB.`)};_purgeStaleCacheItems=()=>{let t=Date.now(),i=0;for(let[n,s]of this._tileCache)t-s.timestamp>this.settings.CACHE_TTL_MS&&(this._tileCache.delete(n),i++);this.debug&&console.debug(`ElevationRGB: cache purged of ${i} stale entries.`,`Cache size ${this._getCacheSize().toFixed(2)}MB.`)};_startPeriodicCachePurge=()=>{if(this._cachePurgeInterval!==void 0)return;let t=Math.max(1e3,this.settings.CACHE_TTL_MS/4);this._cachePurgeInterval=setInterval(()=>{this._purgeStaleCacheItems(),this._tileCache.size===0&&(this._stopPeriodicCachePurge(),this.debug&&console.debug("ElevationRGB: cache purged of all entries."))},t)};_stopPeriodicCachePurge=()=>{this._cachePurgeInterval!==void 0&&(clearInterval(this._cachePurgeInterval),this._cachePurgeInterval=void 0)};_rgbToElevation=(t,i,n)=>this._isValidRGB(t,i,n)?e.BASE_ELEVATION+(t*e.BYTE_SIZE*e.BYTE_SIZE+i*e.BYTE_SIZE+n)*e.SCALE_FACTOR:e.NO_DATA;_isValidRGB=(...t)=>t.every(i=>Number.isInteger(i)&&i>=0&&i<e.BYTE_SIZE);_withTimeout=(t,i,n="")=>new Promise((s,o)=>{let r=setTimeout(()=>o(new Error(`Timeout ${i}ms: ${n}`)),i);t.then(a=>{clearTimeout(r),s(a)}).catch(a=>{clearTimeout(r),o(a)})});_retryFetchBitmap=async(t,i=0)=>{try{let n=await this._withTimeout(fetch(t),this.settings.TILE_TIMEOUT_MS,t);if(!n.ok)throw new Error(`HTTP ${n.status}`);let s=await n.blob();return await createImageBitmap(s)}catch(n){if(i<this.settings.MAX_RETRIES)return await new Promise(s=>setTimeout(s,200*2**i)),this._retryFetchBitmap(t,i+1);throw n}};_terrainTileUrl=(t,i,n)=>{let s=this.settings.ACCESS_TOKEN??Ft();return`${D.API_URL}mapbox.terrain-rgb/${n}/${t}/${i}.pngraw?access_token=${s}`};_decodeRemoteTile=async t=>{let[i,n,s]=t.split("/").map(u=>parseInt(u,10)),o=await this._retryFetchBitmap(this._terrainTileUrl(n,s,i)),a=new OffscreenCanvas(e.TILE_SIZE,e.TILE_SIZE).getContext("2d");a.drawImage(o,0,0);let l=a.getImageData(0,0,e.TILE_SIZE,e.TILE_SIZE).data,c=new Int32Array(e.TILE_SIZE**2);for(let u=0;u<c.length;u++){let h=l[u*4],f=l[u*4+1],p=l[u*4+2],m=this._rgbToElevation(h,f,p);c[u]=Math.round(m*100)}return c};_pointsToTilesIndices(t,i,n){let s=this.settings.ZOOM,o=(t+180)/360*2**s,r=(1-Math.log(Math.tan(i*Math.PI/180)+1/Math.cos(i*Math.PI/180))/Math.PI)/2*2**s,a=Math.floor(o),l=Math.floor(r),c=Math.floor((o-a)*e.TILE_SIZE),u=Math.floor((r-l)*e.TILE_SIZE);return{key:`${s}/${a}/${l}`,idx:n,px:c,py:u}}_getCacheSize=()=>{let t=0;for(let i of this._tileCache.values())t+=i.data.byteLength;return t/(1024*1024)}};var qc=class{constructor(t,i=document.body,n=!1){this.settings=t;this.parentElement=i;this.debug=n}fmtCoord(t){return`lat="${t.lat.toFixed(5)}" lon="${t.lng.toFixed(5)}"`}_createModal(t){return new Promise(i=>{let n=this.settings.modal,s=document.createElement("dialog");s.classList.add(...n.classLists.dialog),s.setAttribute("closedby","any");let o=document.createElement("div");o.id="mapbox-assist--gpx-dialog-title",n.icons?.titleBar&&o.append(et(n.icons.titleBar,[Q.STANDARD_ICON_CLASS])),o.append(n.title);let r=document.createElement("button");r.classList.add(...n.classLists.button??[]),r.type="button",r.setAttribute("aria-label",n.labels.cancelButton),r.append(et(n.icons.cancel,[Q.STANDARD_ICON_CLASS])),o.append(r),s.setAttribute("aria-labelledby",o.id),s.setAttribute("aria-modal","true"),s.setAttribute("role","dialog");let a=document.createElement("form");a.method="dialog";let l=h=>{let f=document.createElement("div");f.classList.add(...n.classLists.controlGroup);let p=document.createElement("label");p.classList.add(...n.classLists.label??[]),p.textContent=n.labels[h]??h;let m=document.createElement("input");return m.classList.add(...n.classLists.input??[]),m.placeholder=n.placholders?.[h]||"",m.type="text",h==="name"?(m.required=h==="name",m.autofocus=!0,m.autocomplete="off",m.value=t??""):h==="author"&&(m.autocomplete="name"),m.name=h,f.append(p,m),f},c=document.createElement("div");c.classList.add(...n.classLists.buttonRow);let u=document.createElement("button");u.classList.add(...n.classLists.button??[]),u.type="submit",u.textContent=n.labels.downloadButton,n.icons?.download&&u.prepend(et(n.icons.download,[Q.COMPACT_ICON_CLASS])),c.append(u),a.append(l("name"),l("author"),c),s.append(o,a),this.parentElement.append(s),r.addEventListener("click",()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur(),s.close()}),a.addEventListener("submit",h=>{h.preventDefault();let f=new FormData(a),p=f.get("name").trim();if(!p)return;let m=f.get("author").trim();s.close(),s.remove(),i({name:p,author:m||void 0})}),s.addEventListener("close",()=>{s.remove(),i(null)},{once:!0}),s.showModal()})}_localDateTime=()=>new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(new Date).replace(",","").replace(/[\s:-]/g,"_");_safeFilename=t=>{let i=n=>n.toLowerCase().replace(/[^a-z0-9-]+/g,"_").replace(/^_+|_+$/g,"").slice(0,25);return t=i(t),t||(t=i(`Track_${this._localDateTime()}`)),`${t}.gpx`};_escapeXml=t=>t.replace(/[<>&'"]/g,i=>{switch(i){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return i}});async download(t,i){try{let n=await this._createModal(i);if(!n)return;let{name:s,author:o}=n,r=new TextEncoder,a=`${location.origin}${location.pathname}`,l=new URLSearchParams(location.search).get("r"),c=`${a}${l?`?r=${l}`:""}`,u=t.routeProfile,h=u.filter(b=>!!b.name),f=new ReadableStream({start:b=>{let y=M=>b.enqueue(r.encode(M));y(`<?xml version="1.0" encoding="UTF-8"?><gpx version="1.1" creator="${a}" `),y('xmlns="http://www.topografix.com/GPX/1/1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '),this.settings.extensions&&y(`xmlns:gpx="${this.settings.extensions.namespace}" `),y('xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd'),this.settings.extensions&&y(` ${this.settings.extensions.namespace} ${this.settings.extensions.schemaURL}`),y('">'),y(`<metadata><name>${this._escapeXml(s)}</name>`),y("<extensions>"),y(`<gpx:length>${(t.total.distance/1e3).toFixed(3)}</gpx:length>`),y(`<gpx:ele_gain>${t.total.elevation.gain.toFixed(0)}</gpx:ele_gain>`),y(`<gpx:ele_loss>${t.total.elevation.loss.toFixed(0)}</gpx:ele_loss>`),y("</extensions>"),this.settings.description&&y(`<desc>${this._escapeXml(this.settings.description)}</desc>`),o&&y(`<author><name>${this._escapeXml(o)}</name></author>`),y(`<url>${c}</url>`),y(`<time>${new Date().toISOString()}</time></metadata>`),h.forEach((M,w)=>{y(`<wpt ${this.fmtCoord(M)}>`),y(`<name>${this._escapeXml(M.name||`Waypoint #${w}`)}</name>`),M.elevation!==void 0&&y(`<ele>${M.elevation.toFixed(1)}</ele>`),y("<extensions>"),y(`<gpx:dist_from_start>${M.distance.toFixed(3)}</gpx:dist_from_start>`),w!==h.length-1&&y("<gpx:segment_start>true</gpx:segment_start>"),y("</extensions>"),y("</wpt>")}),y(`<trk><name>${this._escapeXml(s)}</name>`);let v=0;u.forEach(M=>{if(M.name&&v<h.length-1){v!==0&&y("</trkseg>"),y("<trkseg><extensions>");let w=t.legs[v]?.label||`Track Leg #${v+1}`;y(`<gpx:name>${this._escapeXml(w)}</gpx:name>`),y(`<gpx:length>${(t.legs[v]?.distance.length/1e3).toFixed(3)}</gpx:length>`),y(`<gpx:ele_gain>${t.legs[v]?.elevation.gain.toFixed(0)}</gpx:ele_gain>`),y(`<gpx:ele_loss>${t.legs[v]?.elevation.loss.toFixed(0)}</gpx:ele_loss>`),y("</extensions>"),v++}y(`<trkpt ${this.fmtCoord(M)}>`),M.elevation!==void 0&&y(`<ele>${M.elevation.toFixed(1)}</ele>`),y("</trkpt>")}),y("</trkseg></trk></gpx>"),b.close()}}),p=new Response(f).blob(),m=URL.createObjectURL(await p),g=document.createElement("a");g.href=m,g.download=this._safeFilename(s),g.style.display="none",document.body.append(g),g.click(),g.remove(),URL.revokeObjectURL(m)}catch(n){throw console.error("Failed to generate GPX file:",n),new Error("GPX file generation failed")}}};var cr=class{constructor(t,i=!1){this.route=t;this.debug=i;this.settings=this.route.settings.summary,this.detailedSummary=new Ef(this,this.debug)}detailedSummary;detailedSummaryData;settings;_simpleContainer;_showElevationProfile;_elevationChart;_elevationRGB;destroy(){this.clear(),this.detailedSummary.destroy(),this._elevationRGB=void 0,this.debug&&console.debug("RouteSummary: destroyed")}clear(){this._elevationChart?.destroy(),this.detailedSummaryData=void 0,this.detailedSummary.state="empty",this._simpleContainer?.remove(),this._simpleContainer=void 0,this.debug&&console.debug("RouteSummary: cleared")}renderRouteInformation=()=>{queueMicrotask(()=>{switch(this.clear(),this._showElevationProfile=this.route.showElevationProfile,this.route.parameters.showSummary){case"simple":this._renderSimplePlaceHolder();break;case"detailed":this._showElevationProfile&&queueMicrotask(()=>{this._elevationChart=new lr(this.settings.elevationProfile,this.detailedSummary.chartContainer,this.debug)}),this._renderDetailedPlaceHolder(),this.detailedSummary.state="loading"}})};_renderSimplePlaceHolder=()=>{this._simpleContainer=document.createElement("div"),this._simpleContainer.classList.add(...this.settings.simple.classList);let t=document.createElement("span");if(t.setAttribute("for","route-distance"),t.textContent=" - ",this._simpleContainer.append(this.settings.simple.label,": ",t,this.settings.simple.distanceUnits),this.route.mapWrapper.append(this._simpleContainer),this.route.routeData)this._renderSimpleData(this.route.routeData);else{let i=n=>{this._renderSimpleData(n.detail),this.route.removeEventListener("directionsReturned",i)};this.route.addEventListener("directionsReturned",i)}};_renderSimpleData=t=>{let i=n=>{n=n/1e3;let s=0;return n<1?s=3:n<10&&(s=1),n.toFixed(s)};this._simpleContainer.replaceChildren(this.settings.simple.label,": ",i(t.distance),this.settings.simple.distanceUnits),this.settings.simple.showDuration&&t.duration&&this._simpleContainer.append(this._formatDuration(t.duration))};_renderDetailedPlaceHolder=()=>{this.detailedSummary.routeTable.setPlaceHolder(this.route.parameters.waypoints,!!this._showElevationProfile,this.route.parameters.routeType),this.route.waypoints.length?this._renderDetailedData():this.route.addEventListener("waypointsReady",()=>this._renderDetailedData(),{once:!0})};_renderDetailedData=()=>{this._getDetailedSummaryData().then(t=>{this.debug&&console.debug("Route Summary: Detailed Summary Data",t),this._showElevationProfile&&queueMicrotask(()=>{let i=t.routeProfile.map(n=>({x:n.distance,y:n.elevation,label:n.name}));this._elevationChart.drawElevationProfile(i)}),this.detailedSummary.routeTable.updateData(t),this.detailedSummaryData=t,this.detailedSummary.state="loaded"})};_getDetailedSummaryData=async()=>{let t={routeProfile:[],legs:[],total:{distance:0,elevation:{gain:0,loss:0}},routeType:this.route.parameters.routeType,showElevation:!!this._showElevationProfile},i=[],n=[];for(let a of this.route.routeData.legs){let l=i.length;for(let u=0;u<a.steps.length;u++){let h=a.steps[u].geometry.coordinates,f=u<a.steps.length-1?h.slice(0,-1):h;i.push(...f)}let c=i.length;n.push({startIdx:l,endIdx:c})}let s=[];this._showElevationProfile&&(this._elevationRGB||(this._elevationRGB=new Yc({settings:this.settings.elevationProfile.RGBSettings??{},debug:this.debug})),s=await this._elevationRGB.getElevationsFromTerrainRGB(i));let o=0;for(let a=0;a<n.length;a++){let{startIdx:l,endIdx:c}=n[a],u=this.route.routeData.legs[a],h=this.route.waypoints[a],f=this.route.waypoints[a+1],p={label:`${h.name} - ${f.name}`,distance:{start:o,end:0,length:0},elevation:{gain:0,loss:0,start:s[l]||0,end:0}};for(let v=l;v<c-1;v++){let[M,w]=i[v],[x,E]=i[v+1],_=new By.LngLat(M,w),L=new By.LngLat(x,E),T=_.distanceTo(L),k=this._showElevationProfile?s[v]:0,O=(this._showElevationProfile?s[v+1]:0)-k;O>0?p.elevation.gain+=O:p.elevation.loss-=O,t.routeProfile.push({lng:M,lat:w,name:v===l?h.name:void 0,distance:o/1e3,elevation:k}),o+=T}let m=c-1,[g,b]=i[m],y=this._showElevationProfile?s[m]:0;t.routeProfile.push({lng:g,lat:b,name:void 0,distance:o/1e3,elevation:y}),p.distance.end=o,p.distance.length=o-p.distance.start,p.elevation.end=y,t.legs.push(p),t.total.distance+=p.distance.length,t.total.elevation.gain+=p.elevation.gain,t.total.elevation.loss+=p.elevation.loss}let r=this.route.waypoints.at(-1).name;return t.routeProfile.at(-1).name=r,t};_formatDuration=(t,i="")=>{i||(i=navigator.language||"en-GB");let n=Math.floor(t/3600),s=Math.floor(t%3600/60),o=new Intl.NumberFormat(i,{style:"unit",unit:"hour",unitDisplay:"long"}),r=new Intl.NumberFormat(i,{style:"unit",unit:"minute",unitDisplay:"long"}),a=[];n&&a.push(o.format(n)),s&&a.push(r.format(s));let l=document.createElement("span");return l.className="route-duration",l.textContent=` (${a.join(", ")})`,l}},Sf=class{constructor(t,i){this.settings=t;this.container=i;({table:this._table,body:this._body,dataColumns:this._dataColumns,unroutableWarning:this._unroutableWarning}=this._buildTable())}_table;_body;_dataColumns;_unroutableWarning;_dataRows=[];clear=(t=!1)=>{this._body.innerHTML="",this._unroutableWarning.remove(),this._dataRows=[],Object.keys(this._dataColumns).forEach(i=>{this._dataColumns[i].footer.textContent="-"}),t&&this._table.remove()};_buildTable=()=>{let t=document.createElement("table");t.classList.add(...this.settings.classList);let i=document.createElement("thead");i.classList.add(...this.settings.tableHeaderClassList??[]);let n=document.createElement("tr"),s=document.createElement("th");this.settings.columns.leg.svgId&&s.append(et(this.settings.columns.leg.svgId,[Q.STANDARD_ICON_CLASS])),s.append(this.settings.columns.leg.heading),s.classList.add(...this.settings.columns.leg.headingClassList??[]),n.appendChild(s),i.append(n);let o=document.createElement("tfoot");o.classList.add(...this.settings.footerClassList??[]);let r=document.createElement("tr");r.appendChild(document.createElement("th")),o.append(r);let a={};for(let u of["distance","ascent","descent"]){let h=document.createElement("th");this.settings.columns[u].svgId&&h.append(et(this.settings.columns[u].svgId,[Q.STANDARD_ICON_CLASS])),h.classList.add(...this.settings.columns[u].headingClassList??[]),h.title=this.settings.columns[u].heading,n.appendChild(h);let f=document.createElement("td");f.classList.add(...this.settings.footerCellClassList??[]),f.textContent="-",r.appendChild(f),a[u]={head:h,footer:f}}let l=document.createElement("tbody");t.append(i,l,o);let c=document.createElement("div");return c.classList.add(...this.settings.unroutableWarning.captionClassList??[]),c.append(et(this.settings.unroutableWarning.svgId,[Q.UNROUTABLE_ICON_ID]),this.settings.unroutableWarning.text),{table:t,body:l,dataColumns:a,unroutableWarning:c}};_showElevation=t=>{let i=[this._dataColumns.ascent.head,this._dataColumns.ascent.footer,this._dataColumns.descent.head,this._dataColumns.descent.footer];t?i.forEach(n=>n.style.removeProperty("display")):i.forEach(n=>n.style.display="none")};_emptyPlaceHolder=(t,i)=>{this.clear(),this._showElevation(i);let n=[];for(let s=0;s<t;s++){let o={},r=document.createElement("tr");n.push(r),o.leg=document.createElement("th"),o.leg.classList.add(...this.settings.rowHeaderClassList??[]),r.appendChild(o.leg);let a=["distance"];i&&a.push("ascent","descent"),a.forEach(l=>{let c=document.createElement("td");c.classList.add(...this.settings.dataCellClassList??[]),c.textContent="-",o[l]=c,r.append(c)}),this._dataRows.push(o)}this._body.append(...n)};setPlaceHolder=(t,i,n)=>{this._emptyPlaceHolder(t.length-1,i),this._showElevation(i);let s=[],o=!1;this._dataRows.forEach((r,a)=>{let l=t[a].name||`${this.settings.defaultWaypointName} #${a+1}`,c=t[a+1].name||`${this.settings.defaultWaypointName} #${a+2}`;r.leg.textContent=`${l} - ${c}`,r.isRoutable=t[a].isRoutable&&t[a+1].isRoutable&&!!n,r.isRoutable||(o=!0)}),this._table.isConnected||this.container.append(this._table),(o||!n)&&this.container.append(this._unroutableWarning)};updateData=t=>{this._dataRows.length!==t.legs.length&&this._emptyPlaceHolder(this._dataRows.length,t.showElevation),this._dataRows.forEach((i,n)=>{let s=t.legs[n];i.leg.textContent=s.label,!i.isRoutable&&t.routeType&&i.leg.append(et(this.settings.unroutableWarning.svgId,[Q.UNROUTABLE_ICON_ID])),i.distance.textContent=`${(s.distance.length/1e3).toFixed(1)}km`,t.showElevation&&(i.ascent.textContent=`${s.elevation.gain.toFixed(0)}m`,i.descent.textContent=`${s.elevation.loss.toFixed(0)}m`)}),this._dataColumns.distance.footer.textContent=`${(t.total.distance/1e3).toFixed(1)}km`,t.showElevation&&(this._dataColumns.ascent.footer.textContent=`${t.total.elevation.gain.toFixed(0)}m`,this._dataColumns.descent.footer.textContent=`${t.total.elevation.loss.toFixed(0)}m`)}},Ef=class{constructor(t,i){this.routeSummmary=t;this.debug=i;this._mapWrapper=this.routeSummmary.route.mapWrapper,this._mapContainer=this.routeSummmary.route.mapContainer,this._buildSummaryContainer(),this._mapContainer.addEventListener("fullscreenchange",this._handleFullScreenEvent),this.routeTable=new Sf(this.routeSummmary.settings.detailed.table,this.tableContainer),this.state="empty"}_state="initial";_fullscreen;_expanded;_mapWrapper;_mapContainer;_tableContainer;_chartContainer;_gpxDownloadLink;_gpxStreamBuilder;container=document.createElement("div");headerElement=document.createElement("div");summaryBody=document.createElement("div");routeTable;fullscreenWrapper=document.createElement("div");destroy(){this._mapContainer.removeEventListener("fullscreenchange",this._handleFullScreenEvent),this.container.innerHTML="",this.container.remove(),this.fullscreenWrapper.remove()}get tableContainer(){return this._tableContainer||(this._tableContainer=document.createElement("div"),this._tableContainer.classList.add(...this.routeSummmary.settings.detailed.table.containerClassList),this.summaryBody.append(this._tableContainer)),this._tableContainer}get chartContainer(){return this._chartContainer||(this._chartContainer=document.createElement("div"),this._chartContainer.classList.add(...this.routeSummmary.settings.elevationProfile.containerClassList),this.summaryBody.prepend(this._chartContainer)),this._chartContainer}get state(){return this._state}set state(t){if(t!==this._state)switch(this.debug&&console.debug("RouteSummary: state changed to ",t),this._state=t,this.container.dataset.state=t,this.container.setAttribute("aria-hidden",String(t==="empty")),t){case"empty":this.routeTable.clear(!0);case"initial":this.expanded=!1,this._chartContainer=void 0,this._gpxDownloadLink?.setAttribute("disabled","true");break;case"loaded":this._gpxDownloadLink?.removeAttribute("disabled");case"loading":this.expanded=!0}}get fullscreen(){return this._fullscreen}set fullscreen(t){t!==this._fullscreen&&(this.debug&&console.debug("RouteSummary: fullscreen changed to ",t),this._fullscreen=t,this.fullscreenWrapper.setAttribute("aria-hidden",String(!t)),this.container.dataset.fullscreen=String(t),t?(this.fullscreenWrapper.append(this.container),this.headerElement.addEventListener("click",this._headerClickHandler),this.expanded=!1):(this._mapWrapper.append(this.container),this.headerElement.removeEventListener("click",this._headerClickHandler),this.expanded=!0))}_headerClickHandler=()=>{this.expanded=!this.expanded};get isFullscreen(){return document.fullscreenElement===this._mapContainer}_handleFullScreenEvent=()=>{this.debug&&console.debug("Route Summary: Fullscreen change detected"),this.fullscreen=this.isFullscreen};_handleGpxDownload=t=>{if(this.state==="loaded"&&this.routeSummmary.detailedSummaryData){t.stopImmediatePropagation(),this.debug&&console.debug("Route Summary: Downloading GPX");try{let i=this.routeSummmary.route.waypoints[0].name+" - "+this.routeSummmary.route.waypoints.at(-1).name;this._gpxStreamBuilder?.download(this.routeSummmary.detailedSummaryData,i)}catch(i){console.error("Route Summary: Error downloading GPX",i),this._gpxDownloadLink?.setAttribute("disabled","true")}}};get expanded(){return this._expanded}set expanded(t){t!==this._expanded&&(this.debug&&console.debug("RouteSummary: expanded changed to ",t),this._expanded=t,this.container.dataset.expanded=String(t),this.fullscreenWrapper.setAttribute("aria-expanded",String(t)),this.container.setAttribute("aria-expanded",String(t)),this.headerElement.setAttribute("aria-expanded",String(t)))}_buildSummaryContainer(){let t=this.routeSummmary.settings.detailed;this.container.classList.add(...t.containerClassList),this.headerElement.classList.add(...t.headerElement.classList);let i=document.createElement("div"),n=document.createElement("span");n.textContent=t.headerElement.text,i.append(n),t.gpx?.show&&(this._gpxDownloadLink=document.createElement("a"),this._gpxDownloadLink.classList.add(...t.gpx.downloadLink.classList),t.gpx.downloadLink.svgId&&this._gpxDownloadLink.append(et(t.gpx.downloadLink.svgId,[Q.COMPACT_ICON_CLASS])),this._gpxDownloadLink.append(t.gpx.downloadLink.label),i.append(this._gpxDownloadLink),this._gpxStreamBuilder=new qc(t.gpx,this._mapContainer,this.debug),this._gpxDownloadLink.addEventListener("click",this._handleGpxDownload)),this.headerElement.append(i,et(t.headerElement.iconSvgId,[Q.STANDARD_ICON_CLASS,"expanded-state"])),this.summaryBody.classList.add(...t.bodyClassList),this.container.append(this.headerElement,this.summaryBody),this.fullscreenWrapper.classList.add(...t.fullScreen.containerClassList),this._mapContainer.append(this.fullscreenWrapper),this.expanded=!1,this.fullscreen=this.isFullscreen,this.fullscreen?this.fullscreenWrapper.append(this.container):this._mapWrapper.append(this.container)}};var $c=Sn(Ny(),1);import"mapbox-gl";var xn=class{static DEFAULTS={routeType:void 0,showSummary:"detailed",showElevationProfile:!0,showPin:!0,isRoutable:!0};static setURL=(t,i=!1)=>{try{let n=this._encodeRouteParameters(t,i),s=new URL(window.location.href);s.searchParams.set("r",n),window.history.replaceState({},"",s.toString())}catch(n){console.error("Failed to set URL parameters:",n)}};static getURL=(t=!1)=>{let n=new URL(window.location.href).searchParams.get("r");if(!n)return null;try{return this._decodeRouteParameters(n,t)}catch(s){return console.error("Failed to decode route parameters:",s),null}};static clearURL=()=>{let t=new URL(window.location.href);t.searchParams.delete("r"),window.history.replaceState({},"",t.toString())};static _encodeRouteParameters=(t,i=!1)=>{if(!t.waypoints)return"";let s={w:t.waypoints.map(o=>{let r=[Math.round(o.longitude*1e6),Math.round(o.latitude*1e6),o.name??""];return o.showPin!==this.DEFAULTS.showPin&&r.push(o.showPin),o.isRoutable===!1&&(r.length===3&&r.push(this.DEFAULTS.showPin),r[4]=!1),r})};return t.routeType!==this.DEFAULTS.routeType&&(s.t=t.routeType),t.showSummary&&t.showSummary!==this.DEFAULTS.showSummary&&(s.s=t.showSummary),t.showElevationProfile!==void 0&&t.showElevationProfile!==this.DEFAULTS.showElevationProfile&&(s.e=t.showElevationProfile),i&&console.debug("RouteUrl: Encoded payload:",s,t),(0,$c.compressToEncodedURIComponent)(JSON.stringify(s))};static _decodeRouteParameters=(t,i=!1)=>{let n=(0,$c.decompressFromEncodedURIComponent)(t);if(!n)throw new Error("Failed to decompress route parameters");let s=JSON.parse(n);if(!s||!Array.isArray(s.w))throw new Error("Invalid payload structure");let r={waypoints:s.w.map(a=>{let[l,c,u,h,f]=a;return{longitude:l/1e6,latitude:c/1e6,name:u?this._sanitizeLabel(u):void 0,showPin:h!==void 0?h:this.DEFAULTS.showPin,isRoutable:f!==!1}}),routeType:s.t??this.DEFAULTS.routeType,showSummary:s.s??this.DEFAULTS.showSummary,showElevationProfile:s.e!==void 0?s.e:this.DEFAULTS.showElevationProfile};return i&&console.debug("RouteUrl: Decoded parameters:",r),r};static _sanitizeLabel=t=>new DOMParser().parseFromString(t,"text/html").body.textContent||""},_n=class{static DEFAULTS={bearing:0,pitch:5,zoom:12};static _toBase64Url(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}static _fromBase64Url(t){let i=t.replace(/-/g,"+").replace(/_/g,"/"),n=i+"=".repeat((4-i.length%4)%4);return atob(n)}static setURL(t,i=!1){try{let n=new URL(window.location.href),s=Math.round(t.getBearing()),o=Math.round(t.getPitch()),r="";if(s!==this.DEFAULTS.bearing&&(r+=`b${s}`),o!==this.DEFAULTS.pitch&&(r+=`p${o}`),!n.searchParams.get("r")){let a=+t.getZoom().toFixed(1);a!==this.DEFAULTS.zoom&&(r+=`z${a}`);let[l,c]=t.getCenter().toArray().map(u=>+u.toFixed(4));r+=`c${l}:${c}`}if(r){let a=this._toBase64Url(r);n.searchParams.set("c",a)}else n.searchParams.delete("c");i&&console.debug("CameraUrl: Encoded:",r),window.history.replaceState({},"",n.toString())}catch(n){console.error("Failed to set URL parameters:",n)}}static getURL(t=!1){try{let n=new URL(window.location.href).searchParams.get("c");if(!n)return null;let s=this._fromBase64Url(n),o={},r=s.match(/b(-?\d+)/),a=s.match(/p(-?\d+)/),l=s.match(/z([0-9.]+)/),c=s.match(/c(-?\d+(?:\.\d+)?):(-?\d+(?:\.\d+)?)/);return r&&(o.bearing=parseInt(r[1])),a&&(o.pitch=parseInt(a[1])),l&&(o.zoom=parseFloat(l[1])),c&&(o.center=[parseFloat(c[1]),parseFloat(c[2])]),t&&console.debug("CameraUrl: Decoded:",s,o),o}catch(i){return console.error("Failed to decode camera parameters:",i),null}}},vs=class{static setURL(t,i=!1){try{let n=new URL(window.location.href);t===0?(n.searchParams.delete("s"),i&&console.debug('StyleUrl: index 0, removing searchParam "s"')):(n.searchParams.set("s",t.toString()),i&&console.debug(`StyleUrl: setting searchParam "s=${t}"`)),window.history.replaceState({},"",n.toString())}catch(n){console.error("StyleUrl.setURL:",n)}}static getURL(t=!1){try{let n=new URL(window.location.href).searchParams.get("s");return n?(t&&console.debug(`StyleUrl: retrieved style index "${n}" from URL`),parseInt(n)??null):null}catch(i){return console.error("StyleUrl.getURL:",i),null}}};import Cf from"mapbox-gl";var Kc=class extends EventTarget{constructor(i,n,s,o=!1){super();this.map=i;this._mapOptions=n;this.settings=s;this.debug=o;this._mapContainer=this.map.getContainer(),this._featureLayers=this.settings.layers??[],this._offcanvas=new Vi(this._mapContainer,this.settings.offCanvas),this.map.on("styledata",this._handleStyleData),this._mapOnce=()=>{this.map.on("click",this._mapClickHandler),this.map.on("dblclick",this._mapDblClickHandler),this.map.on("mousedown",this._mapMouseDownHandler),this.map.off("styledata",this._mapOnce),this._mapOnce=void 0},this.isStyleLoaded?(this._handleStyleData(),this._mapOnce()):this.map.once("styledata",this._mapOnce)}activeFeatureLayers=[];_featureLayers=[];_mapContainer;_hadVisibleMarkerOrPopup=!1;_hoveredFeatureId=null;_offcanvas;_mapOnce;_interactionHandlers=new Map;_clickTimeout=null;destroy(){this._clearClickTimeout(),this._offcanvas.destroy(),this.map.off("styledata",this._handleStyleData),this.map.off("click",this._mapClickHandler),this.map.off("dblclick",this._mapDblClickHandler),this.map.off("mousedown",this._mapMouseDownHandler),this._mapOnce&&this.map.off("styledata",this._mapOnce),this._interactionHandlers.forEach((i,n)=>{this.map.off("mouseenter",n,i.mouseenter),this.map.off("mouseleave",n,i.mouseleave)}),this._interactionHandlers.clear()}_handleStyleData=()=>{let i=new Set(this.map.getStyle().layers.map(n=>n.id));this.activeFeatureLayers=this._featureLayers.filter(n=>i.has(n.id)),this.activeFeatureLayers.forEach(n=>this._addMouseInteraction(n))};_mapMouseDownHandler=()=>{let i=this._mapContainer.querySelectorAll("div.mapboxgl-popup, div.mapboxgl-marker.search-marker"),n=this._mapContainer.getBoundingClientRect();this._hadVisibleMarkerOrPopup=!1,i.forEach(s=>{let o=s.getBoundingClientRect(),r=o.bottom>n.top&&o.right>n.left&&o.top<n.bottom&&o.left<n.right;this._hadVisibleMarkerOrPopup=this._hadVisibleMarkerOrPopup||r})};_mapDblClickHandler=i=>{this._clearClickTimeout()};_mapClickHandler=i=>{this._clickTimeout||(this._clickTimeout=setTimeout(()=>{this._clickTimeout=null,this._showFeature(i)},Q.DOUBLE_CLICK_DELAY))};_clearClickTimeout(){this._clickTimeout&&(clearTimeout(this._clickTimeout),this._clickTimeout=null)}_showFeature=async i=>{try{let n=this.map.queryRenderedFeatures(i.point);if(n.at(0)?.layer?.id!=="route-waypoints-layer"){let l=this._getMatchedFeature(n);if(l&&l.properties){Object.keys(l.properties).forEach(h=>{if(typeof l.properties[h]=="string")try{let f=JSON.parse(l.properties[h]);Array.isArray(f)&&(l.properties[h]=f)}catch{}});let u=this.activeFeatureLayers.find(h=>h.id===l.layer.id)?.handler;if(u){let h=await u(l,this.map);h&&this._offcanvas.show(h),this._mapContainer.querySelectorAll("div.mapboxgl-popup").forEach(f=>{f.remove()});return}}}if(i.originalEvent.target.closest("div.mapboxgl-marker.search-marker")||this._mapContainer.querySelectorAll("div.mapboxgl-marker.search-marker").forEach(l=>{l.remove()}),this._hadVisibleMarkerOrPopup||this._mapContainer.querySelector("div.searchbox--focused"))return;let s=this._getUnmatchedFeature(i.point,n),o=s?.lngLat||i.lngLat,r=n.at(0)?.layer?.id==="route-waypoints-layer"?{offset:D.POPUP_OFFSET}:{},a=new CustomEvent("unmatchedFeature",{detail:{lngLat:o,label:s?.name,popupOptions:r}});this.dispatchEvent(a)}catch(n){console.error("FeatureLayerManager._showFeature() encountered an error",n)}};_getMatchedFeature=i=>{let n=this.activeFeatureLayers.map(s=>s.id);for(let s of n){let o=i.find(r=>r.layer?.id===s);if(o)return o}return null};_getUnmatchedFeature=(i,n)=>{try{let s=n.find(o=>o?.properties?.name);if(s){let o=null,r=navigator.language.slice(0,2).toLowerCase(),a=s.properties[`name_${r}`]||s.properties.name_en||s.properties.name;if(["point","symbol"].includes(s.layer.type)&&s?.layer?.id){let l;if(l=this.map.queryRenderedFeatures(i,{layers:[s.layer.id]}).find(u=>u.properties?.id===s.properties?.id||u.properties?.name===s.properties?.name),l?.geometry?.type==="Point"){let u=l.geometry.coordinates;Array.isArray(u)&&u.length===2&&(o=new Cf.LngLat(u[0],u[1]))}}return{name:a,lngLat:o}}}catch(s){console.error("FeatureLayer:__getUnmatchedFeature() encountered an error",s)}return null};findFeatureNameAtCoord=async i=>{let n,s=new Cf.LngLat(i[0],i[1]);return this.activeFeatureLayers?.length>0&&({name:n,lngLat:s}=this.getRenderedFeatureName(s,{layers:this.activeFeatureLayers.map(o=>o.id)}),n||({name:n,lngLat:s}=await this.getActiveFeatureNameByAPI(s))),n||({name:n,lngLat:s}=this.getRenderedFeatureName(s)),{name:n,lngLat:s}};getRenderedFeatureName=(i,n)=>{let s=this.map.project(i),o,r=this.map.queryRenderedFeatures(s).find(a=>a?.properties?.name);if(r){if(o=r.properties.name,["point","symbol"].includes(r.layer.type)&&r?.layer?.id){let a;if(a=this.map.queryRenderedFeatures(s,{layers:[r.layer.id]}).find(c=>c.properties?.id===r.properties?.id||c.properties?.name===r.properties?.name),a?.geometry?.type==="Point"){let c=a.geometry.coordinates;i=new Cf.LngLat(c[0],c[1])}}this.debug&&o&&console.debug("Feature.getRenderedFeatureName: found name",o)}return{name:o,lngLat:i}};getActiveFeatureNameByAPI=async i=>{if(!this.activeFeatureLayers)return{name:void 0,lngLat:i};let n=this.activeFeatureLayers.filter(l=>l.tileId).map(async l=>{let c=`${D.API_URL}${l.tileId}/tilequery/${i.lng},${i.lat}.json`,u={radius:this.settings.apiProximity,access_token:this._mapOptions.accessToken||Ft()};try{return(await ci.get(c,{params:u})).data.features??[]}catch(h){return console.error("Error querying feature:",h),[]}}),r=(await Promise.all(n)).flat().find(l=>!!l.properties?.name);return this.debug&&r?.properties?.name&&console.debug("Feature.getActiveFeatureNameByAPI: found name",r?.properties?.name),{name:r?.properties?.name,lngLat:i}};_addMouseInteraction=i=>{let n=this.map.getLayer(i.id);if(!n)return;let s=r=>{if(!r.features||r.features.length===0)return;let a=r.features[0].id;a!==void 0&&(this._hoveredFeatureId=a,this.map.setFeatureState({source:n.source,sourceLayer:n["source-layer"],id:a},{hover:!0})),this.map.getCanvas().style.cursor="pointer"},o=()=>{this._hoveredFeatureId!==null&&(this.map.setFeatureState({source:n.source,sourceLayer:n["source-layer"],id:this._hoveredFeatureId},{hover:!1}),this._hoveredFeatureId=null),this.map.getCanvas().style.cursor=""};this.map.on("mouseenter",i.id,s),this.map.on("mouseleave",i.id,o),this._interactionHandlers.set(i.id,{mouseenter:s,mouseleave:o})};get isStyleLoaded(){try{return this.map?.getStyle(),!0}catch{return!1}}};var ur=class extends EventTarget{constructor(i,n={waypoints:[]},s,o=!1){super();this.mapboxAssist=i;this.parameters=n;this.fitBounds=s;this.debug=o;if({map:this.map,mapContainer:this.mapContainer,mapWrapper:this.mapWrapper,mapOptions:this.mapOptions,featureLayerManager:this.featureLayerManager}=this.mapboxAssist,this.settings=this.mapboxAssist.settings.route,this.debug&&console.debug("Route: initialized with parameters:",this.parameters),this.settings.enableUrlSharing&&!n.waypoints?.length){let r=xn.getURL(this.debug);r&&(this.parameters=r,this.debug&&console.debug("Route: URL parameters loaded:",r))}this.routeSummary=new cr(this,this.debug),ai(this.map)?this.onInitialStyleLoad():this.map.once("style.load",this.onInitialStyleLoad)}routeData;routeSummary;routeForm;waypoints=[];map;mapContainer;mapWrapper;mapOptions;featureLayerManager;settings;showElevationProfile;routeLayers=[];_fitToScreen=!1;hoveredFeatureId=null;mouseenterHandler;mouseleaveHandler;onInitialStyleLoad=()=>{this.getWaypointLayerSpecification(),(this.parameters.waypoints??[]).length>1&&this.addToMap(),this.settings.form.show&&(this.routeForm=new Io(this,this.debug)),this.map.on("style.load",this.onStyleLoad)};onStyleLoad=()=>{this.addMapLayers(),this.getWaypointLayerSpecification()};destroy(){this.clear(),this.map.off("style.load",this.onStyleLoad),this.removeWaypointInteraction(),this.routeSummary?.destroy(),this.routeSummary=void 0,this.routeForm?.destroy(),this.debug&&console.debug("Route: destroyed")}clear(){this.removeMapLayers(),this.routeData=void 0,this.waypoints=[],this.routeSummary?.clear(),this.updateWaypointLayerSource([]),this._fitToScreen=!1,this.settings.enableUrlSharing&&(xn.clearURL(),_n.setURL(this.map,this.debug)),this.debug&&console.debug("Route: cleared")}_emitStyleLock=i=>{let n=new CustomEvent("routeStyleLock",{detail:i});this.dispatchEvent(n)};addToMap(){if(!this.parameters.waypoints||(this.parameters.waypoints??[]).length<2){console.warn("Route: At least two waypoints are required to create a route.");return}(this.parameters.waypoints??[]).length>D.MAX_DIRECTIONS_WAYPOINTS&&this.parameters.routeType&&(Ue.show(this.mapContainer,this.settings.waypointCountWarning.message,this.settings.waypointCountWarning.duration),console.warn(`Route: More than ${D.MAX_DIRECTIONS_WAYPOINTS} waypoints is not supported by Mapbox Directions API. Showing route for first ${D.MAX_DIRECTIONS_WAYPOINTS} waypoints only.`),this.parameters.waypoints=this.parameters.waypoints.slice(0,D.MAX_DIRECTIONS_WAYPOINTS)),!(this.mapOptions.accessToken||Ft())&&this.parameters.routeType&&(console.warn("Access token is required to use Mapbox route facilities, defaulting to point-to-point route instead."),this.parameters.routeType=void 0),this.clear(),this.showElevationProfile=(this.parameters.showElevationProfile??this.settings.summary.elevationProfile.show)&&this.parameters.showSummary==="detailed"&&this.mapboxAssist.settings.terrain.enable,queueMicrotask(async()=>{this.parameters.waypoints=await this.updateWaypointLabels(this.parameters.waypoints);let i=new CustomEvent("waypointsUpdated",{});this.dispatchEvent(i),this.settings.form.show&&this.settings.enableUrlSharing&&xn.setURL(this.parameters,this.debug)}),queueMicrotask(async()=>{if(this.parameters.routeType)if(this.parameters.waypoints.some((n,s,o)=>s>0&&n.isRoutable!==!1&&o[s-1].isRoutable!==!1)){this.addRouteToMap();return}else this.debug&&console.debug("Route.addToMap(): No routable pairs found, switching to straight line mode.");this.parameters.routeType=void 0,this.addStraightLineRouteToMap()}),this.parameters.showSummary&&queueMicrotask(()=>{this.routeSummary.renderRouteInformation()})}addMapLayers(){this.debug&&console.debug("Route: Adding map layers",this.routeLayers),this.routeLayers.forEach(i=>{this.map.getSource(i.source.id)||this.map.addSource(i.source.id,{type:"geojson",data:i.source.geoJsonData}),this.map.getLayer(i.layer.id)||this.map.addLayer(i.layer)}),this.map.getLayer(D.WAYPOINTS_LAYER_ID)&&this.map.moveLayer(D.WAYPOINTS_LAYER_ID)}removeMapLayers(){this.routeLayers.forEach(i=>{this.map.getLayer(i.layer.id)&&(this.map.removeLayer(i.layer.id),this.debug&&console.debug("Removed layer:",i.layer.id)),this.map.getSource(i.source.id)&&(this.map.removeSource(i.source.id),this.debug&&console.debug("Removed source:",i.source.id))}),this.routeLayers=[]}addRouteToMap(){this._emitStyleLock(!0),this.fetchDirections().then(async i=>{try{this.routeData=i.routes[0],this.applyStraightLineFallback();let n=new CustomEvent("directionsReturned",{detail:i.routes[0]});this.dispatchEvent(n),this.debug&&console.debug("Directions API route data:",this.routeData),this.waypoints=await this.updateWaypointLabels(this.parameters.waypoints),this.waypoints=this.parameters.waypoints;let s=new CustomEvent("waypointsReady",{});this.dispatchEvent(s);let o=this.routeData.legs.flatMap(a=>a.steps.flatMap(l=>l.geometry.coordinates)).filter((a,l,c)=>l===0||Math.abs(a[0]-c[l-1][0])>1e-6||Math.abs(a[1]-c[l-1][1])>1e-6),r=()=>{this.drawRoute(o),this._emitStyleLock(!1)};ai(this.map)?r():this.map.once("style.load",r)}catch(n){throw this._emitStyleLock(!1),new Error(`Failed to return route data: ${n}`)}}).catch(i=>{console.error(i)})}async fetchDirections(){let i={geometries:"geojson",steps:!0,access_token:this.mapOptions.accessToken||Ft()};this.parameters.routeType==="walking"&&(i.walkway_bias=1,i.walking_speed=this.settings.directionsAPI.walking_speed);let n=this.parameters.waypoints.map(o=>[o.longitude,o.latitude].join()).join(";"),s=D.DIRECTIONS_API_URL;s.endsWith("/")||(s+="/"),s+=this.parameters.routeType,s+=`/${n}/`;try{let{data:o}=await ci.get(s,{params:i});if(!o.routes?.[0]?.legs?.[0]?.steps)throw new Error("No step data received from directions API");return o}catch(o){throw console.error("Error fetching directions:",o),o}}applyStraightLineFallback=()=>{if(!this.routeData)return;let i=!1,n=this.routeData.legs,s=this.parameters.waypoints;try{n.forEach((o,r)=>{let a=s[r],l=s[r+1];if(a.isRoutable===!1||l.isRoutable===!1){i=!0;let c=new Zc.LngLat(a.longitude,a.latitude),u=new Zc.LngLat(l.longitude,l.latitude),h=c.distanceTo(u);n[r]={steps:[{maneuver:{location:[c.lng,c.lat],instruction:""},geometry:{coordinates:[[c.lng,c.lat],[u.lng,u.lat]]},duration:0,distance:h,name:a.name??""}],duration:h/this.settings.directionsAPI.walking_speed,distance:h}}if(i){let c=this.routeData.legs.flatMap(u=>u.steps);this.routeData.geometry.coordinates=c.flatMap(u=>u.geometry.coordinates)}})}catch(o){throw console.error("Error applying straight line fallback:",o),new Error("Failed to apply straight line fallback")}};drawRoute(i){queueMicrotask(()=>{this.routeLayers=[this.getEndpointLayerSpecification(i[0],i.at(-1)),this.getRouteLayerSpecification(i)],this.updateWaypointLayerSource(),this.debug&&console.debug("Route Layer Specifications:",this.routeLayers),this.addMapLayers(),this.fitBounds.points=this.routeData.geometry.coordinates;let n=new CustomEvent("fitBoundsEnd",{}),s=()=>{this._fitToScreen=!0,this.dispatchEvent(n),this.debug&&console.debug("Route fitBounds complete"),this.fitBounds.removeEventListener("fitScreenBoundsEnd",s)};this.fitBounds.addEventListener("fitScreenBoundsEnd",s),this.fitBounds.fitScreenBounds()})}addStraightLineRouteToMap(){queueMicrotask(async()=>{if(!ai(this.map)){this.map.once("style.load",()=>{this.addStraightLineRouteToMap()});return}this.waypoints=await this.updateWaypointLabels(this.parameters.waypoints),this.routeData=this.getStraightLineRouteData();let i=new CustomEvent("waypointsReady",{});this.dispatchEvent(i);let n=new CustomEvent("directionsReturned",{detail:this.routeData});this.dispatchEvent(n),this.debug&&console.debug("Route Data",this.routeData);let s=this.waypoints.map(({longitude:a,latitude:l})=>[a,l]);this.routeLayers=[this.getEndpointLayerSpecification(s[0],s.at(-1)),this.getRouteLayerSpecification(s)],this.updateWaypointLayerSource(),this.addMapLayers(),this.fitBounds.points=s;let o=new CustomEvent("fitBoundsEnd",{}),r=()=>{this._fitToScreen=!0,this.dispatchEvent(o),this.debug&&console.debug("Route fitBounds complete"),this.fitBounds.removeEventListener("fitScreenBoundsEnd",r)};this.fitBounds.addEventListener("fitScreenBoundsEnd",r),this.fitBounds.fitScreenBounds()})}getStraightLineRouteData(){let i=[],n=this.waypoints,s=0,o=new Zc.LngLat(n[0].longitude,n[0].latitude);return n.forEach((r,a)=>{if(a<n.length-1){let l=new Zc.LngLat(n[a+1].longitude,n[a+1].latitude),c=o.distanceTo(l);i.push({steps:[{maneuver:{location:[0,0],instruction:""},geometry:{coordinates:[o.toArray(),l.toArray()]},duration:0,distance:c,name:r.name}],duration:0,distance:c}),o=l,s+=c}}),{geometry:{coordinates:[],type:"LineString"},legs:i,distance:s,duration:0,weight_name:"",weight:0}}async updateWaypointLabels(i){try{let n=i.map((r,a)=>!r.name||r.name.trim()===""?{wp:r,index:a}:null).filter(Boolean);if(n.length===0)return i;let s=n.map(async({wp:r})=>{let a=await this.featureLayerManager.findFeatureNameAtCoord([r.longitude,r.latitude]);a.name&&(r.name=a.name)}),o=await Promise.all(s);n.forEach(({wp:r})=>{r.name=r.name||`${this.settings.pins.defaultLabel} #${i.indexOf(r)+1}`})}catch(n){throw console.error("Error updating waypoint labels:",n),new Error("Failed to update waypoint labels")}return i}getRouteLayerSpecification(i){let n={type:"FeatureCollection",features:[{type:"Feature",properties:{type:"line"},geometry:{type:"LineString",coordinates:i}}]},s=this.map.getSource(D.ROUTE_SOURCE_ID);return s?s.setData(n):this.map.addSource(D.ROUTE_SOURCE_ID,{type:"geojson",data:n}),{source:{id:D.ROUTE_SOURCE_ID,geoJsonData:n},layer:{id:D.ROUTE_LAYER_ID,type:"line",metadata:{route:!0},source:D.ROUTE_SOURCE_ID,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":this.settings.line.color,"line-width":this.settings.line.width,"line-opacity":this.settings.line.opacity}}}}getEndpointLayerSpecification(i,n){let s={type:"FeatureCollection",features:[{type:"Feature",properties:{type:"start"},geometry:{type:"Point",coordinates:i}},{type:"Feature",properties:{type:"end"},geometry:{type:"Point",coordinates:n}}]},o=this.map.getSource(D.ROUTE_ENDPOINTS_SOURCE_ID);return o?o.setData(s):this.map.addSource(D.ROUTE_ENDPOINTS_SOURCE_ID,{type:"geojson",data:s}),{source:{id:D.ROUTE_ENDPOINTS_SOURCE_ID,geoJsonData:s},layer:{id:D.ROUTE_ENDPOINTS_LAYER_ID,type:"circle",metadata:{route:!0},source:D.ROUTE_ENDPOINTS_SOURCE_ID,paint:{"circle-radius":this.settings.endPoints.radius,"circle-color":["match",["get","type"],"start",this.settings.endPoints.startColor,"end",this.settings.endPoints.endColor,"transparent"],"circle-pitch-alignment":"map","circle-pitch-scale":"viewport"}}}}updateWaypointLayerSource(i=this.waypoints){let n={type:"FeatureCollection",features:i.filter(s=>s.showPin).map((s,o)=>({type:"Feature",id:o,properties:{name:s.name,isRoutable:s.isRoutable!==!1},geometry:{type:"Point",coordinates:[s.longitude,s.latitude]}}))};return this.map.getSource(D.WAYPOINTS_SOURCE_ID)?this.map.getSource(D.WAYPOINTS_SOURCE_ID).setData(n):this.map.addSource(D.WAYPOINTS_SOURCE_ID,{type:"geojson",data:n}),n}getWaypointLayerSpecification(){let i=this.updateWaypointLayerSource();if(!this.map.getLayer(D.WAYPOINTS_LAYER_ID)){let n={source:{id:D.WAYPOINTS_SOURCE_ID,geoJsonData:i},layer:{id:D.WAYPOINTS_LAYER_ID,type:"symbol",source:D.WAYPOINTS_SOURCE_ID,layout:{"icon-image":this.settings.pins.icon.id,"icon-size":this.settings.pins.size,"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-rotation-alignment":"viewport","icon-anchor":"bottom"},paint:{"icon-opacity":["case",["boolean",["feature-state","hover"],!1],1,.7],"icon-color":["case",["==",["get","isRoutable"],!1],this.settings.pins.color.notRoutable,this.settings.pins.color.default]}}};this.map.addLayer(n.layer),this.loadWaypointMarker(),this.addWaypointInteraction()}}loadWaypointMarker(){let i=this.settings.pins.icon;this.map.hasImage(i.id)||this.map.loadImage(i.src,(n,s)=>{if(n){console.error("Waypoint Marker already loaded");return}this.map.hasImage(i.id)||this.map.addImage(i.id,s,{sdf:!0})})}addWaypointInteraction(){this.mouseenterHandler=i=>{if(!i.features||i.features.length===0)return;let n=i.features[0].id;n!==void 0&&(this.hoveredFeatureId=n,this.map.setFeatureState({source:D.WAYPOINTS_SOURCE_ID,id:n},{hover:!0})),this.map.getCanvas().style.cursor="pointer"},this.mouseleaveHandler=()=>{this.hoveredFeatureId!==null&&(this.map.setFeatureState({source:D.WAYPOINTS_SOURCE_ID,id:this.hoveredFeatureId},{hover:!1}),this.hoveredFeatureId=null),this.map.getCanvas().style.cursor=""},this.map.on("mouseenter",D.WAYPOINTS_LAYER_ID,this.mouseenterHandler),this.map.on("mouseleave",D.WAYPOINTS_LAYER_ID,this.mouseleaveHandler)}removeWaypointInteraction(){this.mouseenterHandler&&(this.map.off("mouseenter",this.mouseenterHandler),this.mouseenterHandler=void 0),this.mouseleaveHandler&&(this.map.off("mouseleave",D.WAYPOINTS_LAYER_ID,this.mouseleaveHandler),this.mouseleaveHandler=void 0)}};import Lf from"mapbox-gl";var hr=class extends EventTarget{constructor(i,n=!1){super();this.settings=i;this.debug=n}_map;_mapContainer;_container;_searchBox;_searchBoxInputContainer;_searchBoxInput;_clearButton;_results;_state="initial";stateClasses={initial:["searchbox--initial"],focused:["searchbox--focused"],loading:["searchbox--loading"],results:["searchbox--focused","searchbox--results"],error:["searchbox--error"]};_blurTimeout=null;_debounceTimeout=null;onAdd(i){let n,s;this._map=i,this._mapContainer=i.getContainer(),this._searchBox=this._createSearchBoxObject(),this._container=document.createElement("div"),this._container.classList="mapboxgl-ctrl searchbox-container",this.state="loading",this._container.append(this._searchBox);let o=()=>{n?.disconnect(),clearTimeout(s)};return n=new MutationObserver(()=>{let r=this._container.querySelector('div[class$="--SearchBox"]'),a=this._container.querySelector("input"),l=this._container.querySelector('div[class$="--Results"]'),c=this._container.querySelector('button[class$="--ClearBtn"]');r&&a&&l&&c&&(o(),this._searchBoxInputContainer=r,this._searchBoxInput=a,this._results=l,this._clearButton=c,this._searchBoxInputContainer.addEventListener("click",this._containerClickHandler,!0),this._clearButton.addEventListener("blur",this._blurHandler,!0),this._clearButton.addEventListener("click",this._clearClickHandler,!0),this._searchBoxInput.addEventListener("blur",this._blurHandler,!0),this._searchBoxInput.addEventListener("keydown",this._keydownHandler,!0),this._searchBoxInput.addEventListener("input",this._inputHandler,!0),this._searchBoxInput.addEventListener("input",this._debounce(this._handleGPSInput),!0),this._searchBox.addEventListener("retrieve",this._retrieveHandler,!0),this.state="initial")}),s=setTimeout(()=>{o(),console.warn("SearchBox internal elements did not load in time.")},5e3),n.observe(this._container,{childList:!0,subtree:!0}),this.settings.useProximityBias&&(this._setProximity(),i.on("moveend",this._setProximity)),this._container}onRemove(){this.settings.useProximityBias&&this._map?.off("moveend",this._setProximity),this._searchBoxInputContainer.removeEventListener("click",this._containerClickHandler,!0),this._clearButton.removeEventListener("blur",this._blurHandler,!0),this._clearButton.removeEventListener("click",this._clearClickHandler,!0),this._searchBoxInput.removeEventListener("blur",this._blurHandler,!0),this._searchBoxInput.removeEventListener("keydown",this._keydownHandler,!0),this._searchBoxInput.removeEventListener("input",this._inputHandler,!0),this._searchBoxInput.removeEventListener("input",this._debounce(this._handleGPSInput),!0),this._searchBox.removeEventListener("retrieve",this._retrieveHandler,!0),this._debounceTimeout&&(clearTimeout(this._debounceTimeout),this._debounceTimeout=null),this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._map=void 0}getDefaultPosition(){return"top"}_createSearchBoxObject=()=>{let i=new os;if(i.accessToken=this.settings.accessToken??Ft(),!i.accessToken)throw new Error("Mapbox access token is required for SearchBox.");return this.settings.placeholder&&(i.placeholder=this.settings.placeholder),i.options=this.settings.options??{},i.mapboxgl=Lf,i.marker=!1,i.bindMap(this._map),i};_dispatchExpandEvent(i){this.dispatchEvent(new CustomEvent("expandEvent",{detail:i}))}_clearTimer=()=>{this._blurTimeout&&(clearTimeout(this._blurTimeout),this._blurTimeout=null)};_clearClickHandler=()=>{this.state="focused",this._clearTimer(),this._blurTimeout=setTimeout(()=>{this.state="initial",this._searchBoxInput.blur(),this._blurTimeout=null},D.SEARCH_BOX_CLEAR_TIMEOUT)};_containerClickHandler=()=>{this._clearTimer(),this.state==="initial"&&(this._searchBoxInput.value.length?this.state="results":this.state="focused",this._searchBoxInput.select()),this._searchBoxInput.focus()};_blurHandler=()=>{this._blurTimeout=setTimeout(()=>{this.state="initial",this._blurTimeout=null},D.SEARCH_BOX_BLUR_TIMEOUT)};_keydownHandler=i=>{i.key==="Enter"||i.key==="Done"?(i.preventDefault(),this._clearButton.focus(),setTimeout(()=>{this._clearTimer(),this._updateAriaAttributes("results")},0)):i.key==="Escape"&&(this.state="focused")};_inputHandler=i=>{i.target.value.length?this.state="results":this.state="focused"};_retrieveHandler=i=>{this._clearMarkersPopups();let n=i.detail.features[0];if(!n)return;this.debug&&console.debug("Search found the following feature:",n);let{geometry:s,properties:o}=n,r=new Lf.LngLat(...s.coordinates);this._map.once("move",()=>this._emitSearchResultPositioned(o.name,r))};_setProximity=()=>{this._searchBox.options.proximity=this._map.getCenter()};_debounce(i,n=Q.DOUBLE_CLICK_DELAY){return(...s)=>{this._debounceTimeout&&clearTimeout(this._debounceTimeout),this._debounceTimeout=setTimeout(()=>{i.apply(this,s),this._debounceTimeout=null},n)}}_handleGPSInput=()=>{try{let i=gr.parse(this._searchBoxInput.value);if(!i)return;let n=new Lf.LngLat(...i);this._clearMarkersPopups(),this._map.flyTo({center:n,zoom:D.SEARCH_RESULT_FLY_TO_ZOOM}),this._emitSearchResultPositioned(void 0,n)}catch(i){console.error("SearchBoxControl._handleGPSInput: Failed to parse coordinates:",i)}};_clearMarkersPopups=()=>{this._mapContainer.querySelectorAll("div.mapboxgl-popup, div.mapboxgl-marker.search-marker").forEach(i=>{i.remove()})};_emitSearchResultPositioned=(i,n)=>{if(this._map.isMoving()){this._map.once("moveend",()=>this._emitSearchResultPositioned(i,n));return}let s=new CustomEvent("searchResultPositioned",{detail:{lngLat:n,label:i}});this.dispatchEvent(s)};get state(){return this._state}set state(i){let n=this._state;n!==i&&(this._container?.classList.remove(...this.stateClasses[n]),this._container?.classList.add(...this.stateClasses[i]),this._updateAriaAttributes(i),this._state=i,this._dispatchExpandEvent(i),this.debug&&console.debug(`SearchBoxControl: State changed from ${n} to ${i}`))}_updateAriaAttributes(i){if(!(!this._searchBoxInput||!this._results))switch(i){case"loading":this._searchBoxInput?.setAttribute("aria-busy","true");break;case"focused":this._searchBoxInput.setAttribute("aria-expanded","true");break;case"results":this._results.setAttribute("aria-hidden","false");break;case"error":this._searchBoxInput?.setAttribute("aria-invalid","true");break;default:this._searchBoxInput.removeAttribute("aria-busy"),this._searchBoxInput.removeAttribute("aria-invalid"),this._searchBoxInput.setAttribute("aria-expanded","false"),this._results.setAttribute("aria-hidden","true")}}};import"mapbox-gl";var dr=class{constructor(t,i=!1){this.settings=t;this.debug=i}_map;_container;_button;onAdd(t){this._map=t,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._button=document.createElement("button"),this._button.type="button",this._button.setAttribute("aria-label",this.settings.label),this._button.addEventListener("click",this._clickHandler),this._button.className="mapboxgl-ctrl-share";let i=document.createElement("span");return i.className="mapboxgl-ctrl-icon",i.title=this.settings.label,i.setAttribute("aria-hidden","true"),i.append(et(this.settings.iconSvgId)),this._button.appendChild(i),this._container.appendChild(this._button),this._container}onRemove(){this._button.removeEventListener("click",this._clickHandler),this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._map=void 0}getDefaultPosition(){return"top-right"}_copyToClipboard=()=>{navigator.clipboard.writeText(window.location.href),Ue.show(this._map.getContainer(),this.settings.fallbackMessage,2e3),this.debug&&console.debug("Sharing API not available, copied url to clipboard")};_clickHandler=()=>{navigator.share?navigator.share({url:window.location.href}).then(()=>{this.debug&&console.debug("Shared successfully")}).catch(t=>{console.error("Share failed:",t),this._copyToClipboard()}):this._copyToClipboard()}};import"mapbox-gl";var fr=class{constructor(t,i={},n=!1){this.styles=t;this.settings=i;this.debug=n}_map;_container;_styleTiles=[];_activeTile;_state="loading";stateClasses={loading:["stylecontrol--loading"],ready:["stylecontrol--ready"],expanded:["stylecontrol--ready","stylecontrol--expanded"],busy:["stylecontrol--busy"]};onAdd(t){if(this._container=document.createElement("div"),!this.settings.show)return this._container;if(this._map=t,this.state="loading",this.styles.length>1)try{this._container.classList.add("mapboxgl-ctrl","mapboxgl-ctrl-group",...this.settings.mapStyleContainerClassList??[]),this.styles.forEach((i,n)=>{let s=document.createElement("template");s.innerHTML=i.tileImageHTML.trim();let o=s.content.firstElementChild;o.title=i.title,o.dataset.styleIndex=n.toString(),this._container.append(o),this._styleTiles.push(o)}),this.debug&&console.debug("StyleControl: Control initialized with styles:",this.styles),this._initializeControl()}catch(i){this.debug&&console.error("StyleControl: Error initializing control:",i)}return this.debug&&console.warn("StyleControl: Minimum 2 styles are required. No control will be added."),this._container}_initializeControl=()=>{if(this._map)if(this._container){if(!ai(this._map)){this._map.once("style.load",this._initializeControl);return}this._setActiveTile(),this._container.addEventListener("pointerdown",this._onPointerDown),this._container.addEventListener("touchstart",this._onTouchStart),this._container.addEventListener("mouseenter",this._onMouseEnter),this._container.addEventListener("mouseleave",this._onMouseLeave),this.state="ready"}else this.debug&&console.warn("StyleControl: Control not initialized. Call onAdd() first.")};_setMapStyleFromTile=t=>{if(this.state==="busy")return;let i=parseInt(t.dataset.styleIndex??"");if(i!==void 0){let n=this.styles[i];n&&(this._map.setStyle(n.source),this._setActiveTile(t),this.settings.enableUrlSharing&&vs.setURL(i,this.debug))}};_setActiveTile=t=>{if(!t){let i=Pf(this._map),n=this.styles.findIndex(s=>s.source===i);t=this._styleTiles[n],t||(console.warn("StyleControl: Current style not found in styles array."),t=this._styleTiles[0])}this._activeTile?.classList.remove("stylecontrol--active"),this._activeTile=t,this._activeTile.classList.add("stylecontrol--active")};_onPointerDown=t=>{if(this.state==="busy")return;let i=t.target.closest("img");i&&i!==this._activeTile&&parseInt(i.dataset.styleIndex??"")!==void 0&&(this._container.blur(),this._setMapStyleFromTile(i))};_onMouseEnter=()=>{this.state!=="busy"&&(this.state="expanded")};_onMouseLeave=()=>{this.state="ready"};_onTouchStart=t=>{this.state!=="busy"&&t.target.closest("img")&&(this.state=this.state==="expanded"?"ready":"expanded")};onRemove(){this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._map=void 0,this._styleTiles=[],this._container.removeEventListener("pointerdown",this._onPointerDown),this._container.removeEventListener("touchstart",this._onTouchStart),this._container.removeEventListener("mouseenter",this._onMouseEnter),this._container.removeEventListener("mouseleave",this._onMouseLeave),this._container=void 0,this.debug&&console.debug("StyleControl: removed")}getDefaultPosition(){return"bottom-left"}get state(){return this._state}set state(t){let i=this._state;i!==t&&(this._container?.classList.remove(...this.stateClasses[i]),this._container?.classList.add(...this.stateClasses[t]),this._container.setAttribute("aria-expanded",`${t==="expanded"}`),this._container.setAttribute("aria-busy",`${t==="busy"}`),this._state=t,this.debug&&console.debug(`StyleControl: State changed from ${i} to ${t}`))}};import Wy from"mapbox-gl";var Jc=class extends Wy.Popup{constructor(i,n,s=!1){super({...n.options});this.map=i;this.settings=n;this.debug=s}setCoordsHTML(i,n){i=Wy.LngLat.convert(i);let s=this.map.queryTerrainElevation(i,{exaggerated:!1}),o=`${i.lat.toFixed(5)},${i.lng.toFixed(5)}`,r=`${i.lat},${i.lng}`,a=document.createDocumentFragment(),l=document.createElement("div");if(l.classList.add(...this.settings.classlists.body),a.append(l),n){let f=document.createElement("div");f.classList.add(...this.settings.classlists.title),f.textContent=n,l.append(f)}let c=document.createElement("div");c.classList.add(...this.settings.classlists.coordsContainer),l.append(c);let u=document.createElement("a");u.classList.add(...this.settings.classlists.coordsLink),u.href=`https://www.google.com/maps?q=${r}`,u.title=this.settings.labels.coordsLink,u.target="_blank",u.textContent=o.replace(",",", ");let h=document.createElement("a");if(h.classList.add(...this.settings.classlists.clipboardLink),h.title=this.settings.labels.clipboardLink,h.append(et(this.settings.icons.clipboardSVGid)),h.addEventListener("click",()=>navigator.clipboard.writeText(r)),c.append(u,h),s){let f=document.createElement("div");f.classList.add(...this.settings.classlists.elevation),f.textContent=`${Math.round(s)}${this.settings.labels.elevationUnits} `;let p=document.createElement("span");p.textContent=`(${this.settings.labels.estimated})`,f.append(p),l.append(f)}return super.setDOMContent(l),super.setLngLat(i),this}};var Hy={mapStyles:[{title:"Topographic Map",source:"mapbox://styles/mapbox/outdoors-v12",tileImageHTML:'<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAZYElEQVR42nWYZ5BlZ3nnn/d9Tz7nnptv9019b+c00xN6pFGckZBQQBIaG8ECRqSi0Irk9YJrvZgqKNuLwRhjr3eJBozAIKJMMiggK4wmjyb09ExP53RzODedc09+98Ns4Q9b+//4fPo9ser5o5d3/1mSxcHgEAD1wWt3us1e2WcsVQqtbS+12u1Dc4e1dqvcKqSTSbWVGkT5cDK6sX6d44RMJr+1tTIwkCGEnDr14k03HaUUCoXNTGYYAHZ2rqtqPJPbg92Gd/7P1729sX2PQ795+cqZTGaE55Xz51/du/eQ6zrtdj2dHtneXkkk0v2+7jg2HktP2K652bhOkcsgFAgKa5XLpfoWRf5gImOZlmVZqhrwqNns1pKxbE9v25Y5NDSq623XdViWqVR2eF7AGDcaZUmSbbtvWQbHcTwvdTo1BAgBQP26wDAcKxhm13UdUZQ9z6TU5Tiu3a4Jgux5rmUZLMvqehshjHXaikYjuq2dWH2uoG/uNJeH0sOe55lmXxZFTiC71Q2GYEEQDd1QOFVW1EJpi+fFYDCysnLJ86zd3fVWq+44ztraEsMwsqzoegchJEmKZVkUPKAezt+npmYJov1+n1JgGKbTaWJMMCau60qS5LoWy/K+D4bRj0Qi+PS1V4u1LVUM2razuHyeRUJQCkuS2u23OY5T1GC72waEwKcM5pBPlEDAd30A6PU6zWYjEIhyHNvptLLZfLut9fu9WCzZ7+sIIQAAAEoRgOeXTttGu9c3ut2WKIoIoXZbY1kWIfA8V5KUXq8jCJJtG4RgQnjsmV5Nq7IMN56cIoRp9ZqAcFAKA0V639Db7UQ0BQAIU4yJDz7DcYIk1uvlfr8ryzKlwHESYMrxAmDaaFQBgCDieS7DMAghChQwAs8obl/V9a5l9mRZBYBOpx0KRTzPAwCEsGWZshwwjF4kEjeMLp4a3WOaptZtMCwbDcZtx2IZ4jpOpbrT0rReV+dZjiBs+44MMod5hFGltK1pFUUJYcJxRByK58aSk/lYfv/IgYgadxzgRAkhIIQDAOq7gHxm4o+IEEfUpYA5TqCUWpatKGHfdzmO933P8xxRlC3LCAaj3W4LA0WhQETv9zAmAh/AQHpGb6e0CsCwHOu5vtZpmI4tCYoqxBgs9HrtXq8nSQrDSHuHD4aFxkb5e1/46UOf/cl9J1b/vtV4NiF7mcS0TwFjjBAgxIHvuVvPyEqg1dX6fUOWA65rY0wDAdUwerKsOo5Tr1c9z5UkFSFiGD2GECwJiue5HvW0Vq3da/IsxxA+IKvUp5gQgRNbWrPeqUbltKF3G/USJ3AhNcs7xZev/fVHXyitlm6D9jEwNBicJsdPH4195btvf19q/Enq133wfeqB74JrxVOjLESbxRVKfdu2KPVZlmk2jXh8QNd1z3M2N5ez2THfdxBCjO/7pdo2RoQg0tSqhOFYTiAMyxHW8zwApMgBx3EazabpGSZrtHqNbGoupLof/up7v/zaQxB6Cno8pNhDdzPnnjG81ntf1C+nP//xFz+4eveBT0cjQwC2Z5p46gmW5SUi5vNTsqzu7KxQShDCAD4hbL1eUpRgv9+r10uqGo7FBvHyxrVWUwspYZ96vo9CgajnubZpy4FAt9sFcDmWKbW3ZRyYjt1sOn2eD48Myk9+/aEvn/kEhL8IpSaaLOtfZM6+Gb74MQfwJuAxEF96wxd2Xrv8peH0hOVBc+OUv/EjwGy9UQWASCRRrZYJwQhh36eu69brNUlSZVm1bWtr67qihLCmtYez40pAbbYamKBIKFyqlhRZZTmuVCwk4kmEcbfbvCl2NMCFyo3t8czEwvo3v/raPSB/APRr+46JzqeHJQwA8F8PBM9/IQ+oDJVNiH33sR/+u669yoIsSwQI7Vpep90Mh+MAlBAUjUZN0+B5wbZNAI/jRNf1eV6yLEfXe3g4PaKGQprWrDfr+cyY5/u+64VDkfW1Ja2hpZNDu/WtBJeZis1r3SbPKAGx875fLQP/SbDK//1D6YvvTRL4Dx2Mse0vTw7O+2AFyrvHzhSfEzkkicBMfWi33o0EZFlW6/Wy79O9e2+tVHYRIoSwhDCua1LqcxwnilKjUcGiLLRb7Xq9NjU6I/B8vVb3PM/znJ2NgqRKXb29srY6pd5iGP3t3etDydx28eULpSx0A299B//Zwyr8P1IJlP7bCIx0QTvy1asueJf91e+VW4giJjmY9n33woUTg4M5RQmyLOt5DsZoaGjMMPo3jrBtW6Io4a2d1avXFkJqmOVIp9UtlQuJeKJSqtimPzs1e2XzYpJkFRo5efY5y+6HI4OL1SvQ64LADAcY+P8rN2gAkzm5JYP2Mh5+bKPeTcbCHC8uL1+m1JuZ2W9ZfcPoCYJQrxfD4Vg0mgDAjmP5vu+6Dm41OrnMEM+ylxcuLS5dHh8Zc0xrY2Vjdu9MW28yffboyMO9nuYDDMSHXKNXqjYBSQC0Yfq/h3jgB7vMf1n79bb5+0iz44Ks2LVF0JdNbp8SzkZV1TSNzc3VgwfvRIhUq2VCOI7jTdPEmBCCR0en4vHU4GA6Gk3g4ZFxVVULpYLZ78/MzCKCzp++kM1nlKh4bfvakdGHwCLr29eGc6Ou69Sb1ZGBOPAYfEQwvUHw/Lb57M8N73T3/f9a/z0WRizorbEkD8jdKJQzgxmMyZkz/64ocjQ6YJq6plVnZ28CANM0CMHdrsayDCEEgPK8iJHnXbu+TAizb26f79LTx8+Gk8rAcOLy9dcnpb1xJrW0fiGRSEpSoN1u9l3ryOxbg2Eb2i2E/28TWzYFkUBOnMoKv8cyYAD85cenmiDcK0aHFZGvVgqdTufQobt93yuVthiGKEqQUuT74Lqurrdt2+x0mp1Ot9Np4lKlMjkxlU6l11fWTp4+icMwO72vs2Xswbfdkr5/c3uFF/hYLNlq1VU1xCsiZic+MroI+nGTUW4QpGUCCMClA/J/TJtjAwR+8MRk3KUj4cEx3+2/fvHk2NiUKEqtVqNer46OzrRatV6vc/jwG2y7jzGXTObD4UQwGAwGw0woGGpWq6tbq5Rx9+ydzavT7hYaMuPJbLbS3O3qnZmZ/e12k1JvYCAN1N0oVj9254f/7uxffOfb9xxfDSO3VOtRYCgEyY9f0vbUrEbH0Wkarn7v03f8BLg/rdDQAE8uXTiFEJ6c3N/v6ysrlycm9mOMl5YuTE0d4Hle07T9+28NBEK9XjsSiQWDcebixdd9xt43Mz8WnZOMYHezQxgazya6/XaxuDU9fUDTGr1ea2JiL88LhcJms1O7/cCbdv+skvjsvWvf+RrED0CgByoBlkDNW3yeh24Aan9x213f+sx7PldaT5AQb5vtQqFw++33AdD19auJRDYUiiwunh8aGlfV0OXLpwYGsoqi7uysVavFqak53/dwNpW/OX93zt3DVgNapSlGxGgiUa6XVleXxsZmAdDu7mYymRVFWdPq9Xp5ODddqK9Fch/Z/LP377/5PUA+DfZF6ALUdWAsoCch9Ma//tTCax97ArYbF6s2j/HZsy8lk0OhUKxU2sGY5PPjxeIWxwkDA5mLF0+Gw/Fkcmh3d6NaLczMHJSkgGF00a9/+TUeccFomHBElATEEATU9TzX8j3HXlq+kssNj4xM9/v69esLmcyIJIqhcEIKyGbXCkWCV9f/5uvHN3+3UuibhYfufs8dYffRuTs5+Sisfe7i+VXxtk+1dxa2d9Yee9t/7vWalVp5ZHiyVq3ubF+fnj64sHCKk7jJ0f2NZrVQ2Dx48A4AWFg4aRgG+t2z30kNpS3bqtfK6WzuxV88t7ZUmJzNPPjWR+vNhiAIucyI53vVWkWUJI7lZVHmeeXK5bM/+vbTMzP73vbOtze2FtUsQVxo8bmX5257gI1Pg3EcumtrxkhiYOjVl381OTF7+fz5W47cQ33v+Au/e/M73u45PqV+tbbjOUiUBMd2M5nhVqt5+vTvwuHIbbc9TD7+px8slXbqtaosy9HYYHY4/8KvXjr2rmOyJP/kWz/NDee67c43//Ebosicf+XMb5/59ejkqBSUn/7294IBRetoL/zbb5MzYxQiT3/l5z/7+SsO5xvdyje//ANp6ObSTuUX3/uXw3ceGZ/Y8/W//ZoaCC0tXLtyfmEgFXc9t1Ypnj957n9/9lvpfPCmw284eeL5a9cujY/Pzs/fhxBDjh07Eo3GU6khSVLqlbIaVEvbO4fvvlXv9FavXD/12uuXzly4/e47JDmwdG11bm7+p0//+P5HH+IJ9/Mf/BvH8+//kw/+6ulnfv7DXz72vndMzY3/+me/YbGeGZ547eWzl06cI5jx7P7c/M0vvfDi2tWVjdXtobHU1QuLk3snl68srV3dGExF3/vkR1+/cKJaLd9//x/E4ynH6Xe7DZzPj7MsXyxuLS9fshzT96HT0AnC//yPT2mdHsGIYcjBW+dZlssOD0wdnOAYlkWxy+dOH7hlZu/Bqd/87BeEZQcGo1ur6y/+5tn7H73nysJuNj/0h4+9qW/2j77pzsP3HGn1Ko5lf+DjH3j8yXe4th1LhJ757i9Pv/T63KFZ3/evLVwIhoIPPvhW1/VPnnzh2rWzqhohDz10a6NRYxgunc6Hw1GGJUqMlxQlm08RAvcfe2DP/GwwFOYFrlbfGUgmD918Ey+AElYn5qam5qbKxd0j991178NvPP7i8/c8/NiJE6+nksHXXj41mI0/8p8ePnfi3NjkmNXvz+yb9jBVJHlsemJ6/57N1bX0yOCb3vKHjUZpY2P1Dfc+Ypr6xYsnh4cncrlxx7HRyZM/DgbDGONut1utFvuWMTE57Vre6NgkLwjUp4Bga3Pj6uKZVCY3nJsKqKGd7TVVDdWb5YASTiQG+qapNRv5kVkC6mu//cbrl7d4ntz14BsQQZFwol4ru443kEwWC7vZbL7RrPG8EInGO50WA+T6ysX88PRAYujq1bOKEszlxguFzUJhEy0uPl+tFnS9CwCSFJAkKRpNxuMJXe81m/VyebvTannUHx2dymTyvV4PY2Tbxvr6ci47FgiGTbNbLO4OxJMj03d5608J9PwWfkwOZ3vtyukTr9x62907u+tDQ+PLy5fGx/a2O41Gozo9feDKwrnhkent7eVatXL0rocajSLGzMjI9Pb2arG4s3fvzczW1irLstnsqCjKCCFd725uLu/srPZ6bdd1OY5PpjNDQ2OEsDcch3J5u9ls5HJjihLq97vtdl2RpYnpWx1wmM6S5fhbTn1MiF66eHZ0fMKyLUUJ6npXloMsx5XLuxMTc5pWFURRksRKpXT48F263tnaWjt69JFWq1mpFOfn7/Q8jxkbmwLAlmUWixuFwo7n+ZT6kiTt23eLqgYZhkEI27btuk673ajVioQw4+OzhDCeZ3W7XdM0bz78gA+ief6vApy1BEdFLuJ7puM48Xi6XN4eGMgWi5up1FC9XhEEmeP4paXLs7PzW1uroshLknzlytl8frzTaVYqu/v2HUYIlpdfZ5aWFpvNKgAoSiCfHw+FwiwrUOp7ntdqaa5r+77nOK7jGN1uL5nMhMMx13VueBCmaezdczPDRv3uFan4dDf91h09MJ2VNzdXZFmmFLmuD0Bd32cYlnEK46Nz1UYtGAyxLLO5uXro0J263mNZPhSKX7jw6v79t7Msd/HiiWg0xVSrlVgsFonERTFACLZtr9Opdjqaruue5zIMwRhxHD88PDk0NAEAvu87jl0sbjIMl8uNyaFR7Fdg4+v40CfLzh5Wu8yQeLVa2rt33jC0WCzRbmvJRKzWcl5ZnXl3yrU6hWz+wObmCsdxwWBkaelCKpWr1QoMw1HqLy1dHBzMJRJJZnx8ptNplko7rms5js8wzOjoZDyeTCSA50WEEELINPuOYzmObVlWs1lutTRVDU1PzYvhPEM155V3gscaE3/eWb46EAv3zb7nUUFQqtVKLjdSrRYGE2PWbv3H5gOvnm99Y6qOeLqxtbl/br+udzDGoijv7KxNTR3Y2FhyXX9m5tDq6hVG06qEMKoaBgCMka73Wi1tYCBp2/1Wq2nbpus6tm37vqeqIY4TXNdJp7Nj4wcZPso4K97i5z1IGHOfxJT0GhvZmZvOnHklkRjwPJfnBcsyWZa3XAaQ9tTRC4+c2/932r0ftZ8JcHYoMrC8dCmRGOz1WoIgEEIsy8pmhxcXz4mixExO7tF1o91ualrdMDs+eIDcUsnxfQ8AEcIyDEMIK0lCNJr0fU8Q+GxuFrMRxl12nntbD0bt2/4hoEbLmxckOeR5nmEYc3M3aVotGAx1u21ZVgy9o0MoxxnfH3nhA+V7F5fnvzZPCDgeYEEIaFolFku5rnsj7evXr95xxwPM6uoVigBTNDkzk83NgEcYFne61Wa1qChhQhiEqKKEGIa1LNPotaKDI4SNMMbrUHuhLN7dyj4+Iiu+UW21tWx2dGVlQZIEQRA7HS0aHWw0KvH4YKulqbJS6jFRtv2j6Sv3Xdrz99XYX0bOjaYCFIPvA8Z4e3s1GAz6PpUkwXUtJpsdw+BHk2lVyrz6/RdOP/+yLEsPPfH20fn5pSuvxWKZSGTAcdxer4ORP5CZRVhhOi87r324GXikmnl8IptHTq9cLQeDMUmSK5Xy6Ohkv28yDAsAnuexrGCaejgcdRx7q8PMJ41nxo+/beHODrrjUfPZyWSJt7abtXaj2fYp6vfNoaHxVquKBxLpTH4koub/9v2f+dpf/g1F9ubK9c+8648vPbs4vef2SmV3Y2MZgIZDkUhinGBCNv+Xe/lL9vgnCtFHE7JAvL7t2JpWSaWGbNv2PHtgIKVpNUkKuK4NAADI8zyMGc9zMfI0Rw04u5/h/6mE+Y/UH/nIpSO/3RiTET+TFIKi3W7XbduilGBBkoPBzI+/8J1L506OTI48+O53vPHtxwhDv/VXX/JN5uDBu8LhiOOYHB9BAPTq//Au/kM39Uf91KOM35d4BhNUr5cEQeQ4fm3tqqIoHCf2elowGDaMniCInucAYI7jHMdyXYchuGIHorj+1MS5b84vpVP294V7n9w+9qXrt3fMeE7lXG2JmhWG51nHdjeXlnmWHHvivZT6+bnZuVvmz79yeun8woGjR5LJ0Up5w6bA6Vc9v+3c+S9ImewWr/LYFyXFcVxNa4yOztq21WjUx8fndL1HKWVZXtdLwWDENA0AH2Om3zckKRAKxR17wWTjXZfPOcufTq6tidYvtZGl6IE/rozmnO4+Us9uX2FEQfUp0223hybHjrzlkRtfniDwx597RRA5AJ9SD1iFUMs+9Sfs1LtoeD9t7zQa1XQ6RwguFgssy6tqZGPjKsZcJjO2sHACYwZj0HU9nc5Vq2VJUgCg2+2Mj+91HLvT6dx+6z2u710uNMbG9w4Etbdov1HUa5e49Dl+//HaaK8/wlDqYyS++Yl3P/W5//nFJz+BEWJYbuv6ysz+fVOHbgLo1+tFXggSMGhoDNT91Lc67SrLMooStG2719PS6VFK/fX1a0NDw4IgYIwJ8U3T5DgGIWLbZigU8TybYYggCKurVwhBihLsdjWO4zBCFpLw4Hyrp41YFw6r1R3FQMOzDAABMO545P71S8s//Mo3CEae7+fHxj7/zD8hjHW9ahrdaHwUOpdI4jCIKd/tt9paIBDkOL5U2gYg4XBsZ2fVcdzR0RnL6otiUBD4er1yYxlN0xDFbK/XFUX5Bv2tt95HqV8obExOzrMsc8MypYHQ6nrfaLr9TnciWmNuGJgAnXd/6qPHPvTOjWuLLC9MHdwD2Ne0a7rez2QnfeC8nd949bPs0Hv67e2+0R0ennRdp9WqJ5M53/euXr00PX2AYbjl5cuKoqRS+VJpW5YDnucSwjAM0+t1FCXc63UtyxFF3rL6GJNgMIQQIgQ7jk0ITg1mCGGXtHqzDwwAArhB1lIj6r7bbwdwKBiW2RUENRRKARAAE3EBbvJx23eXly9kUkM8L1arJYRQNDqwtraIMQwNjXQ6LV3vptPDCCFJChBCOp02IQQh4jhWJJJoNqs8z+p6r1Yr8LyCEKnXC45jSZLUaFQwZoLBUDQcicfiuNvVAACAAGAAHaAHYCFgBCEiikFKPYoI9tpANZDzlxbPRtTI4GDWdZ1qtXijVGtr12Zn5wHwzs5KPD4oSXK1WlSUUC43qWklhmEAwHFsnhfa7aYgCAzD9nqtanW31arVakWG4Qgh/b4O4FMKDMMTQrDjGIXCSrtd9TwbAANgAARAKfUAKALsA0G052799vrCGULY/PCk5/mtVoNSPxxOXLx4EiGcSo3U6yXbtuPxtGmalcru4GBaFOV+32FZrtmsua7LMKxh9CQpgDEgxPK84HkuQphhWISw73sMw1IKruuapo4jkVQymceY0bRKubzZalUpdQEIQgQAECYYKAAhscOmh/PZEc/3fd8vlwu53Ljvu6VScX7+Dt93CoXVVCrHMOzu7rog8JIkVyq7mUw+l5vUdY3jONe1bNsNBqOmaRtGl2V5AOQ4NiGEUkopYIwQAoyp5/kMpRRjLhCIBAJhz3NMs18uFziOqGqMZXkASoFSzwMhPpw84FLf9TzT1DmODwTCp049Hwqp4XB8Z2ddloORSKLV0kxTHxvb0+l0Go3KxMQcxkRVE7HYoGU5LMsEg1Hfp6FQPJud8H233zfi8ZTnUYyB52XLMn0fcZz0fwAwcXdObXdVXwAAAABJRU5ErkJggg==">'},{title:"Satellite Map",source:"mapbox://styles/mapbox/satellite-streets-v12",tileImageHTML:'<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAZBElEQVR42n2WWYxk13nfzzl3X+veqltrV1f1NtPTPdOzkrNQFE1RoihrjZ1YlEUqVOQkMgIFURwEgaAkQAIkSBwYfgkCJ1ESZ5HkWLa1mhLFZThDcmbI2Xqme6Z7preq6tq3e6vuvp2bB1l6SID8Hr+X74c/8C3w93//bKFQSqlSrzsIAo/npFxem5gOCemUKPtBAiHBMSxN8YZhK6kUzXBxHLMMiwjanlr9fo9hqEKuiBN82GzFflIsFkVJShKSF1RV0WxnuL5x80LWgbH5B2++1TPJ1hiQ2SUXyeXFOZahDV0PXbsgpRhEoSgZ6vrtW3dJUWTTWopASBAZYMUYhABgmRMokuEFgaaA4zhJgke6kU4pKVmKMYwhARFpjMcUxeQLRQImCIEEg2wmbRgGw7GhHxrGqFpVcvlc5HF3bt8AgQliEyc0JAWajxkWRZG39fCOVkyrvIxIyvT9ALiqkiukUk8XNXJmthpFfoJoLaPNlBiIKJxAmuCcqVU7aFVKFYokG/UmSQmKpHpBxLMshKRtexTFKGoKJ9i2LADgcNhDiNRyBUmSBr2B7/mWoYe2Q7EcjGPAV/wIu86DXPmkEjEPd7dypXS1PNOo7SfU0HOBCxVVTIli5HruYaNBEohot7uCIOXzGVHkfR8PBwYvxIwgkmg6Ho/7gxZIqGy2TFOMa/s0YuutOkzC2dkqAEnoB5ZhQFFOEuB5blZjOJZR1QxDs8XZ8mjYd11/6iEu0T3Pa/taWo9my9XlKpHSOEogKGeSIhKJRi6RG1qsTHDuxHz43m1yNBqnFImh2DAK+70+SAiaYRqNdqU8r2Wz+7uPIaLW1s6KfCoKASHTOE44hogT2B+PJNYhAB1FsT41cvlSkgAIURwDSKDZylxaVYZDYzi1HEggBFzP7DiYS8Gp7zFMyg2QQwYREA+aexfW8poMc0qm0Z56un3+9EkUhB5FEZzARWG4t7ddqx0Yhh4GvmVNIowpVsrl80FgRbEPCRxFQRC5uVxBkuReu12v1xFE5UyxktIEz5qVtKXZowBQURDgOKZo2vbsCGGIAo+eNZlFkgaApBBBQIXbHer7rSmnVSws/eC1N+5tXE0CW6CZx4+3hsMB8bm/VqFIwnMsAGAQQM/3rInt+aFtBYqqFYpFAOLDej0Iw+Gw73o2x/FBEIdBYFmOTHAlJfDRfifp3msZB+N1EbRlnw4c9rDXjAHQ9RGmqINu75Q0Mjznhi4VtAzFswkInThiFU0RszP5WZJQ9za6H1zdaHU6vCoOxjrpOd7UGAKAWEYulpZsy7XMII4BRDTHSRgnFMkeWT5KIFRvNAeDyWAwYBm+Wlg6Ucjumjf/Yy97N7l0xZoF+Ck2vnn8oPEcuvdi1jtaen7kxUJKnDg4wYglopigaEEMAp8OaFFg86kQMRwNqIQGmZn5cmahc1B/48qb1r6bKxWIv/+7HxX5VLO13+5slotPptOzWjqv5bSJrhu64XpWjCOGpiBIRJ6ZTE1z0opdmFfofebKv7a/9EP3G3X3wwAvvjAnPBovd8InryVP/akdruEfPDt/0QNSGATDfnd1rtqwwM/3moWUqiopDBDAoUCj+qC5UX+gqsp0OjFso7I4r09MfagjghQYRjH1BksvIoILgxCgSBa5xaWqG0xtx6YRGvb1KEr8IJwpZllGlYB/y3z1d3rfuOf+XeAxIOpe+VT4s08Q337aJJMmiEQj+Ju/3X3pf2x8R0liieJkjmL8Nu3rKZpgWRonoHZY32t0aoeN/e17neZhDEnI8WPH1bK55z75sdkT88Rv/fWTOzsPrWnz9NonOUElqQSRXpIEh43DMAizmWxazXAsAyB0HZemiKJaIjJ7f+j/rbr9ZRBMjkrGjz+ZfrrMAQDWcsxnqsx/2xrEYQSIs3ejvc/w7y8f/ZxEWVmif317f9cGvu1NrJBnaTtwACJmc2VV1AgARZbL5rJTa0JxHCBJ4otffKK+v3F4YNiGSFCAFekods2p1e+1ivmKLMi+70EI4zgIwsh14/kM+aoLv2v8IxCQFzPG+kvlWZkEv6QokF8/Le/2jIcGN4HzWf97H1k8qZSynum8/3iT5ASO5LEFsqm0JIqABBFGW/d33fHUcac/f+1ne3u18VQ3+iPilZfP7z3e+5PvGjdvN9fWstl8yfdciGFKypGI6vYHhj6cTAyMcUZTFVZ0Qe2P9E8cmh/+yqrzo89kwf8Dg8BvHZM2e4OtYXFKR58VGhIxrT+4cr890WRFSKQ5ZSarZtvtxrX1D/wERSHRqfe6rY7AU45luqY7U8qREEAplfXDA5IDDCOhhGEIiSSRLCmmOQEYzcyUo9gHANq2x0CwZdQNigIY5Dnw/+HXq8yf74GDeCGCbwFAbRy04wSE5kiV0msnljsjo1t7UFL4xeVqEknskxIOHEgFPvZa9brneAgRxPLK/G/+hmyYoNVu4dDjaNmeBtvbjzwvmCnmZVlVlSwE5LA3PKw3WVZBCQNQMrKjX0l0nORrP+q+3XB+VZkEEJDQ9IZm2ASh2vEZiiIRiNI5JpMnrMmmRPQFYBntR57VJakYwjiOQhhgx3I2bt8hw8hhWerDz14C4LoiAWs6VFRFlrlGY900++eeeIpladeyWZLJaoUj+Wo9vG4fxgBAAv2VgRmCF/60s7FHvzmebH2Z/6VYAjDIE8Kqyu08eGfs+gKNeI4HADze2xhPto4vq3tN+823fyrnj1SW3G57mBK50bQ3rHUiyyNNy+U5kCuqH/n4ybs3rjeaRKkyz4tiKj2DceQ59rjXZ3gWEWShoMm53Gq4erTbOQgjkqJ+0b8+CTY8CpSImAh/lRaEBMBBVdgDhLa+e3nsDd1J3xWrrDSzvb0XJ9P5qpbLzCWYe/XqrcZB1484RcsSZAAQWKoukjjiAIwYFnK80mzHYXTTdZ5RizOLi0fMid7vDOM44CI/nc4a+pREoyO5uWeoN1+LJiyR/oVBJUXTZBS4hPSrAAEgSBG4w6/O7UWG2PJImZM8rE/MgWOZ/eahm0xy2azC0JdOn/OD5O5BI+EzgFRPH18jiRAGCVktr7S6DxPWhwlhTsGDDbByfFdOyRSkFDGdVtOOa8chFniOZQVjOm1D5dMzmf9kf+vfP/onXdfCOLAADZMEkF7bh198w0xCl2aUH9bpheKfvZLp3LiJBi55pFyIgRq5iTmxxo6z3dx7+929lz9zbmHxzFPnzodJ2DLskIioECMcPNjfJV568TlB4AlA4ITwveG1G1O9/+jEiWVZknGCSQqIgiiJCkMxJM0kMeiPjQyVX4l+/L+D4v2D1Q2TfjRxGSqWFG5geptjYtNQ7x1SCP2bu8/tyejct6/eHho1jo8JGjG0SNGyE1NYKNQO2+++3aLi7lJ1WVPkD95/r7Z5WLu/Xnu4PhwMiZOrTKk8S5KkIKgkyb/z9manA06fkgqFMs1AAADD8DgGtuuZE4umxenE6I6dM9kTZ4mftOluOykCnAoT0fVogEQAAKCspdR/f3P5/aW1Fy+/dfP67qM4qo3M9mDYoSmWZ6XQT3ZrIx/yBIwfbg5VaOZzJcOYFhXxmXMnQGLEkUOcOdXVMnO+F+EYMSS3dIS79KFcWsvLskyQlK4bopTW9Unkx6ViFWOY1QoUSw9D+NlTz38qdUud/E+Rb/uJKyTNPNs4Jf3kK+R3/tkCcXL2fPL4yreu3YSkKIjp1mh/px2EngoJv9ep9w/HojTDyLmDWvPqneFhc3M4iT79wqer87Nrp1dPnJiH//ZfPQlwIkpzldJ8fuaM4+Ak8VOKlpL0bnNrMJyk1Vw6renDaTZXJgnkhSEgSYbPdDu2RNGrR4TH9V0AHY4IPaAkcXJsfmHQ3i+kvG9978ff+C+XL65IpWLquY/9LkFkPrh37defeX6/ce+b//wP0mLh8e74a//wK0cWyl/72/9USqNqRrq4VvjUb7xAiQnx0osfmeiWmp47unRs/sjZw5rz4E59cXWRpKT6wWTl5BNSutJpBkq2GiZMra5nS1kEvMOGU9udDIZ2rTfNqMcq5ZMYFq+91abpApVL37v9mJPnD13mE5delFLF+3tvfvyJV1JMTixC3snnC+XzT12sVua++pUvnVhcOj6/8qHnzv/F91/TTffx9qhchuWqRnz5pU/EEb8wdyyKwKhX13JZ3dAzeT8MhEcbOgD83u7QnIZhCPd3u16A9LE1W5Ua+13HARRFptPyxNLvbz6qHbYSGLS7g8iJmy2vMUqWKqtcRBRzcyagLd2TSaWSn9tY35yplDjMZQrqcnnR0p1+qw84/P2f/JTjJZZH775Tu3ChgGS5sLS0kiRxvVbbfLC+sX4HQRKH7KON7UyOqe/XfMs+/6Gy6/TzhdQTF5cmQyefLyEIPcezTWPuSHUy0Hs1/cTpxbMXVwhIDAY9UYSnzsxtvH8HpWC2lIoixXUBQrjeaSKE4ija36tFXry+/lBUeSiAn1++GpiRLHKynJEz3A9/dJWkKdaNrOFwkNEUYhIWy7MEkVHSrOu0s1l+pipEOLFdF1GErKRiDNI5hSRpgmAuPHs8o4lXXr+p5dSnVhc3bh2EflSsaJOR4fqRHwSnL5zAXpDNKmMvvnhyUSsq3738+ucuPaNkUtVqhYJkfoGmBCoXaK/89ue//4NXR4NxeW5WYrV2zyWbzcMkiUU5pWYzQRSP9WZxhli/3RQUsmfsnX/yrCjyUWSdPXeEplnbtiTNf/P1yyunTgd+CCPz0odXIYppOiFRWs5qh4fR1HCPz5f1xnig4oO9hjzouhh2Q0c/qL9/a+/IzNzum6/TFF2tVP3Yb7S6y/PztmlFXshwDIQRgWgnCuF3/vgb6XRGEsSxoYuS0KgfxhEkSWk6nQIQHF9dObZ6VJb4ra1127FIih72h4jiKAhVWcnn5oLArh8+jjBmRFnLiMsZ9LgrjKykbo5+/PChFcRkBDIUs/Xw4WSgVzK5a1eu+o4bWcH/9QiVFwsMS4MkYVk69DEpKaokyzTFihLgBenoMQXHKAghhARDwPJshRelwbCjG24YYZrCKytPEAQRhnHgB6PRwLanJCFU50sBI7LjTXq49cHteM8rDQ29rGaZgrLTONjc25mO+yAMaAG+/MrnVUk1psbDh9uHjUNjPIwwKOWzIs9DEkZRZJsBAIj4vX/wlf6gKylqOpO/d/9BdzAAAI5HuprRGIYd9DqWbREUrWWysqiEQYggLBZnZ6qL/W57OOznc8VcLqtkc7Y1WM6SB13/tc2eOfUy6TzLSvdrB7s7jx1jcvD48fCwhePY9d2clhYFRVbE5WPHKAp5np/JarNz5UxaM91opE9IAhLf/Mbfc8N4OnH6g+GgPwQEFfgRgEkUBoIsy7I0sSYJRFGMJV6ena2GcewHIU3SSQKklIKTiBXESQhy5nWOcr59eVf3qUGz0R3aEUCu5aQEbuPaDX+kQ5pkGbbVbO/VDwa93sFBPZPNAAgYlp6tlMIY9/tj03KCOGBZmmx1ezTFlhYqg+HA80NV0zqtNkIok82NJqPc0rKkpLa3t1ACcQZTFB2G4bDfb9bqlbkFVc70hz4Ucxn3IJ0WXr/8wf5EJaNJrlTwYv7+/buWGwIC2uYkszh75MSK2enbdd+PwlanhQB67513WJanSAJHUa8/MAyTRCTFMEkMiC98/hOlmQrLca1Oyw89nhdZljPMCU1Tnmsb+jifK4Sep6ULvCA8evTAGI8W5o9mc8VG/QBCIj9/RolbUjm69vMbX//WGwyB+6M+I6Yohoshdf3d9/qttlbMfeSjzytyajQee7brWzaAkKQIHGDbcZzINSfTOI5ZloQUQgmJY0wmCTCtyb2Nu74f5vN5lqVwkiiKksvmzYlOk5TreZ7rhD5eOb4qiLLnOklCJDEsz63YMYPMHTr1qH/51k92cGVx8eatazxdvH9/SHLisx//6DMf/zWE0OJMJSSpRwe7pm0LsoAwwL6fABxRBMIIQhgSgPrlSGKAESCIj33svGXbkiQrSqrX74ZBFHhuNlfIpDWe52GShF4girIfODTH5rL5dDo7mY7HE8dPiDLYUrTe/vrBf77W69q6yAIIs3mqYpmB5XsEhZePHCsW8hAhgBPXs3vj0fzc3Om1E57nTydm7EeQgCABIMFBEENEwAQAiCGAZLE402215JTa7jTDOIhhjB3Pd217YpYKJdM0Z0rlufnFXrezu7d9Yu00SzHtft8M8IraUtX2/bce/td7TqO/GRiHHlgm5Lmp7QRR5HjOnTvbu/UGQtCamgUtl88oJAZiNpPK5s49dXF7Y6N70KRoihRY33e77X4MsEiQABEQYeL3vv4749FgaunF8tyxo09UC0fK1aOmY0zHfYBB6AeV6hJFEu32oSRIKEGMlO4cNpbFZvF44a3XN/7X9V2QjE3noB/mOJSjWSG9XJ45umDheGrojmkBkgjjOHBNhKBpGrVOV83lFVkpl2a0giZk0oWlOY5mQJIEno+jiBVZHCfEl17+nD4Znr/0XJqYu/fTm/vXHg2b+srxJzMzqjnuV+eWwjhIABZ5SZYVTCq1RmM1b2T42ve+89NrdZOFrkzjXOWsqxZHXf3EwlG5mKcLWuHIPJ/XUjJ37okzvWF33B/wPG+6jjW1Hm3verFfLs9ABuz0OjZKSnmtUpgt5vIYR7bjECRFPPdrp44dP0tMlff+5C8D35k7s9zbrTXX94oLq2tPnfRdSx8P7emUYVgnZh6uv/G0tssy3h/9xe0/v7UhcXExr7JMgcKSE8V3dncC17dNC2kqmRIUWc5nc2lVOnJkUc2kJUVePrl27pmnjz95dn62ACP32rV3Ws1DmecpgvUmpqLwACee7fmuR3z17/yNyszaBz+55k0NaUYrHpnzfM8ZjceDyerFUxG2tHShUp4T1eyNG299qNDnku4ffn/9jf1RloO+a01DOBiZxti0DKve10eW3d2rI5wczc5KXgJwPLBGJEGgOGE4LqUomEQiJLnAvXH1Dc+yVlZOrC4s7WztDwajTqcdJDGCyLUdslAoJAFwpxaTlk489aRt2sefPv+BPvHGRm1rR52hRVGixNL7d99LuTup2ZV/8ce773aJalqOQppl+XxxLgZw0J/QZvCFT50cg2Tn0c5ga6s2jRbKSzc2bu606gAGqsAzLOsniR9hjYDeeHrq4kqlOrfx8PHo8NAf6mEMDGsK8UAWeAABmcQWokES4WPnz524dOEXy2PcbG++djOVUQuFFIHYG7fevnLl1a9f8K5eefenNfdcNT91jI7p2cNuH9PV2UWbCKmUQiBJJpLls6e1Unb/zZs72zsBmWicOB4Op+6Yopmxa8Zu4pKkxDIFNUfF4Uo5L6SKg0avVmtLHEUiDgNAUIgcDQ60fOXYpfPbH6wf7tUoio6jcNrTZ06fmF2YD5zGa5f/8v5OS6Ewo1avXr/HcXwCOU4VFFLis9iB4PHI1Lv9wPSNbq+Q1o4+tcbkc6c/+0LY7n3wzvUkiQDCpuWni7Iq0aEVchjhGP/sZ+8yhP/sM2diX/WmJkwwR1AYAIwBCDB89c/+sReOT517+fAW3nn/ZuCakGJKp1YufnK5e3hrMLSihGqM7POzyZxKffPH94dIKadFQFN+AkMaYUS6Ubi/vxsbPnDcw+3HkEIwzcxUS/OpfG1r1xj3EQQix6dLecu2p4OxSPM8BPdurKdSLMaBY8U8z1McRbEpAHAYhiABJM8RvWHvvav/7vT5L19Y+JCnu2pRhez4nTf+A4hYhtcKM/NIyFekTW/coJkFFdokjB3Xo2U5JODAdgWeW11e8w2bJgAAwMNhxxjdu7dhFielmfLihdMSgiROLN+tHzQqi3MsycwqGdt0dvcOculCEOuAJP0wCoFFEX91hMiE9LJ5ZTzoXX/rX1L0wunTz6dSpc31G74baGlNVaW9vQcTc/LMc0vdvpcBY5hCI7MHkpDiiygUnKkByTRDyQLPswhevHDejNzGZEwBlFdTiKHDKBpbOvY84HpqLsuSJB1HjX4vt7QwCeLxaExyfOB6tu2yTEQpCoAAAEB84fPLDO1zAnJsGHvY1H2O5hmRmUwGnuel1UxCErG3f2Yhf7/eeNTdLuY4WYpVCQoUQSUIeyDGTn86lGiZh7RAMDEFFFEsCipDklMY3d645U7GwAtCP9JyWUhgd2p320NBUE6tnZqZLUuKRJGUllEhSUKCwGHoBSHp2k7EuBQbKopgDIkw8gEVB6ENUMSQTCqjdJ1WIUUBZ/9h/fbm3t3y3G/SDI9ij4aYhuFBa9ge6g+6B4+k3IWTzwgsf3tzfaFSmcvmEAHuvv9GkoRyOoNcq1Q96jq+LNBbnQYOkSjLAGGCIiIQzy7MUJgaD8cAgP39A5oCJETkaGwiIsIRjWM1IVlEUvbYcYI4O1sQ09ro3r0gDHy20tSv79aYy+/eP7a67E37C7msyFHHZ8WHd7Z53Zv2964eDEjARE7UvnrrrkKfubT6ZDmrT12Jknwv1GttUhQf7eyAEGvp9OaD+0UtOxwNWZL0Hb9bbzGQymRkHEe8wP8faXjMhKkQAr8AAAAASUVORK5CYII=:>'}],terrain:{enable:!0,verticalExaggeration:1.25},route:{directionsAPI:{walking_speed:1.1},form:{contextMenu:{label:"Add Waypoint",popUpOptions:{className:"route-form-context-menu",closeButton:!1},iconSvgId:"mapbox-assist--add",longPressDuration:500,moveTolerancePx:20},mapboxControlContainer:".mapboxgl-ctrl-top-left",formContainerClassList:["route-form-container"],headerButtonClasslist:["route-form-header"],headerButtonText:"Route Steps",formClasslist:["route-waypoint-form"],routeInstructionsClassList:["route-form-instructions"],routeInstructions:["Right-click (or long press) on the map to add route steps (up to a maximum of 25).","Re-order items with the drag handle or use the up/down arrows.","Click on the waypoint label to edit it."],waypointListClassList:["route-form-waypoint-list"],waypointFormSettings:{containerClassList:["route-form-waypoint-item"],gridClassList:["route-form-grid"],columnClassList:{left:["col-left"],center:["col-center"],right:["col-right"]},controlGroup:{classList:["form-control-group"],gps:{labelText:"GPS",labelClassList:["form-control-label"],controlClassList:["form-control-input-value","gps"],ariaLabel:"Click to centre location on map",title:"Show on map",svgId:"mapbox-assist--geo-locate"},waypointName:{labelText:"Label",labelClassList:["form-control-label","pin-label-text"],controlClassList:["form-control-textarea"],ariaLabel:"Waypoint label text"}},icons:{moveUp:{svgId:"mapbox-assist--chevron-up",label:"Move Up",containerClassList:["move-up"]},moveDown:{svgId:"mapbox-assist--chevron-up",label:"Move Down",containerClassList:["move-down"]},grip:{svgId:"mapbox-assist--grip",label:"Drag to re-order",containerClassList:["move-handle"]},bin:{svgId:"mapbox-assist--bin",label:"Delete waypoint",containerClassList:["delete-list-item"]},routableWarning:{svgId:"mapbox-assist--warning",label:"Waypoint not on routable path",containerClassList:["routable-warning"]}}},buttonRowClassList:["button-row"],routeTypeAriaLabel:"Select Route Type",routeTypeOptions:[{value:"walking",text:"Walking"},{value:"cycling",text:"Cycling"},{value:void 0,text:"Point to point"}],summary:{show:!0,type:"detailed",showElevationProfile:!0},clearButtonText:"Clear Route",submitButtonText:"Show Route",waypointCountWarning:{message:"Maximum of 25 waypoints supported for walking or cycling routes.",duration:3e3,className:"warning"}},summary:{simple:{label:"Route Distance",classList:["route-summary-simple"],showDuration:!0,distanceUnits:"km"},detailed:{containerClassList:["route-information"],headerElement:{text:"Route Profile",classList:["route-profile-header"],iconSvgId:"mapbox-assist--chevron-up"},bodyClassList:["route-profile-body"],table:{containerClassList:["route-summary"],classList:["route-summary-table"],columns:{leg:{heading:"Route Summary",headingClassList:["route-summary-column-header","route-summary-leg-heading"]},distance:{heading:"",headingClassList:["route-summary-column-header"]},ascent:{heading:"Cumulative Ascent",svgId:"mapbox-assist--ascend",headingClassList:["route-summary-column-header"]},descent:{heading:"Cumulative Descent",svgId:"mapbox-assist--ascend",headingClassList:["route-summary-column-header","route-summary-descent-heading"]}},tableHeaderClassList:["route-summary-header"],rowHeaderClassList:["route-summary-waypoint-cell"],footerClassList:["route-summary-footer"],footerCellClassList:["route-summary-data-cell"],defaultWaypointName:"Waypoint",unroutableWarning:{svgId:"mapbox-assist--warning",captionClassList:["route-summary-unroutable-warning"],text:"Straight line data: distance is point-to-point only, elevation indicated is net change only."}},fullScreen:{containerClassList:["route-information-fullscreen-wrapper"]},gpx:{show:!0,modal:{classLists:{dialog:["gpx-download-dialog"],controlGroup:["gpx-download-dialog--control-group"],buttonRow:["gpx-download-dialog--button-row"]},title:"Download GPX for this Route",labels:{name:"Title",author:"Author",cancelButton:"Cancel",downloadButton:"Download"},placholders:{name:"Enter a name for this route",author:"Optional. Enter your name as the author of this file."},icons:{titleBar:"mapbox-assist--gpx-logo",download:"mapbox-assist--download",cancel:"mapbox-assist--cancel-solid"}},downloadLink:{label:"Export GPX File",classList:["gpx-link","btn","btn-sm"],svgId:"mapbox-assist--download"},description:"IMPORTANT: This is an auto-generated route based on map data and not recorded GPS based data. Innaccuracies in coordinate and elevation data may exist. Use with caution.",extensions:{schemaURL:"https://enzedonline.com/static/schema/gpx-extensions.xsd",namespace:"https://enzedonline.com/gpx-extensions"}}},elevationProfile:{show:!0,chartMaxHeight:"180px",chartMinAspectRatio:2.5,labels:{elevation:"Elevation",elevationUnits:"m",distance:"Distance",distanceUnits:"km",defaultStart:"Start",defaultEnd:"End"},styles:{profileLineColour:"",profileLineWidth:0,profileBackgroundColor:"#e1f3ca91",profileBorderColor:"#96B578",dropLineColour:"#96B578",dropLineWidth:1,title:{fontFamily:'"Quicksand", sans-serif',size:14,weight:"bolder",padding:0},bodyFontFamily:'"Quicksand", sans-serif',featureColor:"#0060f0",featureRadius:8,featureHoverRadius:10,stepPointRadius:.01,stepPointHoverRadius:2},axes:{x:{ticks:{maxTicks:10,padding:2}},y:{ticks:{maxTicks:5,padding:0}}},line:{tension:.2,width:2},tooltip:{options:{titleMarginBottom:2,titleFont:{family:'"Quicksand", sans-serif'},bodyFont:{family:'"Quicksand", sans-serif'}},standard:{backgroundColor:"rgba(0, 0, 0)",borderColor:"#222",borderWidth:0,textColor:"#fff"},interpolated:{backgroundColor:"rgba(20, 20, 20)",borderColor:"#888",borderWidth:1,textColor:"darkorange"}},containerClassList:["elevation-profile-container"],placeholder:{label:"Loading elevation profile ...",errorMessage:"Unable to load elevation profile data.",classList:"mapbox-assist-chart-placeholder"}}},line:{color:"#0060f0",width:4,opacity:.75},endPoints:{markOnMap:!0,startColor:"#02b875",endColor:"#d9534f",radius:10},pins:{defaultLabel:"Waypoint",icon:{id:"waypoint-marker",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAACMBJREFUeJzFm39sHFcRxz9vz4nt2D7fOU5IUpKiUkTaVKIIIRQl6o+ccRXEH/2DIlSkoiohaUlEoCpQFQQB0X9A/aMIgoQqUFFRlUJFSdWkCXeOUyUKrUQrVCitREWUJsTEsX2O41/p7Q5/vN27Xdvn93Zv7/hKZ++d3s6bmZ2ZN2/erKIV2F7Os1LuQqltwK3ATSjWInQBoJhGuIziPeBtRM4wr05xOjfRbNZU0yhvfb+TzuwXUPIAsANwYlJwgSFQv8XN/oFhNZc+k81QwOBIF27HPuAR4ENLjsn4n0AlHlpcty7VEYQn6Zo5xEsbZtJkN10FFCbuBfUUsCny+0qgE2j3r+vNKsB1YB6Y9a+jOIcnBziZP5IWy+koYHCkC7fzFyBfiVDuArqBFQnpfgBcA6bRyqnR/g2dM/vTsIbGFTAwvgnJHAXZUv2tC+hFm3kaqACTQFTct3DdzzG8+kIjpBtTwMDULYh7HNgIaJ9eDXQ0RLU+ZoEJwrHiPBnnHk5k30lKMrkCdkzciFJngBsA7dv9pPfU66ECXEG7h8YFlLeNYt/5JOSSKWBgvBdxXgM+Dujg1k/8hS4pBBhFB0uNfzL3wWc4s2YqLqlkLHvOIQLhgyffKuFBP7Y1/twat9C+4ukkpOKzPTDxAIr7AW3uaxJR0fD8TxIooi6n+CKFyS8nIWOP7eU87bwDrAX/b3uM+6+jI/kc2peDpU0BbejguYrwkzVjDu0OGiMobzPFvknb2+M9u3YeIxC+G3vhrwOXgf8CU+gAFl7Xxf9tyh9zmbB/L48OnxeNdYjzHcs7gTgWcM9kHxU5B/TgAOuxU99V9BoexTSoN1FyCQBPNqDU7eBvjgL0AlmLOVzgEoFSr+LKjQznyxZ30mYzSE8iu4AeQGvcRvhxdBZXw+t48gSSO7Foc7P1/U66ugcR9V3g04BWXAXoM8yT8Tm7CkCWDLuAJy04jGEBO8pvobgNhX76pvV+ssoQwHUU+yn2Pg1K6t8EIIrC5B7gZwTRIIu2huUQtYK/UcrdbrgDsFVAYepWcP8B6E1Nv2F8NDDNoWQnxfyw1VzVOSfuBnWUIK9cgznDvILOFgE8ZzMns++aprELgsorVK9t0tyI96mvxhYeoJQ/CfJQ9btNXO8MXTtSqDsuPMyKGZE7qtcmBcwSTlOPU+p91mqOpVDKPwMUAb2SzC47OsqbyJ02U9gug1uqo01hM7xjU+qgJf36EOcH1WuTAsJFFl16M8KsgPskA3wUsNvX12L7eYrZ12yYWBZDPWcBveU1KQBqD0hxMwfFKJ9ZAZcmswTR2BT5XUKprbxqjvg2UAJyCrBLnWs8djBcNmYRZgV0eD01Xgxjw8yJaqhQEYEK0apfN9SIPCSvu96wAGYFVJR9uhxWgJLFFb2kEKklxiYLCNuc4xirE2bh2qRWm7c3PxC13kjbGuqGGj+GoWEFzFfGTZTNCtienyIQ3eTRGWpuovikkbY9arRMHNceksuZ/msmwmYFHFQecBEIr+9LQxHeIX6KwbGNRvomDIxvIlBAB+Y4FC6VWQRhS/9WbwALonwd1LIxhes8akd/2bm/RSB25/IjqwcsAMJfbajbBrgaMdM+vStMVT3E4PhtlnMsxt0Tn0DUXvBprjKMj/L2hs0Ulqmwd6p6bUpGFOGd20pc50/cddW0fVqMnVNrcNSLBOlXFjO34SxUnGGbaewUcEfuNKj/AFoBJs/qJmyuN9HmndU7Skt8dvJjzLuvAh8BFlZ9loYQzkIvcGfPWZup7BSgA+HvAe1nNgdSfdSWLOFmcF+nMPFDto321L1n51iWwsSP8ORNFJvBp7Eac/CbJhyfDvs8G2FfENGnQH8HHNqAdRZ3u8AYC31zFlQR5C8o0RmeqA+DbAU1QHhPF+e84RK6egQunrPFphaAhQhRFMrPAV8CII/ZLEGb5pT/sS2BO+gSV48lh9fQR2YAiuco5u63nClmVdhzf0yw0JQx5+WaIR3A1vn/l9tRrvDHrPf/2wjvEi7AuLjuExZ3RdiLh4HyTxH0+t6BLlXFRYVoQ0QG7etJzhVHCQe/n1DKxSqLxz/TWdH7PZC3wZ94evnhS6IN7d+r/E87yYSfJiz8u8xMHYxLIr4Cjql5yOwm7AqV2FQaR9T0PZS3m7MbbUomESQ71Stlz4L6uT91LQC1EhPUgqqopyj2nU5CJvmZ7qrpx1H8C9BmmGrrkgHThDPSf+PNfz8pqeQKeGnDDEp2E+SF0c6N5mGh6TvyIMNrjdveemjsVP/P+VPAL31WWuMKYdNXcsjnITEab2vIzH0beA/QZhk7DMXATIT+OWYrjzdKsnEFnFg3jbCHsCskbXpYDi5hCxOEvUlaYhYincaWodwQgm5RiTKaHsqEFfsrhnIn0iCbXmdPu/sooDu1oqbaOGYJrzIXceWxtEinp4Bjq6+i2EXgCuOk4wqLgqvabdv8YIN0e7uKuSKoZwDNeBpsRpfXX1PqfSUFqlWk39ym3G8QnOVFE5b4iCRYcol5UiiyRpG+Aop9kyhVO9dP6gqL84qvNeMFiua0NxZ7Xwb5HaAFsW5aCyGyyZJnKeVfTIe5KJrY35k5AIwAumIT532P8DZbGGVl2yPp8lZD8xRQyo7hyd7qd1tXEH9sAIeHOdYzWm94o2huh+/J/BGE54GFm5j6iEb9wxRzLzSFNx/Nb3H2nH3o3s+FFZzFiFaYrpDJfL2ZrEErFDCcvQLUBKm3VxCiUV+xjxM9l5vLXKua3Eu5w4A25eD1l4UIR32ljlDMPd8K1lrX5b8y8zDit09eI3pYMu//pjFGJbOXFqF1CjjWM4pSteVsDO0KC00fdYDh7pFWsdW8N0froVD+I3AvELRe61MjAORlSvnPt5KdVr7ooiGV/QQLYnBkplFG3JaZfoDWK2Co/yIiizM7kW8y1H+x1ey03gUCFMpHgZ3+tyKl3sF0Givjwf6FibThunvIOMfBEdzKg/8P4QH+B7UNl9bfWkjlAAAAAElFTkSuQmCC"},size:.6,color:{default:"#0060f0",notRoutable:"#c68a1c"},classList:"waypoint-label"},enableUrlSharing:!1,maxGap:100,waypointCountWarning:{message:`Route: More than ${D.MAX_DIRECTIONS_WAYPOINTS} waypoints is not supported for this route type. Showing route for first ${D.MAX_DIRECTIONS_WAYPOINTS} waypoints only.`,duration:5e3}},featureLayers:{offCanvas:{classLists:{panel:["mapbox-assist--offcanvas"],body:["mapbox-assist--offcanvas-content"],closeBtn:["mapbox-assist--offcanvas-close-btn"],overlay:["mapbox-assist--offcanvas-overlay"]},svg:{closeBtn:"mapbox-assist--cancel-solid"}},apiProximity:100},search:{show:!1,placeholder:"Search for a place",useProximityBias:!0,options:{limit:10,types:"country,region,district,locality,place,poi",poi_category_exclusions:`
            airport_gate,advertising_agency,african_restaurant,airport,airport_terminal,airport_ticket_counter,alternative_healthcare,american_restaurant,animal_shelter,antique_shop,apartment_or_condo,aquarium,arcade,art,art_gallery,arts_and_craft_store,arts_center,asian_restaurant,atm,baby_goods_shop,bagel_shop,baggage_claim,bakery,bank,bar,barbeque_restaurant,hairdresser,baseball_field,baseball_stadium,basketball_court,basketball_stadium,
            beach_bar,bed_and_breakfast,beer_bar,beer_festival,bookmaker,biergarten,bike_rental,bicycle_shop,billiards,boat_rental,book_store,boutique,bowling_alley,boxing_gym,brazilian_restaurant,breakfast_restaurant,brewery,bridal_shop,brunch_restaurant,bubble_tea,buddhist_temple,buffet_restaurant,bus_line,burger_restaurant,commercial,butcher_shop,cafe,camera_shop,car_dealership,car_rental,car_wash,care_services,carpet_cleaner,carpet_store,
            carribean_restaurant,casino,cemetery,champagne_bar,charging_station,charity,check_cashing,cheese_shop,childcare,chinese_restaurant,chiropractor,chocolate_shop,church,climbing_gym,clothing_store,clothing,cobbler,cocktail_bar,coffee,coffee_roaster,coffee_shop,college,community_center,community_college,concert_hall,dessert_shop,conference_center,consulting,convenience_store,copyshop,corporate_amenity,beauty_store,counselling,courthouse,coworking_space,creole_restaurant,cricket_club,cruise,cuban_restaurant,currency_exchange,dance_studio,deli,dentist,department_store,design_studio,dialysis_center,diner_restaurant,disc_golf_course,discount_store,cannabis_dispensary,distillery,dive_bar,doctors_office,dog_park,
            donut_shop,driving_range,driving_school,dry_cleaners,duty_free_shop,education,electronics_shop,elementary_school,embassy,emergency_room,employment_agency,english_restaurant,entertainment,equipment_rental,event_planner,event_space,exhibit,fabric_store,factory,farm,fashion_accessory_shop,fast_food,fair_grounds,filipino_restaurant,financial_services,fire_station,fireworks_store,fish_and_chips_restaurant,fishmonger,seafood_restaurant,fishing,fishing_store,florist,food,food_and_drink,food_court,
            food_truck,football_stadium,fountain,frame_store,french_restaurant,frozen_yogurt_shop,funeral_home,furniture_maker,furniture_store,garden,garden_store,gas_station,gastropub,gay_bar,german_restaurant,gift_shop,gluten_free_restaurant,go_kart_racing,golf_course,government,government_offices,graffiti,greek_restaurant,grocery,gun_store,fitness_center,gymnastics,hardware_store,hawaiian_restaurant,health_food_store,health_services,herbalist,high_school,historic_site,hobby_shop,home,hockey_stadium,
            home,home_repair,hookah_lounge,stable,hospital,hospital_unit,hot_dog_stand,hotel,hotel_bar,hunting_store,ice_cream,ice_rink,indian_restaurant,indonesian_restaurant,information_technology_company,insurance_broker,internet_cafe,intersection,irish_pub,it,italian_restaurant,prison,japanese_restaurant,jewelry_store,juice_bar,karaoke_bar,kindergarten,kitchen_store,korean_barbeque_restaurant,korean_restaurant,university_laboratory,labor_union,laboratory,landscaping,language_school,laser_tag,latin_american_restaurant,
            laundry,lawyer,leather_goods,lgbtq_organization,library,lighting_store,liquor_store,locksmith,lodging,lounge,luggage_store,marina,market,martial_arts_studio,massage_shop,mattress_store,auto_repair,medical_clinic,medical_laboratory,medical_practice,medical_supply_store,mediterranean_restaurant,meeting_room,mexican_restaurant,middle_eastern_restaurant,military_base,military_office,miniature_golf,phone_store,monument,mosque,motel,motorcycle_dealer,motorsports_store,
            cinema,moving_target,museum,music_school,music_venue,nail_salon,news_kiosk,nongovernmental_organization,nightclub,nightlife,noodle_restaurant,notary,assisted_living_facility,observatory,office,optician,optometrist,outdoor_sculpture,outdoors_store,outlet_store,parking_lot,party_store,pawnshop,persian_restaurant,peruvian_restaurant,pet_store,pharmacy,photo_lab,photo_store,photographer,physiotherapist,pilates_studio,pizza_restaurant,place_of_worship,planetarium,playground,plaza,police_station,political_party_office,pop_up_shop,portuguese_restaurant,post_office,psychic,psychological_services,
            psychotherapist,public_artwork,public_transportation_station,racetrack,racecourse,radio_studio,rafting_spot,railway_platform,ramen_restaurant,real_estate_agent,recording_studio,recreation_center,recycling_center,rehabilitation_center,repair_shop,resort,rest_area,restaurant,rugby_stadium,sake_bar,salad_bar,salon,sandwich_shop,sauna,school,scuba_diving_shop,storage,service_area,services,sewing_shop,shipping_store,shoe_repair,shoe_store,shopping,shopping_mall,skatepark,
            ski_shop,skydiving_drop_zone,tobacco_shop,snack_bar,soccer_field,soccer_stadium,social_club,spa,spanish_restaurant,speakeasy,indoor_cycling,sports,sports_bar,sports_center,sports_club,field,sports_shop,stadium,paper_goods_store,steakhouse,stripclub,studio,summer_camp,supermarket,surf_spot,surfboard_store,sushi_restaurant,swimming_pool,synagogue,taco_shop,tailor,tanning_salon,tapas_restaurant,tattoo_parlour,tax_advisor,taxi,teahouse,tech_startup,television_studio,temple,tennis_courts,tennis_stadium,thai_restaurant,
            theatre,theme_park,theme_park_attraction,thrift_shop,tiki_bar,tours,townhall,toy_store,trade_school,train,transportation,travel_agency,tree,treecare,turkish_coffeehouse,turkish_restaurant,tutor,university,university_book_store,university_building,vacation_rental,vape_shop,variety_store,veterans_service,veterinarian,video_game_store,video_store,vietnamese_restaurant,vineyard,waffle_shop,warehouse,waste_disposal,waste_transfer_station,watch_store,water_park,well,whiskey_bar,wholesale_store,windmill,wine_bar,winery,wings_joint,womens_clothing_store,yoga_studio,zoo,zoo_exhibit
            `}},shareControl:{show:!0,label:"Share this map",iconSvgId:"mapbox-assist--share",fallbackMessage:"URL copied to clipboard"},styleControl:{show:!0,mapStyleContainerClassList:["style-control"]},helpControl:{show:!1,label:"Help",iconSvgId:"mapbox-assist--help",contentTemplateId:"help-content"},locationServices:{showUserLocationControl:!1,disclaimerModal:{icon:"mapbox-assist--info",title:"Why This Page Asks For Your Location",messages:["Your location is needed to place the map in your current area. To do this, you need to grant permission in your browser when prompted.",'This is not a requirement to use the map. If you decline it will simply disable the "Find My Location" feature. You can change this setting in the address bar of your browser at any time.',"Your location is never stored or shared by this site."],acceptButtonText:"Accept",denyButtonText:"No thanks",classList:["location-dialog"]}},coordsPopup:{popupOptions:{options:{className:"coordinates-popup"},classlists:{clipboardLink:["clipboard-link"],body:["coordinates-body"],coordsContainer:["coordinates-container"],coordsLink:["coordinates-link"],elevation:["coordinates-elevation"],title:["coordinates-title"]},labels:{clipboardLink:"Copy to clipboard",coordsLink:"Open in Google Maps",elevationUnits:"m. a.s.l.",estimated:"estimated"},icons:{clipboardSVGid:"mapbox-assist--clipboard"}},markerOptions:{className:"search-marker",color:"purple"}},caption:{html:"<small>Right-click, drag left/right to rotate. Right-click, drag up/down to tilt.</small>",classList:"mapbox-assist-caption"},debug:!1};var Uy=(e,t)=>t,Qc=class extends EventTarget{constructor(i,n=null){super();this.mapParameters=i;try{this.settings=(0,Tf.default)(Hy,n??{},{arrayMerge:Uy})}catch(a){throw console.error("Error merging settings:",a),new Error("Failed to initialize MapboxAssist due to settings merge error.")}this.debug=this.settings.debug,this.debug&&(console.debug("MapboxAssist: Initialized with parameters:",this.mapParameters),console.debug("MapboxAssist: Initialized with settings:",this.settings),window.mapboxAssist=this),this.mapOptions=i.mapOptions??{};let s=_n.getURL(this.debug)??{},o=vs.getURL(this.debug),r=this.settings.mapStyles?.[o??0]??null;if(this.mapOptions=(0,Tf.default)(this.mapOptions,s,{arrayMerge:Uy}),this._urlCenter=!!s.center,!Af()){this.destroy();return}if(i.mapInstance)this.map=i.mapInstance,this.mapContainer=this.map.getContainer(),r&&this.map.setStyle(r.source),this.mapOptions.bearing&&this.map.setBearing(this.mapOptions.bearing),this.mapOptions.pitch&&this.map.setPitch(this.mapOptions.pitch);else{if(!(this.mapOptions.accessToken||Ft()))throw new Error("Either a Mapbox access token or map instance is required");if(!this.mapOptions.container)throw new Error("Either a container or map instance is required");let a=document.getElementById(this.mapOptions.container);if(a)this.mapContainer=a;else throw new Error(`Container ${this.mapOptions.container} not found`);r&&(this.mapOptions.style=r.source),this.map=new si.Map({...this.mapOptions,container:this.mapOptions.container})}this.settings.loadSpritesheet?.path&&queueMicrotask(()=>{Rf(this.settings.loadSpritesheet.path,this.settings.loadSpritesheet.id)}),iu().then(a=>{this._userCountry=a,this._addMapControls()}),this.mapWrapper=this._createMapWrapper(),this.fitBounds=new Es(this.map,this.settings.fitBounds,i.coordinates,this.debug),this.featureLayerManager=new Kc(this.map,this.mapOptions,this.settings.featureLayers,this.debug),this.route=new ur(this,i.route,this.fitBounds,this.debug),ai(this.map)?this._onInitialStyleLoad():this.map.once("style.load",()=>{this._onInitialStyleLoad()})}map;mapOptions;settings;fitBounds;featureLayerManager;customLayers=[];mapWrapper;mapContainer;searchBox;debug=!1;_route;_urlCenter;_styleControl;_geolocateControl;_onScreenKeyboard=!1;_userCountry;destroy(){this._removeListeners(),this.searchBox&&this.map.removeControl(this.searchBox),this.searchBox=void 0,this._geolocateControl&&this.map.removeControl(this._geolocateControl),this._geolocateControl=void 0,this._styleControl&&this.map.removeControl(this._styleControl),this._styleControl=void 0,this.mapWrapper?.remove(),this._route?.destroy(),this._route=null,this.fitBounds?.destroy(),this.fitBounds=null,this.featureLayerManager?.destroy(),this.featureLayerManager=null,this.featureLayerManager?.removeEventListener("unmatchedFeature",this._handleUnmatchedFeature),this.map=null,this.mapParameters=null,this.mapOptions={},this.mapContainer=null,this.mapWrapper=null,this.settings=null,this.customLayers=[]}get isFullscreen(){return document.fullscreenElement===this.mapContainer}_onInitialStyleLoad=()=>{this._addListeners(),(this.route?.parameters.waypoints?.length??!1)||this._placeMap(),this.settings.terrain.enable&&(this._loadTerrain(),this.map.setMinPitch(Ss.MIN_TERRAIN_PITCH))};_placeMap=async()=>{if(this._urlCenter&&this.mapOptions.center){this.map.setCenter(this.mapOptions.center),this.map.setZoom(this.mapOptions.zoom??D.DEFAULT_ZOOM),this.debug&&console.debug("Map placed using mapOptions.center parameters:",this.mapOptions.center);return}this._userCountry||(this._userCountry=await iu());let i=!this.settings.limitToCountry||this._userCountry.ISO===this.settings.limitToCountry;this.mapParameters.coordinates||(this.settings.limitToCountry?(this.mapParameters.coordinates=await eu(this.settings.limitToCountry),this.debug&&console.debug("Limiting map to country:",this.settings.limitToCountry,this.mapParameters.coordinates)):(this.mapParameters.coordinates=this._userCountry.bounds,this.debug&&console.debug("Using user country bounds:",this._userCountry))),this.mapParameters.showUserLocationOnLoad&&i&&"permissions"in navigator?queueMicrotask(async()=>{let n=await this._maybeRequestLocation();n?(this.debug&&console.debug("User location:",n),this.map.jumpTo({center:n,zoom:this.mapOptions.zoom??D.USER_LOCATION_ZOOM})):this._fitParameterCoordinates()}):this._fitParameterCoordinates()};_maybeRequestLocation=async()=>{let i=localStorage.getItem("seen-location-disclaimer")==="true",n;try{n=await navigator.permissions.query({name:"geolocation"})}catch{}let s=n?.state??"prompt";if(s==="granted")return await this._getLocation();if(s!=="denied"){if(i)return s!=="prompt"?await this._getLocation():void 0;{let o=await this._showLocationDisclaimerDialog();return localStorage.setItem("seen-location-disclaimer","true"),o?await this._getLocation():void 0}}};_getLocation=async()=>{if("geolocation"in navigator)return new Promise(i=>{navigator.geolocation.getCurrentPosition(n=>{let{longitude:s,latitude:o}=n.coords;i([s,o])},n=>{console.warn("Geolocation error:",n),i(void 0)})})};_fitParameterCoordinates=()=>{this.mapParameters.coordinates&&queueMicrotask(()=>{this.fitBounds.points=this.mapParameters.coordinates,this.fitBounds.fitScreenBounds()})};_showLocationDisclaimerDialog=()=>new Promise(i=>{let n=this.settings.locationServices?.disclaimerModal;if(!n)console.warn("Location disclaimer modal settings not found. Skipping."),i(null);else{let s=document.createElement("dialog");if(s.classList.add(...n.classList),n.title){let u=document.createElement("div");u.role="heading",n.icon&&u.append(et(n.icon,["standard-icon"])),u.append(n.title),s.append(u)}let o=document.createElement("div");o.role="note",n.messages.forEach(u=>{let h=document.createElement("p");h.textContent=u,o.append(h)});let r=document.createElement("form");r.method="dialog";let a=document.createElement("menu"),l=document.createElement("button");l.value="decline",l.textContent=n.denyButtonText;let c=document.createElement("button");c.value="accept",c.textContent=n.acceptButtonText,a.append(l,c),r.append(a),s.append(o,r),this.mapContainer.appendChild(s),s.addEventListener("close",()=>{let u=s.returnValue==="accept";s.remove(),i(u)}),s.showModal()}});_addMapControls=()=>{if(this.settings.search.show){this.settings.limitToCountry&&(this.settings.search.options.country=this.settings.limitToCountry,this.debug&&console.debug("SearchBoxControl: limiting search to country",this.settings.limitToCountry)),this.searchBox=new hr(this.settings.search,this.debug),this.map.addControl(this.searchBox),this.searchBox.addEventListener("expandEvent",s=>{s.detail==="focused"&&(this.route?.routeForm?.expanded&&(this.route.routeForm.expanded=!1),this.isFullscreen&&this.route?.routeSummary?.detailedSummary.expanded&&(this.route.routeSummary.detailedSummary.expanded=!1))});let n=this.mapContainer.querySelector(".mapboxgl-ctrl-top-right");n&&(n.style.top=Q.TOP_RIGHT_ADJUST_WITH_SEARCH)}if(this.map._controls.some(n=>n instanceof si.NavigationControl)||this.map.addControl(new si.NavigationControl({visualizePitch:this.settings.terrain.enable})),!this.map._controls.some(n=>n instanceof si.ScaleControl)){let n=new si.ScaleControl;this.map.addControl(n,"bottom-right"),n._container.classList.add("mapboxgl-ctrl-group")}this.map._controls.some(n=>n instanceof si.FullscreenControl)||this.map.addControl(new si.FullscreenControl),this.settings.shareControl?.show&&this.map.addControl(new dr({label:this.settings.shareControl.label,iconSvgId:this.settings.shareControl.iconSvgId,fallbackMessage:this.settings.shareControl.fallbackMessage},this.debug)),this.settings.styleControl?.show&&(this.settings.mapStyles?.length??0)>1&&(this._styleControl=new fr(this.settings.mapStyles,this.settings.styleControl,this.debug),this.map.addControl(this._styleControl),this.route&&this.route.addEventListener("routeStyleLock",n=>{let s=n.detail;this._styleControl.state=s?"busy":"ready",this.debug&&console.debug("routeStyleLock:",s)})),this.settings.locationServices?.showUserLocationControl&&(this._geolocateControl=new si.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}),this.map.addControl(this._geolocateControl,"top-right"),this.debug&&(this._geolocateControl.on("trackuserlocationstart",()=>{console.debug("Tracking started",this._geolocateControl._watchState)}),this._geolocateControl.on("trackuserlocationend",()=>{console.debug("Tracking stopped",this._geolocateControl._watchState)}),this._geolocateControl.on("geolocate",n=>{console.debug("Geolocation success:",n.coords)}),this._geolocateControl.on("error",n=>{console.error("Geolocation error:",n)}))),this.settings.helpControl?.show&&this.map.addControl(new Ms(this.mapContainer,this.settings.helpControl,this.settings.featureLayers.offCanvas,this.debug)),this.map._controls.filter(n=>["sl","rl"].includes(n.constructor.name)).forEach(n=>this.map.removeControl(n))};_addListeners=()=>{this.map.on("style.load",this._handleStyleLoad),this.mapContainer.addEventListener("fullscreenchange",this._handleFullScreenEvent),this.mapContainer.style.setProperty("--map-height",`${this.map.getCanvas().scrollHeight}px`),this.mapContainer.style.setProperty("--map-width",`${this.map.getCanvas().scrollWidth}px`),this.map.on("resize",this._handleMapResize),window.visualViewport&&window.visualViewport.addEventListener("resize",this._handleResizeVisualViewport),this.settings.route.enableUrlSharing&&this.map.on("moveend",this._moveEndHandler),this.featureLayerManager?.addEventListener("unmatchedFeature",this._handleUnmatchedFeature),this.searchBox?.addEventListener("searchResultPositioned",this._handleSearchResultPositioned)};_removeListeners=()=>{this.map.off("style.load",this._handleStyleLoad),this.map.off("resize",this._handleMapResize),this.map.off("moveend",this._moveEndHandler),this.mapContainer.removeEventListener("fullscreenchange",this._handleFullScreenEvent),window.visualViewport&&window.visualViewport.removeEventListener("resize",this._handleResizeVisualViewport),this.featureLayerManager?.removeEventListener("unmatchedFeature",this._handleUnmatchedFeature),this.searchBox?.removeEventListener("searchResultPositioned",this._handleSearchResultPositioned)};_handleStyleLoad=()=>{this.settings.terrain.enable&&this._loadTerrain()};_handleUnmatchedFeature=i=>{let n=i,{lngLat:s,label:o,popupOptions:r}=n.detail;this._createCoordsPopup(s,o,r).addTo(this.map)};_handleSearchResultPositioned=i=>{let n=i,{lngLat:s,label:o}=n.detail;this._createCoordsMarker(s,o).addTo(this.map)};_handleFullScreenEvent=()=>{let i=this.isFullscreen,n=new CustomEvent("fullscreenmode",{detail:i});this.dispatchEvent(n),this.mapContainer.dataset.fullscreen=i?"true":"false",this.debug&&console.debug("Map is now fullscreen:",i)};_handleMapResize=()=>{if(!this._onScreenKeyboard){let i=`${this.map.getCanvas().scrollWidth}px`,n=`${this.map.getCanvas().scrollHeight}px`;this.mapContainer.style.setProperty("--map-width",i),this.mapContainer.style.setProperty("--map-height",n),this.debug&&console.debug(`Map resized to ${i} x ${n}`)}};_handleResizeVisualViewport=()=>{let i=window.visualViewport.height,n=i<window.innerHeight-100;this._onScreenKeyboard!==n&&(this.debug&&console.debug("On screen keyboard "+(n?"opened":"closed")),n?this.mapContainer.style.setProperty("--map-height",`${i}px`):this.mapContainer.style.setProperty("--map-height",`${this.map.getCanvas().scrollHeight}px`),this.mapWrapper.classList.toggle("keyboard-open",n),document.activeElement?.scrollIntoView({behavior:"smooth",block:"nearest"}),this._onScreenKeyboard=n)};_moveEndHandler=()=>_n.setURL(this.map);_createCoordsPopup=(i,n,s={})=>{let o=structuredClone(this.settings.coordsPopup.popupOptions);return o.options={...o.options,...s},new Jc(this.map,o,this.debug).setCoordsHTML(i,n)};_createCoordsMarker=(i,n)=>new si.Marker(this.settings.coordsPopup.markerOptions).setPopup(this._createCoordsPopup(i,n)).setLngLat(i);_hasTerrain=()=>{try{let i=this.map.getStyle();return Object.values(i.sources).some(n=>n.type==="raster-dem")}catch{return!1}};_loadTerrain=()=>{queueMicrotask(()=>{this._hasTerrain()||(this.map.addSource("mapbox-dem",{type:"raster-dem",url:Ss.TERRAIN_DEM_URL,tileSize:Ss.TERRAIN_TILE_SIZE,maxzoom:Ss.TERRAIN_MAX_ZOOM}),this.map.setTerrain({source:"mapbox-dem",exaggeration:this.settings.terrain.verticalExaggeration}))})};_createMapWrapper=()=>{let i=document.createElement("div");if(i.classList.add(Q.WRAPPER_CLASS),this.mapContainer.parentNode.insertBefore(i,this.mapContainer.nextSibling),i.appendChild(this.mapContainer),this.settings.caption.html){let n=document.createElement("div");n.classList=this.settings.caption.classList,n.innerHTML=this.settings.caption.html,i.appendChild(n)}return i};get route(){return this._route}set route(i){this._route&&this._route.clear(),this._route=i}};export{Qc as MapboxAssist,xn as RouteUrl};
/*! Bundled license information:

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.6
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)

tabbable/dist/index.esm.js:
  (*!
  * tabbable 5.3.3
  * @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
  *)

focus-trap/dist/focus-trap.esm.js:
  (*!
  * focus-trap 6.9.4
  * @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
  *)

@kurkle/color/dist/color.esm.js:
  (*!
   * @kurkle/color v0.3.4
   * https://github.com/kurkle/color#readme
   * (c) 2024 Jukka Kurkela
   * Released under the MIT License
   *)

chart.js/dist/chunks/helpers.dataset.js:
chart.js/dist/chart.js:
chart.js/dist/helpers.js:
  (*!
   * Chart.js v4.5.0
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   *)
*/
//# sourceMappingURL=mapbox-assist.esm.js.map
