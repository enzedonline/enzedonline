{% extends "base.html" %} 
{% load static core_tags adv_cache wagtailcore_tags %} 

{% block header %}

  {# Page Banner #}
  {% include 'blog/detail/banner.html' %}

{% endblock header %}

{% block content %}

  {# Login Form JS #}
  {% url 'account_login' as login_url %}
  {{ login_url |json_script:"login_url" }} 
  <script src="{% static 'js/comment_login.js'%}"></script>
 
  {% cache None page.slug "body" self.latest_revision_created_at %}

    {# Code Block JS - only load if tech blog #}
    {% if self.blog_type == 'TechBlogDetailPage' %}
      <link rel="stylesheet" type="text/css" href="{% static 'css/prism.css' %}">
      <script src="{% static 'js/prism.js' %}"></script>
    {% endif %} 

    <div class="container-fluid mt-3 px-2 px-sm-5">
      
      {# Categories #}
      {% include 'blog/detail/categories.html' %}

      {# Title #}
      <div class="row mt-2 text-center">
        <h1>{{ self.title }}</h1>
      </div>

      {# Blog Content #}
      {% for block in page.body %} 
        {% include_block block %} 
      {% endfor %}

      {# Tags #}
      {% include 'blog/detail/tags.html' %}

    </div>

  {% endcache %}

 {% endblock content %}
 
 {% block comments %}
  {# Comments #}
  {% include 'blog/detail/comments.html' %}  

{% endblock comments %}

{% block next_prev %}
  {% include 'blog/detail/next_prev.html' %}
{% endblock next_prev %}
