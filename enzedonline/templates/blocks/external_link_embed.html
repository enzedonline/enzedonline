{% load  flex_card_tags %}
{% padding self.border self.background as pad %}

{% if self.format == 'vertical' %}
  <div class="card {{ self.background }} {% if not self.border %}border-0{% endif %} p-{{pad}} mb-3 {% if self.full_height %} h-100 {% endif %}">
    <a href="{{ self.external_link }}" target="_blank">
      <img
        src="{{ self.image }}"
        alt="{{ self.title }}"
        style="width: 100%; height: auto"
      />
    </a>
    <div class="card-body pb-0 pt-2 px-0" style="object-fit: cover;">
        <h4 class="card-title font-weight-bold">{{ self.title }}</h4>
      {{ self.description|linebreaksbr }}
    </div>
    <div class="card-footer pt-2 pb-0 px-0 border-0 {{ self.background }}" style="text-align: {{ self.button_placement }};">
      <a class="btn stretched-link {{ self.button_appearance }} {{ self.button_size }}" onclick=" window.open('{{ self.external_link }}','_blank')" role="button">{{ self.button_text | upper }}</a>
    </div>
  </div>
{% elif self.format == 'image-left-responsive' %}
  <div class="card {{ self.background }} {% if not self.border %}border-0{% endif %} p-{{pad}} {% if self.full_height %}h-100{% endif %} mb-3">
    <div class="row no-gutters">
      <div class="col-sm-4 p-0" style="min-width: 200px;">
          <a href="{{ self.external_link }}" target="_blank">
            <img
              src="{{ self.image }}"
              alt="{{ self.title }}"
              style="width: 100%; height: auto"
            />
          </a>
      </div>
      <div class="d-flex flex-column col p-0 pl-0 pl-sm-3">
        <div class="card-body pt-2 pt-sm-1 pt-md-0 pb-0 px-0 mt-0 mt-sm-n2 mt-md-n1" style="object-fit: cover;">
          <h4 class="card-title font-weight-bold">{{ self.title }}</h4>
          {{ self.description|linebreaksbr }}
        </div>
        <div class="card-footer pt-2 pb-0 px-0 border-0 {{ self.background }}" style="text-align: {{ self.button_placement }};">
          <a class="btn stretched-link {{ self.button_appearance }} {{ self.button_size }}" onclick=" window.open('{{ self.external_link }}','_blank')" role="button">{{ self.button_text | upper }}</a>
        </div>
      </div>
    </div>
  </div>
{% elif self.format == 'image-left-fixed' %}
  <div class="card {{ self.background }} {% if not self.border %}border-0{% endif %} p-{{pad}} {% if self.full_height %} h-100{% endif %} mb-3">
    <div class="row no-gutters">
      <div class="col-4 p-0" style="min-width: 200px;">
          <a href="{{ self.external_link }}" target="_blank">
            <img
              src="{{ self.image }}"
              alt="{{ self.title }}"
              style="width: 100%; height: auto"
            />
          </a>
      </div>
      <div class="d-flex flex-column col p-0 pl-3">
        <div class="card-body pt-0 pb-0 px-0 mt-n2 mt-md-n1" style="object-fit: cover;">
          <h4 class="card-title font-weight-bold">{{ self.title }}</h4>
          {{ self.description|linebreaksbr }}
        </div>
        <div class="card-footer pt-2 pb-0 px-0 border-0 {{ self.background }}" style="text-align: {{ self.button_placement }};">
          <a class="btn stretched-link {{ self.button_appearance }} {{ self.button_size }}" onclick=" window.open('{{ self.external_link }}','_blank')" role="button">{{ self.button_text | upper }}</a>
        </div>
      </div>
    </div>
  </div>
{% elif self.format == 'image-right-responsive' %}
  <div class="card {{ self.background }} {% if not self.border %}border-0{% endif %} p-{{pad}} {% if self.full_height %} h-100{% endif %} mb-3">
    <div class="row no-gutters">
      <div class="d-flex flex-column col order-12 order-sm-1 pr-0 pr-sm-3">
        <div class="card-body pt-2 pt-sm-1 pt-md-0 pb-0 px-0 mt-0 mt-sm-n2 mt-md-n1">
          <h4 class="card-title font-weight-bold">{{ self.title }}</h4>
          <span class="card-text">{{ self.description|linebreaksbr }}</span>
        </div>
        <div class="card-footer pt-2 pb-0 px-0 border-0 {{ self.background }}" style="text-align: {{ self.button_placement }};">
          <a class="btn stretched-link {{ self.button_appearance }} {{ self.button_size }}" onclick=" window.open('{{ self.external_link }}','_blank')" role="button">{{ self.button_text | upper }}</a>
        </div>
      </div>
      <div class="col-sm-4 p-0 order-1 order-sm-12" style="min-width: 200px;">
          <a href="{{ self.external_link }}" target="_blank">
            <img
              src="{{ self.image }}"
              alt="{{ self.title }}"
              style="width: 100%; height: auto"
            />
          </a>
      </div>      
    </div>
  </div>
{% else %}
  <div class="card {{ self.background }} {% if not self.border %}border-0{% endif %} p-{{pad}} {% if self.full_height %} h-100{% endif %} mb-3">
    <div class="row no-gutters">
      <div class="d-flex flex-column col pr-3">
        <div class="card-body pt-0 pb-0 px-0 mt-n2 mt-md-n1">
          <h4 class="card-title font-weight-bold">{{ self.title }}</h4>
          <span class="card-text">{{ self.description|linebreaksbr }}</span>
        </div>
        <div class="card-footer pt-2 pb-0 px-0 border-0 {{ self.background }}" style="text-align: {{ self.button_placement }};">
          <a class="btn stretched-link {{ self.button_appearance }} {{ self.button_size }}" onclick=" window.open('{{ self.external_link }}','_blank')" role="button">{{ self.button_text | upper }}</a>
        </div>
      </div>
      <div class="col-4" style="min-width: 200px;">
          <a href="{{ self.external_link }}" target="_blank">
            <img
              src="{{ self.image }}"
              alt="{{ self.title }}"
              style="width: 100%; height: auto"
            />
          </a>
      </div>      
    </div>
  </div>
{% endif %}

