from django import template
from django.utils.translation import get_language_from_request

register = template.Library()

@register.simple_tag(takes_context=True)
def get_quote_marks(context):
    language = get_language_from_request(context.get('request', None))
    
    if language in ('fr', 'es'):
        open_path = OPEN_GUILLEMET
        close_path = CLOSE_GUILLEMET
    else:
        open_path = OPEN_QUOTE
        close_path = CLOSE_QUOTE

    quote_mark = {
        'open' : quote_svg(open_path),
        'close' : quote_svg(close_path)
    }

    return quote_mark

def quote_svg(path):
    return f'\
        <svg fill="currentColor" width="80%" height="80%" viewBox="0 0 991 735" xmlns="http://www.w3.org/2000/svg">\
            <path d="{path}"/>\
        </svg> '
        
OPEN_GUILLEMET = "M 390.5,734.3104 C 376.53048,731.91218 363.9918,726.81017 352.79833,718.96953 347.51119,715.26607 23.354941,408.3525 12.877653,397.13008 -1.6187482,381.60271 -3.9359508,361.39017 6.9128733,345.10038 9.0849482,341.83896 12.397312,337.8363 14.273681,336.20559 16.150051,334.57487 93.176154,262.52702 185.4428,176.09923 277.70945,89.671452 355.29276,17.350702 357.85017,15.386456 376.4383,1.1096265 405.43116,-3.556778 432.38215,3.3905247 443.63377,6.2909176 460.81628,14.95595 467.83927,21.27133 c 4.43704,3.989981 8.75897,10.357753 10.57654,15.583071 1.83045,5.262371 2.06497,14.74784 0.50501,20.425741 -1.73492,6.314716 -10.05662,18.083873 -17.19035,24.311869 -4.63748,4.048682 -275.09536,263.696329 -294.99575,283.204719 l -2.70119,2.64799 146.78635,139.3861 c 80.73249,76.66236 149.36767,141.51463 152.52261,144.11617 6.50706,5.36566 12.86543,14.27428 15.2694,21.39372 2.42521,7.18237 1.52167,19.29451 -2.02028,27.0821 -3.49626,7.68713 -10.45997,15.19934 -19.05195,20.55256 -7.62705,4.75203 -25.51716,11.66219 -35.03966,13.53429 -8.48401,1.66793 -24.59966,2.0712 -32,0.80074 z m 510,-0.17906 c -13.83391,-2.18858 -29.35836,-8.94735 -40.02551,-17.4256 -7.90706,-6.28454 -334.50951,-316.61316 -339.22311,-322.32042 -6.49955,-7.86971 -9.40857,-15.10536 -10.01113,-24.90084 -0.79433,-12.91305 3.07612,-22.87612 12.37025,-31.84267 2.13923,-2.06383 79.81444,-74.81523 172.61158,-161.66979 C 797.38747,81.285111 867.54229,16.253145 871.43296,13.555402 879.14387,8.2087554 887.74315,4.5187175 898,2.1552195 c 10.70795,-2.46744647 29.19441,-2.45647012 40,0.02375 20.92506,4.8029551 41.52767,16.8809225 48.2195,28.2679565 9.26998,15.774078 4.38678,35.050006 -12.6524,49.944124 C 967.45665,85.732258 675,366.84653 675,367.37879 c 0,0.65471 295.24309,280.78074 300.56817,285.17846 10.46943,8.64618 16.11809,21.03069 15.12269,33.15604 -1.44158,17.56048 -12.18695,30.49829 -32.94543,39.66753 -19.77373,8.73426 -38.88372,11.65541 -57.24543,8.75052 z"        
CLOSE_GUILLEMET = "M 59.129547,733.99748 C 29.833122,730.05671 9.714857,717.31357 3.9177087,699.02574 2.0265462,693.05983 2.0102188,681.97447 3.8839164,676.08269 5.6488036,670.53307 10.951752,661.84966 15.343249,657.31839 17.126455,655.47843 87.008866,589.59207 170.63749,510.90426 254.26612,432.21644 322.69375,367.34853 322.69889,366.75335 322.70389,366.15816 254.91477,303.55996 172.05607,227.64624 71.260579,135.29912 18.631023,86.512123 13.025086,80.226298 1.876618,67.725757 -0.02853871,63.617763 3.1999146e-4,52.141654 0.04485749,34.430594 8.048989,22.630349 25.946699,13.889705 50.406617,1.9442975 70.337177,-2.0081378 91.305546,0.92837314 107.42021,3.1851485 118.59294,7.6721881 130.37127,16.617417 c 3.80363,2.888723 77.06398,70.445167 162.80077,150.125423 85.73681,79.68027 162.71735,151.1979 171.06787,158.92807 8.35053,7.73018 16.11461,15.25302 17.25351,16.71745 3.80867,4.89725 7.08894,12.92192 8.0046,19.58203 1.82744,13.2919 -2.44278,24.97149 -13.02644,35.62899 -6.95104,6.99953 -342.39219,314.35234 -349.16971,319.9318 -17.06266,14.04649 -41.779404,20.01656 -68.172323,16.4663 z m 500.115223,-0.0317 c -15.86737,-2.22399 -32.18678,-8.38297 -40.52615,-15.29466 -9.47033,-7.84923 -15.57871,-20.07381 -15.57871,-31.17757 0,-9.1775 4.30548,-19.82986 11.28294,-27.91554 1.82461,-2.1144 72.21075,-68.66889 156.41364,-147.89885 C 755.03938,432.44919 824.05718,367.342 824.20936,366.99651 824.36155,366.65103 756.24301,303.82749 672.83484,227.38866 521.60164,88.792052 508.31492,76.183298 503.99393,67.163002 496.74948,52.039828 501.42276,32.89305 515.26406,20.988441 522.6413,14.643427 545.0791,5.1204273 560.32207,1.8650171 c 10.55918,-2.25510156 27.62619,-2.22192866 38.54587,0.074921 9.84605,2.071023 19.01838,5.6468758 26.99432,10.5237929 4.85646,2.969502 45.13592,39.888416 177.32117,162.527119 94.07052,87.27666 173.27962,161.05401 176.02025,163.94968 8.65136,9.1409 12.62127,19.96602 11.65393,31.77802 -0.93993,11.47776 -6.14535,20.50419 -18.28893,31.71354 -112.99397,104.3015 -342.1472,313.46095 -348.26348,317.87725 -8.75424,6.32109 -19.35562,10.87904 -30.25496,13.00789 -8.32641,1.62632 -25.54038,1.94699 -34.80547,0.64832 z"
OPEN_QUOTE = "M 410.86372,65.764262 C 253.59914,109.39187 151.24653,200.61501 125.79386,359.36994 c -6.92931,43.20179 2.74851,10.56818 32.03359,-11.3424 95.61686,-71.53845 283.61817,-46.22127 309.70958,117.21775 C 520.02953,754.57339 158.25327,804.6658 51.177878,644.86562 26.267171,607.72216 9.7761663,564.36552 3.833985,516.75064 -21.967082,309.66466 84.159888,125.22479 270.5934,38.588944 305.08515,22.562475 341.43503,10.02002 380.55278,0.82609109 400.1407,-3.141815 414.36708,7.5231423 420.92865,25.543243 c 5.55507,15.387733 7.45192,32.362629 -10.06493,40.221019 z m 518.30532,0 C 771.90445,109.39187 669.53247,200.61501 644.09917,359.36994 c -6.92931,43.20179 2.7485,10.56818 32.03358,-11.3424 95.61687,-71.53845 283.61819,-46.22127 309.69023,117.21775 52.51182,289.3281 -309.26439,339.42051 -416.33981,179.62033 -24.9107,-37.14346 -41.4017,-80.5001 -47.34389,-128.11498 C 496.33822,309.66466 602.44583,125.22479 788.89871,38.588944 823.39046,22.562475 859.721,10.02002 898.8581,0.82609109 918.44599,-3.141815 932.67239,7.5231423 939.23396,25.543243 c 5.55506,15.387733 7.45192,32.362629 -10.06492,40.221019 z"
CLOSE_QUOTE = "m 580.13754,669.20311 c 157.26403,-43.67265 259.6163,-134.94948 285.06888,-293.79787 6.9293,-43.20785 -2.74849,-10.5744 -32.03347,11.34908 C 737.55642,458.35424 549.55574,433.00279 523.46442,269.48694 470.97211,-20.030823 832.74712,-70.152702 939.82215,89.741513 964.73278,126.90685 981.22372,170.289 987.16589,217.9319 c 25.80101,207.20788 -80.32563,391.75632 -266.75851,478.44316 -34.49163,16.0359 -70.8414,28.58574 -109.95901,37.80444 -19.58784,3.95088 -33.81419,-6.70099 -40.37573,-24.75106 -5.55505,-15.39679 -7.45189,-32.38168 10.0649,-40.22533 z m -518.303538,0 C 219.09804,625.53046 321.46967,534.25363 346.90289,375.40524 353.83218,332.19739 344.1544,364.83084 314.86941,386.75432 219.25288,458.35424 31.252197,433.00279 5.1802402,269.48694 -47.350785,-20.030823 314.44359,-70.152702 421.51862,89.741513 446.42924,126.90685 462.92019,170.289 468.86235,217.9319 494.66333,425.13978 388.53673,609.68822 202.10385,696.37506 167.61221,712.41096 131.2818,724.9608 92.14483,734.1795 72.55699,738.13038 58.330644,727.47851 51.769104,709.42844 46.214055,694.03165 44.317209,677.04676 61.834002,669.20311 Z"

